<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[【债券笔记】：地方政府债务新政下城投债何去何从]]></title>
      <url>http://changshun.github.io/2016/07/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%9F%8E%E6%8A%95%E5%80%BA%E4%BD%95%E5%8E%BB%E4%BD%95%E4%BB%8E/</url>
      <content type="html"><![CDATA[<h2 id="融资平台定义"><a href="#融资平台定义" class="headerlink" title="融资平台定义"></a>融资平台定义</h2><p>目前城投平台没有官方统一定义和划分标准。</p>
<ul>
<li><p><strong>国务院:</strong> “由地方政府及其部门和机构等通过财政拨款或注入土地、股权等资产设立，承担政府投资项目融资功能，并拥有独立法人资格的经济实体。”</p>
</li>
<li><p><strong>银监会：</strong> “地方政府融资平台是指由地方政府出资设立并承担连带还款责任的机关、事业、企业三类法人。“ 包括综合性公司、行业公司、政府性机构、土储性公司（中心）四类。</p>
</li>
<li><p><strong>财政部</strong>：“由地方政府及其部门和机构、所属事业单位等通过财政拨款或注入土地、股权等资产设立，具有政府公益性项目投融资功能，并拥有独立企业法人资格的经济实体，如建设投资公司、建设开发公司、投资开发公司、投资控股公司、投资发展公司、投资集团公司、国有资产运营公司、国有资本经营管理中心等，以及行业性投资公司，如交通投资公司等。”</p>
</li>
<li><p><strong>发改委：</strong> ….</p>
</li>
<li><p><strong>审计署：</strong> ….</p>
</li>
</ul>
<p>上述大部分城投平台的定义都具有三个要素：政府出资、投融资功能、法人。但仅具有这三个要素其实很难清晰界定城投平台，因为有很多一般经营性国企也满足这三个条件。对此，银监会的认定标准比较直接，没有提及投融资功能，而是直接将“地方政府承担连带还款责任”作为判定标准。但根据我国预算法，“除法律另有规定外，地方政府及其所属部门不得为任何单位和个人的债务以任何方式提供担保。”实际融资中，所谓的地方政府连带还款责任都是通过各种复杂的隐性担保方式实现的。</p>
<h2 id="城投债产生背景与发展概况"><a href="#城投债产生背景与发展概况" class="headerlink" title="城投债产生背景与发展概况"></a>城投债产生背景与发展概况</h2><h3 id="时代的产物"><a href="#时代的产物" class="headerlink" title="时代的产物"></a>时代的产物</h3><p>城投债的出现带有明显的中国特色经济发展印记，是由分税制改革、旧《预算法》和《担保法》等法律限制、以基建促经济的政策导向共同催生的融资工具，属于游离于一般企业债（或公司债）和市政债之间的特殊债券品种。</p>
<p>1978年改革开放至90年代初期， 财政收入占GDP比例持续下降， 中央1994年决定实行分税制改革，将财政收入更加集中于中央、 1995年实施的《预算法》要求地方政府不得直接举债，也不得提供担保。<br>直接融资渠道受限的地方融资平台。同时加快土地资源兑现效率，以此为平台融资提供保障，增加财政收入规模，降低财政收支结构性失衡压力。具体模式为： 地方政府以项目收益为偿债担保通过融资平台的名义融入资金（银行贷款，信托、城投债），并将资金用来支付基础设施建设投资，土地开发等项目的成本，同时地方政府通过土地/现金注资、财政补贴等方式支持融资平台建设， 待项目完工出售后形成卖地收入、房屋销售收入等收益，除返还融资平台成本和管理费外，其他收益形成地方政府财政收入并注入下一轮项目建设中。</p>
<p><img src="img/chengtou/fig1.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[经济学研究的“数据控”]]></title>
      <url>http://changshun.github.io/2016/07/12/RClub/summerCamp/</url>
      <content type="html"><![CDATA[<h1 id="R简介"><a href="#R简介" class="headerlink" title="R简介"></a>R简介</h1><h2 id="R"><a href="#R" class="headerlink" title="R"></a>R</h2><blockquote>
<p><code>R</code> 是一种具有统计计算和绘图功能的编程语言和软件环境。</p>
</blockquote>
<ul>
<li>开源的</li>
<li>免费的</li>
<li>为统计而生</li>
<li>受欢迎的</li>
</ul>
<p><img src="http://i.imgbox.com/KNWUq7er.png" alt=""></p>
<p>截至2016年7月10日，R官网上已经上传了8736个包（package），代码分享网站github上的包更是数以万计。<br>据revolutionanalytics(微软子公司)统计使用R作为他们数据处理和分析的公司有，Google，facebook,微软， Mozilla， New York Times,Twitter, Uber等等。国内没有专门统计， 我们知道的，京东等公司都会使用R。</p>
<h2 id="R能做什么？"><a href="#R能做什么？" class="headerlink" title="R能做什么？"></a>R能做什么？</h2><p><a href="https://cran.r-project.org/web/views/" target="_blank" rel="external">https://cran.r-project.org/web/views/</a></p>
<p>Bayesian<br>ChemPhys<br>ClinicalTrials<br>Cluster<br>DifferentialEquations<br>Distributions<br>Econometrics<br>Environmetrics<br>ExperimentalDesign<br>Finance<br>Genetics<br>Graphics<br>HighPerformanceComputing<br>MachineLearning<br>MedicalImaging<br>MetaAnalysis<br>Multivariate<br>NaturalLanguageProcessing<br>NumericalMathematics<br>OfficialStatistics<br>Optimization<br>Pharmacokinetics<br>Phylogenetics<br>Psychometrics<br>ReproducibleResearch<br>Robust<br>SocialSciences<br>Spatial<br>SpatioTemporal<br>Survival<br>TimeSeries<br>WebTechnologies<br>gR</p>
<h2 id="几个例子"><a href="#几个例子" class="headerlink" title="几个例子"></a>几个例子</h2><ol>
<li>空间地理（<a href="http://changshun.github.io/putian/blackhospital.html">你的家乡有没有莆田系医院</a>）</li>
<li>爬虫+文本挖掘（<a href="http://changshun.github.io/2016/07/08/wordcloud/">绘制WISE老师论文关键词词云</a>）</li>
<li>求解金融模型</li>
<li>蒙特卡罗模拟</li>
</ol>
<h1 id="WISER-Club"><a href="#WISER-Club" class="headerlink" title="WISER Club"></a>WISER Club</h1><h2 id="WISER-Club-的历史"><a href="#WISER-Club-的历史" class="headerlink" title="WISER Club 的历史"></a>WISER Club 的历史</h2><p>开始于2013年，任坤，任乾大神，这俩是真大神。写R包，办私募。创建伊始，WISE R Club只是班级内部几个人的交流。</p>
<p>2014年，孙小军学长开始面向WISE研一开设R入门课程。</p>
<h2 id="过去的一年我们做了什么？"><a href="#过去的一年我们做了什么？" class="headerlink" title="过去的一年我们做了什么？"></a>过去的一年我们做了什么？</h2><p>去年，我们的吸纳了经院统计系的同学， 组织者达到了6、7个。我们开设了R-Basic和R-Topic两个系列课程，前者进行了四次课程，后者进行了大约9次课程，包含的话题有，高级数据处理、ggplot2可视化、文本处理及文本挖掘、蒙特卡罗模拟、使用Rmarkdown和LaTeX入门， 爬虫等等。</p>
<h1 id="下一学年的计划"><a href="#下一学年的计划" class="headerlink" title="下一学年的计划"></a>下一学年的计划</h1><ol>
<li>11月份承办中国R语言会议（厦门会场）</li>
<li>加入python系列课程</li>
<li>组织更多的数据竞赛</li>
</ol>
<h1 id="联系我们"><a href="#联系我们" class="headerlink" title="联系我们"></a>联系我们</h1><ol>
<li>微信公众号：<img src="https://wise-r.github.io/about/index/qrcode_for_gh_0dad10f96a96_430.jpg" alt=""></li>
<li>知乎专栏: <a href="https://zhuanlan.zhihu.com/wiser" target="_blank" rel="external">https://zhuanlan.zhihu.com/wiser</a></li>
<li>Github: <a href="https://github.com/wise-r" target="_blank" rel="external">https://github.com/wise-r</a></li>
<li>技术博客: <a href="https://wise-r.github.io/" target="_blank" rel="external">https://wise-r.github.io/</a></li>
</ol>
<p><strong>QQ群号暂且不要公布</strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[经济学研究的“数据控”]]></title>
      <url>http://changshun.github.io/2016/07/12/sketch/</url>
      <content type="html"><![CDATA[<h1 id="R简介"><a href="#R简介" class="headerlink" title="R简介"></a>R简介</h1><h2 id="R"><a href="#R" class="headerlink" title="R"></a>R</h2><blockquote>
<p><code>R</code> 是一种具有统计计算和绘图功能的编程语言和软件环境。</p>
</blockquote>
<ul>
<li>开源的</li>
<li>免费的</li>
<li>受欢迎的</li>
</ul>
<p>截至2016年7月10日，R8736</p>
<p><img src="fig1.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title></title>
      <url>http://changshun.github.io/2016/07/10/RClub/summerCamp/</url>
      <content type="html"><![CDATA[<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="categories" content="">
<meta name="tags" content="">
<meta name="subtitle" content="WISE R Club Introduction">
<meta name="date" content="2016-07-12 14:30"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><style>/*github*/
.codehilite {background-color:#fff;color:#333333;}
.codehilite .hll {background-color:#ffffcc;}
.codehilite .c{color:#999988;font-style:italic}
.codehilite .err{color:#a61717;background-color:#e3d2d2}
.codehilite .k{font-weight:bold}
.codehilite .o{font-weight:bold}
.codehilite .cm{color:#999988;font-style:italic}
.codehilite .cp{color:#999999;font-weight:bold}
.codehilite .c1{color:#999988;font-style:italic}
.codehilite .cs{color:#999999;font-weight:bold;font-style:italic}
.codehilite .gd{color:#000000;background-color:#ffdddd}
.codehilite .ge{font-style:italic}
.codehilite .gr{color:#aa0000}
.codehilite .gh{color:#999999}
.codehilite .gi{color:#000000;background-color:#ddffdd}
.codehilite .go{color:#888888}
.codehilite .gp{color:#555555}
.codehilite .gs{font-weight:bold}
.codehilite .gu{color:#800080;font-weight:bold}
.codehilite .gt{color:#aa0000}
.codehilite .kc{font-weight:bold}
.codehilite .kd{font-weight:bold}
.codehilite .kn{font-weight:bold}
.codehilite .kp{font-weight:bold}
.codehilite .kr{font-weight:bold}
.codehilite .kt{color:#445588;font-weight:bold}
.codehilite .m{color:#009999}
.codehilite .s{color:#dd1144}
.codehilite .n{color:#333333}
.codehilite .na{color:teal}
.codehilite .nb{color:#0086b3}
.codehilite .nc{color:#445588;font-weight:bold}
.codehilite .no{color:teal}
.codehilite .ni{color:purple}
.codehilite .ne{color:#990000;font-weight:bold}
.codehilite .nf{color:#990000;font-weight:bold}
.codehilite .nn{color:#555555}
.codehilite .nt{color:navy}
.codehilite .nv{color:teal}
.codehilite .ow{font-weight:bold}
.codehilite .w{color:#bbbbbb}
.codehilite .mf{color:#009999}
.codehilite .mh{color:#009999}
.codehilite .mi{color:#009999}
.codehilite .mo{color:#009999}
.codehilite .sb{color:#dd1144}
.codehilite .sc{color:#dd1144}
.codehilite .sd{color:#dd1144}
.codehilite .s2{color:#dd1144}
.codehilite .se{color:#dd1144}
.codehilite .sh{color:#dd1144}
.codehilite .si{color:#dd1144}
.codehilite .sx{color:#dd1144}
.codehilite .sr{color:#009926}
.codehilite .s1{color:#dd1144}
.codehilite .ss{color:#990073}
.codehilite .bp{color:#999999}
.codehilite .vc{color:teal}
.codehilite .vg{color:teal}
.codehilite .vi{color:teal}
.codehilite .il{color:#009999}
.codehilite .gc{color:#999;background-color:#EAF2F5}
</style><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  extensions: ["tex2jax.js"],
  jax: ["input/TeX"],
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: false
  },
  TeX: {
    extensions: ["AMSmath.js", "AMSsymbols.js"],
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    equationNumbers: {
      autoNumber: "AMS",
    },
    unicode: {
      fonts: "STIXGeneral,'Arial Unicode MS'"
    }
  },
  showProcessingMessages: false
});
</script>
<title>经济学研究的“数据控”</title></head><body><article class="markdown-body"><ul>
<li>WISE</li>
<li>R</li>
</ul>
<hr>
<h1 id="r"><a name="user-content-r" href="#r" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>R简介</h1>
<h2 id="r_1"><a name="user-content-r_1" href="#r_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>R</h2>
<blockquote>
<p><code>R</code> 是一种具有统计计算和绘图功能的编程语言和软件环境。</p>
</blockquote>
<ul>
<li>开源的</li>
<li>免费的</li>
<li>为统计而生</li>
<li>受欢迎的</li>
</ul>
<p><img alt="" src="http://i.imgbox.com/KNWUq7er.png"></p>
<p>截至2016年7月10日，R官网上已经上传了8736个包（package），代码分享网站github上的包更是数以万计。<br>
据revolutionanalytics(微软子公司)统计使用R作为他们数据处理和分析的公司有，Google，facebook,微软， Mozilla， New York Times,Twitter, Uber等等。国内没有专门统计， 我们知道的，京东等公司都会使用R。</p>
<h2 id="r_2"><a name="user-content-r_2" href="#r_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>R能做什么？</h2>
<p><a href="https://cran.r-project.org/web/views/" target="_blank" rel="external">https://cran.r-project.org/web/views/</a></p>
<p>Bayesian<br>
ChemPhys<br>
ClinicalTrials<br>
Cluster<br>
DifferentialEquations<br>
Distributions<br>
Econometrics<br>
Environmetrics<br>
ExperimentalDesign<br>
Finance<br>
Genetics<br>
Graphics<br>
HighPerformanceComputing<br>
MachineLearning<br>
MedicalImaging<br>
MetaAnalysis<br>
Multivariate<br>
NaturalLanguageProcessing<br>
NumericalMathematics<br>
OfficialStatistics<br>
Optimization<br>
Pharmacokinetics<br>
Phylogenetics<br>
Psychometrics<br>
ReproducibleResearch<br>
Robust<br>
SocialSciences<br>
Spatial<br>
SpatioTemporal<br>
Survival<br>
TimeSeries<br>
WebTechnologies<br>
gR</p>
<h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>几个例子</h2>
<ol>
<li>空间地理（<a href="http://changshun.github.io/putian/blackhospital.html">你的家乡有没有莆田系医院</a>）</li>
<li>爬虫+文本挖掘（<a href="http://changshun.github.io/2016/07/08/wordcloud/">绘制WISE老师论文关键词词云</a>）</li>
<li>求解金融模型</li>
<li>蒙特卡罗模拟</li>
</ol>
<h1 id="wiser-club"><a name="user-content-wiser-club" href="#wiser-club" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>WISER Club</h1>
<h2 id="wiser-club_1"><a name="user-content-wiser-club_1" href="#wiser-club_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>WISER Club 的历史</h2>
<p>开始于2013年，任坤，任乾大神，这俩是真大神。写R包，办私募。创建伊始，WISE R Club只是班级内部几个人的交流。</p>
<p>2014年，孙小军学长开始面向WISE研一开设R入门课程。</p>
<h2 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>过去的一年我们做了什么？</h2>
<p>去年，我们的吸纳了经院统计系的同学， 组织者达到了6、7个。我们开设了R-Basic和R-Topic两个系列课程，前者进行了四次课程，后者进行了大约9次课程，包含的话题有，高级数据处理、ggplot2可视化、文本处理及文本挖掘、蒙特卡罗模拟、使用Rmarkdown和LaTeX入门， 爬虫等等。</p>
<h1 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>下一学年的计划</h1>
<ol>
<li>11月份承办中国R语言会议（厦门会场）</li>
<li>加入python系列课程</li>
<li>组织更多的数据竞赛</li>
</ol>
<h1 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>联系我们</h1>
<ol>
<li>微信公众号：<img alt="" src="https://wise-r.github.io/about/index/qrcode_for_gh_0dad10f96a96_430.jpg"></li>
<li>知乎专栏: <a href="https://zhuanlan.zhihu.com/wiser" target="_blank" rel="external">https://zhuanlan.zhihu.com/wiser</a></li>
<li>Github: <a href="https://github.com/wise-r" target="_blank" rel="external">https://github.com/wise-r</a></li>
<li>技术博客: <a href="https://wise-r.github.io/" target="_blank" rel="external">https://wise-r.github.io/</a></li>
</ol>
<p><strong>QQ群号暂且不要公布</strong></p></article></body></html>]]></content>
    </entry>
    
    <entry>
      <title></title>
      <url>http://changshun.github.io/2016/07/10/sketch/</url>
      <content type="html"><![CDATA[<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="categories" content="">
<meta name="tags" content="">
<meta name="subtitle" content="WISE R Club Introduction">
<meta name="date" content="2016-07-12 14:30"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><style>/*github*/
.codehilite {background-color:#fff;color:#333333;}
.codehilite .hll {background-color:#ffffcc;}
.codehilite .c{color:#999988;font-style:italic}
.codehilite .err{color:#a61717;background-color:#e3d2d2}
.codehilite .k{font-weight:bold}
.codehilite .o{font-weight:bold}
.codehilite .cm{color:#999988;font-style:italic}
.codehilite .cp{color:#999999;font-weight:bold}
.codehilite .c1{color:#999988;font-style:italic}
.codehilite .cs{color:#999999;font-weight:bold;font-style:italic}
.codehilite .gd{color:#000000;background-color:#ffdddd}
.codehilite .ge{font-style:italic}
.codehilite .gr{color:#aa0000}
.codehilite .gh{color:#999999}
.codehilite .gi{color:#000000;background-color:#ddffdd}
.codehilite .go{color:#888888}
.codehilite .gp{color:#555555}
.codehilite .gs{font-weight:bold}
.codehilite .gu{color:#800080;font-weight:bold}
.codehilite .gt{color:#aa0000}
.codehilite .kc{font-weight:bold}
.codehilite .kd{font-weight:bold}
.codehilite .kn{font-weight:bold}
.codehilite .kp{font-weight:bold}
.codehilite .kr{font-weight:bold}
.codehilite .kt{color:#445588;font-weight:bold}
.codehilite .m{color:#009999}
.codehilite .s{color:#dd1144}
.codehilite .n{color:#333333}
.codehilite .na{color:teal}
.codehilite .nb{color:#0086b3}
.codehilite .nc{color:#445588;font-weight:bold}
.codehilite .no{color:teal}
.codehilite .ni{color:purple}
.codehilite .ne{color:#990000;font-weight:bold}
.codehilite .nf{color:#990000;font-weight:bold}
.codehilite .nn{color:#555555}
.codehilite .nt{color:navy}
.codehilite .nv{color:teal}
.codehilite .ow{font-weight:bold}
.codehilite .w{color:#bbbbbb}
.codehilite .mf{color:#009999}
.codehilite .mh{color:#009999}
.codehilite .mi{color:#009999}
.codehilite .mo{color:#009999}
.codehilite .sb{color:#dd1144}
.codehilite .sc{color:#dd1144}
.codehilite .sd{color:#dd1144}
.codehilite .s2{color:#dd1144}
.codehilite .se{color:#dd1144}
.codehilite .sh{color:#dd1144}
.codehilite .si{color:#dd1144}
.codehilite .sx{color:#dd1144}
.codehilite .sr{color:#009926}
.codehilite .s1{color:#dd1144}
.codehilite .ss{color:#990073}
.codehilite .bp{color:#999999}
.codehilite .vc{color:teal}
.codehilite .vg{color:teal}
.codehilite .vi{color:teal}
.codehilite .il{color:#009999}
.codehilite .gc{color:#999;background-color:#EAF2F5}
</style><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  extensions: ["tex2jax.js"],
  jax: ["input/TeX"],
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: false
  },
  TeX: {
    extensions: ["AMSmath.js", "AMSsymbols.js"],
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    equationNumbers: {
      autoNumber: "AMS",
    },
    unicode: {
      fonts: "STIXGeneral,'Arial Unicode MS'"
    }
  },
  showProcessingMessages: false
});
</script>
<title>经济学研究的“数据控”</title></head><body><article class="markdown-body"><ul>
<li>WISE</li>
<li>R</li>
</ul>
<hr>
<h1 id="r"><a name="user-content-r" href="#r" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>R简介</h1>
<h2 id="r_1"><a name="user-content-r_1" href="#r_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>R</h2>
<blockquote>
<p><code>R</code> 是一种具有统计计算和绘图功能的编程语言和软件环境。</p>
</blockquote>
<ul>
<li>开源的</li>
<li>免费的</li>
<li>受欢迎的</li>
</ul>
<p>截至2016年7月10日，R8736</p>
<p><img alt="" src="fig1.png"></p></article></body></html>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[绘制WISE老师论文关键词词云]]></title>
      <url>http://changshun.github.io/2016/07/08/wordcloud/</url>
      <content type="html"><![CDATA[<blockquote>
<p>最近看到<a href="http://lchiffon.github.io/" target="_blank" rel="external">@lchiffon</a>写的<a href="http://github.com/lchiffon/wordcloud2" target="_blank" rel="external">wordcloud2</a>，比<a href="https://cran.r-project.org/web/packages/wordcloud/" target="_blank" rel="external">wordcloud</a>使用更简单，效果也更炫酷更灵活。于是想画一个WISE老师发表英文论文的关键词的词云。本文的步骤包括数据抓取和绘制词云两个步骤。</p>
</blockquote>
<h1 id="0-准备"><a href="#0-准备" class="headerlink" title="0. 准备"></a>0. 准备</h1><h2 id="0-1-安装wordcloud2"><a href="#0-1-安装wordcloud2" class="headerlink" title="0.1 安装wordcloud2"></a>0.1 安装<code>wordcloud2</code></h2><p><code>wordcloud2</code>首次运行前需要从作者的github下载安装，运行下面的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtools::install_github(&quot;lchiffon/wordcloud2&quot;)</div></pre></td></tr></table></figure>
<h2 id="0-2-载入要用的包："><a href="#0-2-载入要用的包：" class="headerlink" title="0.2 载入要用的包："></a>0.2 载入要用的包：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">library(RCurl)</div><div class="line">library(XML)</div><div class="line">library(stringr)</div><div class="line">library(plyr)</div><div class="line">library(dplyr)</div><div class="line">library(wordcloud2)</div><div class="line">library(tm)</div></pre></td></tr></table></figure>
<ul>
<li><code>Rcurl</code>和<code>XML</code>用于网页的抓取，</li>
<li><code>stringr</code>用于抓取文本的处理和提取</li>
<li><code>plyr</code>和<code>dplyr</code>用于数据变形和处理</li>
<li><code>wordcloud2</code>则用于词云的绘制</li>
</ul>
<h1 id="1-抓取论文信息"><a href="#1-抓取论文信息" class="headerlink" title="1. 抓取论文信息"></a>1. 抓取论文信息</h1><blockquote>
<p>王亚南经济研究院(WISE)成立于2005年，是厦门大学一个实体性的经济学教育科研机构，不太长的时间内，成为亚太地区和中国一流的、与国际接轨的现代经济学教育和研究机构。</p>
</blockquote>
<p><code>WISE</code>将所有老师公开发表的论文放在 <a href="http://121.192.176.75/index.php?ser_id=2" target="_blank" rel="external">http://121.192.176.75/index.php?ser_id=2</a>这个网站上，其中英文期刊有180篇， 中文有60余篇。我们这次为了绘制词云的美观，只选去其中英文期刊的关键词信息。</p>
<p><img src="/img/wisepapers/page.png" alt=""></p>
<h2 id="1-1-获得分页网址"><a href="#1-1-获得分页网址" class="headerlink" title="1.1 获得分页网址"></a>1.1 获得分页网址</h2><p>网站将250多个论文条目每20条放置一页，每个分页通过网址体现出来，<code>http://121.192.176.75/index.php?ser_id=2&amp;search=&amp;year=&amp;os=&lt;数字&gt;</code>， <code>&lt;数字位置&gt;</code>为20的倍数， 总共有13页。下面的代码生成没个分页的网址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 获得论文的每一个分页</div><div class="line">pageLinks &lt;- str_c(&quot;http://121.192.176.75/index.php?ser_id=2&amp;search=&amp;year=&amp;os=&quot;,seq(0, 240, 20))</div></pre></td></tr></table></figure>
<h2 id="1-2-获得每篇论文的链接"><a href="#1-2-获得每篇论文的链接" class="headerlink" title="1.2 获得每篇论文的链接"></a>1.2 获得每篇论文的链接</h2><p><code>getHTMLLinks</code>是<code>Rcurl</code>内置的一个函数，这个函数可以获得某个页面上所有的链接：</p>
<ul>
<li>对上面生成的页面网址应用<code>getHTMLLinks</code>函数， 就可以获得这些分页上的所有的网址；  </li>
<li>对抓取的网址匹配<code>&quot;\\?ser_id=2&amp;p_id=\\d+&quot;</code>获得符合条件的论文的链接;   </li>
<li>补齐网址。</li>
</ul>
<p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">paperlinks &lt;- lapply(pageLinks, getHTMLLinks)%&gt;%</div><div class="line">  unlist()%&gt;%</div><div class="line">  str_extract(&quot;\\?ser_id=2&amp;p_id=\\d+&quot;)%&gt;%</div><div class="line">  na.omit()%&gt;%</div><div class="line">  str_c(&quot;http://121.192.176.75/index.php&quot;,.)</div><div class="line">head(paperlinks)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">## [1] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2329&quot;</div><div class="line">## [2] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2322&quot;</div><div class="line">## [3] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2333&quot;</div><div class="line">## [4] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2338&quot;</div><div class="line">## [5] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2332&quot;</div><div class="line">## [6] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2321&quot;</div></pre></td></tr></table></figure>
<h2 id="1-3-抓取论文信息"><a href="#1-3-抓取论文信息" class="headerlink" title="1.3 抓取论文信息"></a>1.3 抓取论文信息</h2><p>我们使用<code>Rcurl</code>包内的<code>xpathSApply</code>函数， 通过匹配<code>Xpath</code>定位我们需要抓取的内容在网页的位置进行抓取（不懂<code>Xpath</code>,可以参考w3schools提供的一个系列教程<a href="http://www.w3schools.com/xsl/xpath_intro.asp" target="_blank" rel="external">http://www.w3schools.com/xsl/xpath_intro.asp</a>）。</p>
<p><code>getPaperInfo</code>是抓取单条论文信息的函数，返回包含<code>author</code>, <code>title</code>,<code>journal</code>,<code>keyWords</code>, <code>paperlink</code>,<code>fullTextLink</code>, <code>updatedDate</code>的<code>data.frame</code></p>
<p><img src="/img/wisepapers/xpath.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># Function to scrap</div><div class="line">getPaperInfo &lt;- function(paperlink)&#123;</div><div class="line">  page_parse &lt;- htmlParse(paperlink,encoding = &quot;utf-8&quot;)</div><div class="line">  # Get author name</div><div class="line">  author &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[1]/strong&apos;,xmlValue)</div><div class="line">  # insert &amp; between diff names</div><div class="line">  author &lt;- str_replace(author, &apos;,&apos;,&apos;\\&amp;&apos;)</div><div class="line">  # paper title</div><div class="line">  title &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dt&apos;, xmlValue)</div><div class="line">  # paper url</div><div class="line">  journal &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[2]/i&apos;, xmlValue)</div><div class="line">  # File name include authoe title journal</div><div class="line">  keyWords &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[6]/text()&apos;, xmlValue)</div><div class="line">  keyWords &lt;- ifelse(length(keyWords)==0, NA, keyWords)</div><div class="line">  fullTextLink &lt;- getHTMLLinks(page_parse)%&gt;%</div><div class="line">    str_extract(&quot;.+\\.pdf&quot;)%&gt;%</div><div class="line">    na.omit()</div><div class="line">  fullTextLink &lt;- ifelse(length(fullTextLink)==0,NA,                str_c(&quot;http://121.192.176.75&quot;,fullTextLink))</div><div class="line">  updatedDate &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[3]&apos;, xmlValue)%&gt;%</div><div class="line">    str_extract(&quot;20\\d&#123;6&#125;&quot;)</div><div class="line">  paperInfo &lt;- data.frame(author, title,journal,keyWords, paperlink,fullTextLink, updatedDate)</div><div class="line">  return(paperInfo)</div><div class="line">&#125;</div><div class="line">getPaperInfo(paperlinks[10])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#        author                              title  journal                     keyWords</div><div class="line">#1 韩乾&amp; 洪永淼 国家产业政策、资产价格与投资者行为 经济研究 产业政策，过时信息，过度反应</div><div class="line">#                                           paperlink                                             </div><div class="line"># http://121.192.176.75/index.php?ser_id=2&amp;p_id=2327</div><div class="line"># fullTextLink </div><div class="line">#1 http://121.192.176.75/repec/upload/201602231742217864.pdf    </div><div class="line">#updatedDate</div><div class="line"># 20160223</div></pre></td></tr></table></figure>
<p>我们对所有的<code>paperlinks</code>应用<code>getPaperInfo</code>就会获得所有的论文的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">papers.df &lt;- lapply(paperlinks, getPaperInfo)%&gt;%</div><div class="line">  do.call(&quot;rbind&quot;,.)</div></pre></td></tr></table></figure>
<h1 id="2-绘制词云"><a href="#2-绘制词云" class="headerlink" title="2. 绘制词云"></a>2. 绘制词云</h1><p>本部分我们对<code>WISE</code> 老师发表的英文期刊的关键词绘制词云。</p>
<h2 id="2-1-WISE老师喜欢发什么期刊？"><a href="#2-1-WISE老师喜欢发什么期刊？" class="headerlink" title="2.1 WISE老师喜欢发什么期刊？"></a>2.1 WISE老师喜欢发什么期刊？</h2><p>首先我们通过正则条件将英文期刊发表的论文的信息提取出来，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">papers.en &lt;- papers.df[str_detect(papers.df$journal,&quot;[A-Za-z]&quot;),]</div><div class="line">papers.en$journal &lt;- trimws(papers.en$journal)</div><div class="line">journalRank &lt;- table(papers.en$journal)%&gt;%as.data.frame()%&gt;%arrange(-Freq)</div><div class="line">names(journalRank) &lt;- c(&quot;journal&quot;,&quot;Freq&quot;)</div><div class="line">head(journalRank)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#                                           journal Freq</div><div class="line"># 1                         Journal of Econometrics   25</div><div class="line"># 2                           China Economic Review   16</div><div class="line"># 3                              Econometric Theory    8</div><div class="line"># 4 Journal of the American Statistical Association    7</div><div class="line"># 5                             Econometric Reviews    4</div><div class="line"># 6                               Economics Letters    3</div></pre></td></tr></table></figure>
<p>从上面WISE老师发表论文最多的六个期刊可以看出来，WISE老师发表的论文还是以计量统计为主， 发表论文的质量也是蛮高的， 计量经济学field第一的期刊JOE，竟然发了25篇。。。</p>
<h2 id="2-2-WISE的老师都在研究啥？"><a href="#2-2-WISE的老师都在研究啥？" class="headerlink" title="2.2 WISE的老师都在研究啥？"></a>2.2 WISE的老师都在研究啥？</h2><h3 id="2-2-1-计算词频"><a href="#2-2-1-计算词频" class="headerlink" title="2.2.1 计算词频"></a>2.2.1 计算词频</h3><p>下面我们想看看WISE老师发表的论文都在说啥吧。我们下面统计下所有的论文关键词的词频。<br>下面的代码把所有的关键词放在一起，并对英文单词的大小写， 标点，空格， 和停止词（比如and， a, um）处理，然后统计了各个单词的出现频率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">keyWords &lt;- str_c(na.omit(papers.en$keyWords), collapse = &quot; &quot;)</div><div class="line">keyWords_source &lt;- VectorSource(keyWords)</div><div class="line">wordMatrix &lt;- Corpus(keyWords_source)%&gt;%</div><div class="line">  tm_map(content_transformer(tolower))%&gt;%</div><div class="line">  tm_map(removePunctuation)%&gt;%</div><div class="line">  tm_map(stripWhitespace)%&gt;%</div><div class="line">  tm_map(removeWords, stopwords(&quot;english&quot;))%&gt;%</div><div class="line">  DocumentTermMatrix()%&gt;%as.matrix()%&gt;%t()%&gt;%</div><div class="line">  as.data.frame()</div><div class="line">wordMatrix$Term &lt;- rownames(wordMatrix)</div><div class="line">names(wordMatrix) &lt;- c(&quot;Freq&quot;,&quot;Term&quot;)</div><div class="line">termFreq &lt;- select(wordMatrix, Term, Freq)</div></pre></td></tr></table></figure>
<h2 id="2-3-绘制词云"><a href="#2-3-绘制词云" class="headerlink" title="2.3 绘制词云"></a>2.3 绘制词云</h2><p>###2.3.1 使用<code>wordcloud2</code>绘制词云</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/origin.png" alt=""></p>
<p>我们可以通过修改<code>size</code>, <code>color</code>, <code>shape</code>等参数修改字体大小， 颜色，以及词云形状。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq, size = 1,shape = &apos;star&apos;)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/star.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq, size = 2, minRotation = -pi/6, maxRotation = -pi/6,</div><div class="line">  rotateRatio = 1)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/slope.png" alt=""></p>
<p>甚至你可以自定义词云的形状：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">figPath = system.file(&quot;examples/t.png&quot;,package = &quot;wordcloud2&quot;)</div><div class="line">wordcloud2(demoFreq, figPath = figPath, size = 1.5,color = &quot;skyblue&quot;)</div></pre></td></tr></table></figure>
<p><img src="http://7xr5em.com1.z0.glb.clouddn.com/tcloud.png" alt=""></p>
<h3 id="2-3-2-使用letterCloud绘制词云"><a href="#2-3-2-使用letterCloud绘制词云" class="headerlink" title="2.3.2 使用letterCloud绘制词云"></a>2.3.2 使用<code>letterCloud</code>绘制词云</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">letterCloud(termFreq, word = &quot;WISE&quot;, size = 2)</div></pre></td></tr></table></figure>
<p><a href="http://imgbox.com/b95S01bf" target="_blank"><img src="http://i.imgbox.com/b95S01bf.png" alt="image host"></a></p>
<ol>
<li><p>Wordcloud2: <a href="http://lchiffon.github.io/2016/06/01/wordcloud2.html" target="_blank" rel="external">http://lchiffon.github.io/2016/06/01/wordcloud2.html</a></p>
</li>
<li><p>Introdcution to Wordccloud2: <a href="http://lchiffon.github.io/2016/06/10/wordcloud.html" target="_blank" rel="external">http://lchiffon.github.io/2016/06/10/wordcloud.html</a></p>
</li>
<li><p>WISE Journal: <a href="http://121.192.176.75/index.php?ser_id=2" target="_blank" rel="external">http://121.192.176.75/index.php?ser_id=2</a></p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">## R version 3.3.0 (2016-05-03)</div><div class="line">## Platform: x86_64-apple-darwin13.4.0 (64-bit)</div><div class="line">## Running under: OS X 10.11.1 (El Capitan)</div><div class="line">## </div><div class="line">## locale:</div><div class="line">## [1] zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/zh_CN.UTF-8/zh_CN.UTF-8</div><div class="line">## </div><div class="line">## attached base packages:</div><div class="line">## [1] stats     graphics  grDevices utils     datasets  methods   base     </div><div class="line">## </div><div class="line">## loaded via a namespace (and not attached):</div><div class="line">##  [1] magrittr_1.5    formatR_1.2.1   tools_3.3.0     htmltools_0.3.5</div><div class="line">##  [5] yaml_2.1.13     Rcpp_0.12.5     stringi_1.0-1   rmarkdown_0.8  </div><div class="line">##  [9] knitr_1.12.3    stringr_1.0.0   digest_0.6.9    evaluate_0.8</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[债券发行与承销笔记]]></title>
      <url>http://changshun.github.io/2016/04/19/%E5%80%BA%E5%88%B8%E5%8F%91%E8%A1%8C%E4%B8%8E%E6%89%BF%E9%94%80%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h2 id="一、承销商"><a href="#一、承销商" class="headerlink" title="一、承销商"></a>一、承销商</h2><ul>
<li>包销代销债券， 寻找投资者，募集资金， 一级市场发行人与投资者之间的媒介</li>
<li>承销团有三家或以上的可以设主承或副主承，除了主承，联席主承和副主承外其他为分销</li>
<li>债券承销商具有顾问、购买、分销及保护等功能：<ul>
<li>顾问功能是指， 因为对债券市场比较熟悉， 为发行人提供市场准入的相关法规咨询， 建议发行债券的种类等， 提供<strong>财务</strong>和<strong>管理咨询</strong></li>
<li>购买功能是指, 承销商避免债券不能完全销售。</li>
<li>分销功能是指， 分销给投资者</li>
<li>保护是指，稳定价格的操作，保证市场稳定</li>
</ul>
</li>
</ul>
<h2 id="债券交易市场"><a href="#债券交易市场" class="headerlink" title="债券交易市场"></a>债券交易市场</h2><ul>
<li>交易所市场：始于1993年， 场内市场， 集中竞价，标准化程度高， 适合各类投资者</li>
<li>银行间交易所：始于1997年6月6日，场外交易， 协议交易 机构有商业银行， 信托， 基金， 券商， 企业集团财务公司， 城商行， 农商行， 保险公司。品种不限。</li>
<li>商业银行柜台交易：始于2002年2月，面对个人投资者， 债券品种只有国债</li>
</ul>
<h2 id="债券交易类型"><a href="#债券交易类型" class="headerlink" title="债券交易类型"></a>债券交易类型</h2><h3 id="现货交易"><a href="#现货交易" class="headerlink" title="现货交易"></a>现货交易</h3><p>纯粹的债券买卖</p>
<h3 id="债券回购交易"><a href="#债券回购交易" class="headerlink" title="债券回购交易"></a>债券回购交易</h3><p>回购交易是一种以债券作为抵押进行的资金借贷行为，从本质上来说是一种融资行为。融资方将手中的债券作为抵押获得融券方的资金使用权， 融券方在回购到期后收回本金和高于银行利率的利息收入。</p>
<ol>
<li><p><strong>买断式回购交易</strong>： 债券买卖持有人将债券卖给购买方的同时， 双方约定在未来某一日期，卖方再以约定的价格从买方购回同种同量的债券交易。</p>
</li>
<li><p><strong>质押式回购交易</strong>： 债券作为抵押标的物进行融资的资金借贷行为， 在回购期满返还资金和解除质押。质押式回购交易属于以债券权利作为质押标的的担保行为。</p>
</li>
</ol>
<p>远期交易和债券借贷（略）</p>
<h2 id="公司债发行前决策"><a href="#公司债发行前决策" class="headerlink" title="公司债发行前决策"></a>公司债发行前决策</h2><h3 id="考虑因素"><a href="#考虑因素" class="headerlink" title="考虑因素"></a>考虑因素</h3><h4 id="（一）公司的基本情况"><a href="#（一）公司的基本情况" class="headerlink" title="（一）公司的基本情况"></a>（一）公司的基本情况</h4><ol>
<li>公司的历史沿革</li>
<li>公司的重大资产状况</li>
<li>累计债券余额</li>
<li>政策原因</li>
<li>公司的债券违约事实</li>
<li>债券担保情况</li>
</ol>
<h4 id="（二）公司发行要素方面"><a href="#（二）公司发行要素方面" class="headerlink" title="（二）公司发行要素方面"></a>（二）公司发行要素方面</h4><ol>
<li>债券发行额根据</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[流动性分析框架]]></title>
      <url>http://changshun.github.io/2016/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%B5%81%E5%8A%A8%E6%80%A7%E5%88%86%E6%9E%90%E6%A1%86%E6%9E%B6/</url>
      <content type="html"><![CDATA[<h1 id="流动性分析框架"><a href="#流动性分析框架" class="headerlink" title="流动性分析框架"></a>流动性分析框架</h1><h2 id="1-高频率流动性指标检测"><a href="#1-高频率流动性指标检测" class="headerlink" title="1. 高频率流动性指标检测"></a>1. 高频率流动性指标检测</h2><ul>
<li><strong>1天及7天回购利率利差：</strong>  利差大小/货币市场的期限利差反映预期及供需</li>
<li><strong>回购开盘利率变动、3M Shibor报价</strong></li>
<li><strong>回购与拆借占比</strong> </li>
<li><strong>不同期限成交量占比：</strong> 隔夜/7天占比的变动， 不同时点对不同期限资金需求不一样（跨季、跨节）</li>
<li><strong>待回购余额：</strong> 衡量整体杠杆资金与杠杆的大小 </li>
<li><strong>银行间货币市场净融资额：</strong> 不同机构融出/融入的情况，与超储有关，周度的拆出还受缴准、缴税等影响</li>
</ul>
<p>总体而言，量价关系反映资金的供需以及市场对资金面的预期。一般预期宽松且资金利率较低时，市场倾向 于借短资金，如15年7-8月，隔夜占比明显上升；当预期偏紧时，一般倾向于锁定风险以及资金成本，借长 期限的资金，如13年6月的钱荒。观察日内价格走势以及成交概况，尤其是交易所，资金松的时候尾盘掉的 厉害，紧的时候尾盘飙升。</p>
<h2 id="2-事件的影响"><a href="#2-事件的影响" class="headerlink" title="2. 事件的影响"></a>2. 事件的影响</h2><ul>
<li><strong>流动性危机/冲击事件</strong> ：股灾/金融危机等传导过程中的流动性危机、非标投资、IPO、汇率、交易所动向</li>
<li><strong>机构行为：</strong>加杠杆/季末的资金面变动特征</li>
</ul>
<h2 id="3-狭义的流动性"><a href="#3-狭义的流动性" class="headerlink" title="3. 狭义的流动性"></a>3. 狭义的流动性</h2><p><strong>狭义流动性</strong>主要指<em>银行间市场短期资金拆放的流动性</em>，典型的影响指标是银行超储率。超储率的高低影响着 银行对资金供给的多寡，从供给层面影响货币市场利率，其他金融机构则从资金融入的层面影响需求。</p>
<ul>
<li><strong>分析框架：</strong>五因素模型（<strong>外汇占款、财政存款、现金、央行公开市场操作、法定存款准备金率</strong>）</li>
</ul>
<h2 id="4-广义流动性观察"><a href="#4-广义流动性观察" class="headerlink" title="4. 广义流动性观察"></a>4. 广义流动性观察</h2><p>狭义流动性影响货币市场利率和短期利率，而广义流动性对中长期利率和其他层次的利率有着更明显的影 响，衡量广义流动性主要是货币增速和社会融资总量。但狭义流动性对广义流动性也有着较明显的影响。 狭义流动性的松紧制约广义流动性的松紧。</p>
<ul>
<li><strong>影响因素：超储率、基础货币、货币乘数、融资需求、监管政策、货币政策</strong></li>
</ul>
<p><img src="http://i.imgbox.com/FOLUCqG2.png" alt="frame"></p>
<h1 id="流动性观察"><a href="#流动性观察" class="headerlink" title="流动性观察"></a>流动性观察</h1><h2 id="回购市场较拆借市场更为活跃更反映资金面"><a href="#回购市场较拆借市场更为活跃更反映资金面" class="headerlink" title="回购市场较拆借市场更为活跃更反映资金面"></a>回购市场较拆借市场更为活跃更反映资金面</h2><p>2001年以来， 债券回购市场成交金额一直占比在75%以上。其中， 质押式和买断式的比例大概为9：1。</p>
<p>回购市场较大的原因是， 拆借市场需要占用授信额度， 且拆借利率也相对高于回购利率</p>
<p>回购品种中1天和7天的成交量最大，分别占70%-80%和10%-20%，而1个 月以上的成交并不活跃。 由于银行是最大的资金融 出方，融出资金比例占 70%-80%甚至更高，所 以回购利率能够充分反映 银行机构的流动性状况。</p>
<h2 id="量价关系、期限占比"><a href="#量价关系、期限占比" class="headerlink" title="量价关系、期限占比"></a>量价关系、期限占比</h2><ul>
<li>1天及 7天回购利率利 差与 不同期限成交量占比从价、 量两个维度反映 资金的供 需以及对资金面的预期。</li>
</ul>
<p><img src="http://i.imgbox.com/0abxAg2R.png" alt="量价关系"></p>
<ul>
<li>一般预期宽松且资金利率较低时，市场倾向于借短资金/隔夜 ， 如15年 4-6 月 ， 资金宽松，资金在隔夜市场淤积，隔夜利率明显下行带动7天和1天利差扩大。 而当预期偏紧时，一般倾 向于锁定风险以及资金成本， 借长期限的资金， 如13年6月的钱荒。</li>
</ul>
<h2 id="待回购余额规模及期限结构"><a href="#待回购余额规模及期限结构" class="headerlink" title="待回购余额规模及期限结构"></a>待回购余额规模及期限结构</h2><p>未到期回购余额也是观察 资金需求边际变化的一个 很好的指标。</p>
<p><img src="http://i.imgbox.com/gnWCO6ty.png" alt="银行间及交易所回购余额"></p>
<ol>
<li><p>打新带来的波动：未到期回购余额的正弦波峰与前期新股资金冻结的高峰完全重合<br><img src="http://i.imgbox.com/jclp3Bxj.png" alt=""></p>
</li>
<li><p>节假日前后 （ 比如春 节和国庆假期），借入长期 限资金需求上升，推动未到 期回购余额上升。</p>
</li>
<li>杠杆融资需求上升,2015 年 7 月份以来交易所回 购余额显著增加，表明交易 所债券杠杆上升，投资者通 过放杠杆提高收益。</li>
</ol>
<h1 id="狭义流动性分析框架"><a href="#狭义流动性分析框架" class="headerlink" title="狭义流动性分析框架"></a>狭义流动性分析框架</h1><h2 id="超储率和无因素模型"><a href="#超储率和无因素模型" class="headerlink" title="超储率和无因素模型"></a>超储率和无因素模型</h2><p>影响资金面的因素有很多，但从银行间市场资金供给的角度，最本质的因素是银行超储率的高低。 尤其是在目前的市场结构中，银行是债市最大的投资者也是最主要的资金供给方。</p>
<p>$$\Delta 超额准备金 = \Delta （外汇占款 + 公开市场净投放 - \Delta(财政存款－流通中的现金－法定准备金) $$</p>
<p>影响超储率主要有五个因素：<strong>财政存款变动、外汇占款、流通中现金M0、公开市场操作和法定存 准备金。</strong></p>
<p><img src="http://i.imgbox.com/09jyrPR0.png" alt="ea"></p>
<h3 id="1-外汇占款（-）"><a href="#1-外汇占款（-）" class="headerlink" title="1. 外汇占款（+）"></a>1. 外汇占款（+）</h3><blockquote>
<p>外汇占款<br><img src="http://i.imgbox.com/GXDWTAi7.png" alt=""></p>
</blockquote>
<p>外汇占款提供 基础 货币与流动性 ， 与 贸易顺差状况 、 人民币升值 预期以及 热钱等 因素相关，波动性较大。</p>
<p>外汇占款的增加会增加资金供给， 增加超额准备金。过去十年货币高增长的贡献来自于外汇占</p>
<p>广义货币M2的增长受两个因素的推动：<strong>基础货币</strong>和 <strong>货币乘数</strong> 。 过去十年 M2 能够保持较快的 增长速度 ( 平均 在 17%-18%) ， 其中主要的推动力来自于基础货币的增长。而基础货币增长较快的背后是外 汇占款的持续快速增长。央行为保证整体的 广义货币供应量在一个相 对适度的水平，连续上调 法定存款准备金率，从而 在基础货币扩张的同时降 低货币乘数， 避免货币供 应量的激增。12年以来，我国外汇占款 流入有所放缓，尤其是14年以来，也打开了降准周期。</p>
<ul>
<li>外汇占款的绝对增量 / 增速 ，高峰都已过去<br><img src="http://i.imgbox.com/iUjrTXQ8.png" alt=""></li>
<li>。汇改之后外 汇市场变动对流动性影响更 频繁更复杂，需关注汇率走 势、成交及货币当局的操作。</li>
</ul>
<h3 id="2-公开市场净投放（-）"><a href="#2-公开市场净投放（-）" class="headerlink" title="2. 公开市场净投放（+）"></a>2. 公开市场净投放（+）</h3><p>公开市场操作和法定存款准备金规模是央行的核心工具， 不同阶段对两种工具的倚重不同。 </p>
<p><strong>公开市场操作的传统工具：</strong></p>
<ul>
<li><p>【央票】从2002年开始，为对冲外汇占款的增加，央票发行规模持续增长，回收流动 性。2008年达到高峰42960亿元，而后随着外汇占款单边趋势的改变，央票发行规模 逐渐减少，2012年暂停发行，2013年重启发行5000多亿，之后一直停发</p>
</li>
<li><p>【国库金定存】是将存放在央行的财政存款通过招标方式转存至商业银行，期限一 般在3至9个月，具有投放短期基础货币的作用。2006年底，国库现金定存第一次发行 ，2009、2012和2014年发行规模出现较大增长。未来盘活地方财政存款。</p>
</li>
<li><p>【正逆回购】】逆回购释放流动性，正回购回收流动性。<br><img src="http://i.imgbox.com/sAQHJOWR.png" alt=""></p>
</li>
</ul>
<p><strong>从对流动性影响（锁定/投 放）的期限来看：</strong></p>
<p><strong>上调准备金率调整＜发行 央票＜正回购 ＜ ＜ 逆回 购＜ SLO ＜ SLF ＜国库 现金招标＜ MLF ＜下调 准备金率（定向降准）。</strong></p>
<h3 id="3-财政存款（-）"><a href="#3-财政存款（-）" class="headerlink" title="3. 财政存款（-）"></a>3. 财政存款（-）</h3><p>财政存款反映在央行资产 负债表的负债方，是中央 和地方政府存放在央行的 存款。财政存款减少对应 基础货币的投放，财政存 款增加对应基础货币的收 缩。<br>财政存款的变动具有很强 的季节性：一般季度初财 政存款都会增加，季度末 财政存款都会减少，年末 集中投放。 </p>
<ul>
<li>季度初预缴企业所得税：1、4、7、10月，上缴导致财政存款上升，收紧流动性；</li>
<li>季度末投放：3、6、9、12 月财政投放，投放提供流动性。</li>
</ul>
<p><img src="http://i.imgbox.com/32HdPsdl.png" alt="财政存款"></p>
<h3 id="4-流动中现金（-）"><a href="#4-流动中现金（-）" class="headerlink" title="4. 流动中现金（-）"></a>4. 流动中现金（-）</h3><p>一般主要考察M0。<br>流通中现金M0的增加本质上需要消耗银行的超储率（用超储换现金）。<br>一般大的节假日居民取现需求较大（尤其是春节），M0增加收紧流动性，春节后回流 。</p>
<h3 id="5-法定准备金率"><a href="#5-法定准备金率" class="headerlink" title="5. 法定准备金率"></a>5. 法定准备金率</h3><p>法定准备金率传统上被认为是强力的货币政策， 通过改变货币乘数来影响金 融体系的资金供需关系。 既是数量调控工具，又是价格调控工具。</p>
<ul>
<li>每个月的 5 、 15 、 25 日上 缴/退缴分别截至上个月末、 10、20日的存款准备金变 动的部分，带来资金面当 期的小幅波动。</li>
</ul>
<h3 id="6-结构性因素影响"><a href="#6-结构性因素影响" class="headerlink" title="6. 结构性因素影响"></a>6. 结构性因素影响</h3><p>事件的影响和冲击：<br>11年的城投债， 13年的“钱荒”， 15年上半年的大新需求火爆。</p>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Terminal]]></title>
      <url>http://changshun.github.io/2016/03/29/%E6%8A%80%E6%9C%AF/2016-03-29-terminal/</url>
      <content type="html"><![CDATA[<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><ul>
<li><code>ls</code>: 显示当前路径下的文件和文件夹</li>
<li><code>cd</code>： 改变路径</li>
<li><code>mkdir</code>: 创建新的文件夹</li>
<li><code>cp</code>: 复制文件或文件夹</li>
<li><code>mv</code>: 移动或者重命名文件或文件夹</li>
<li><code>rm</code>: 移除文件或文件夹</li>
</ul>
<p>更多命令见<a href="http://guides.macrumors.com/Category:Terminal_Commands" target="_blank" rel="external">Terminal Commands </a></p>
<h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><p>登陆后的界面如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Last login: Tue Mar 29 16:36:10 on ttys001</div><div class="line">shihchosen@Shihs-MacBook-Air Â ~   master ●✚ </div></pre></td></tr></table></figure></p>
<h3 id="当前路径"><a href="#当前路径" class="headerlink" title="当前路径"></a>当前路径</h3><p>运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pwd</div></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/Users/shihchosen</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd Documents/</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">shihchosen@Shihs-MacBook-Air  ~/Documents   master ●✚  ls </div><div class="line">$RECYCLE.BIN</div><div class="line">2.University_Contest_Data_Description.pages</div><div class="line">2000px-ASCII-Table-wide.svg.png</div><div class="line">Chow</div><div class="line">Default.rdp</div><div class="line">E-book</div><div class="line">Github</div><div class="line">LaTeX</div><div class="line">MATLAB</div><div class="line">Parallels</div><div class="line">R</div><div class="line">RClub</div></pre></td></tr></table></figure>
<h2 id="工作控制"><a href="#工作控制" class="headerlink" title="工作控制"></a>工作控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps -ax</div></pre></td></tr></table></figure>
<p>上面的命令（process status）会返回所有的活动的窗口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">PID TTY           TIME CMD</div><div class="line">    1 ??        13:18.53 /sbin/launchd</div><div class="line">   45 ??         5:37.01 /usr/sbin/syslogd</div><div class="line">   46 ??         2:05.03 /usr/libexec/UserEventAgent (System)</div><div class="line">   48 ??         0:34.10 /usr/libexec/kextd</div><div class="line">   49 ??         4:42.65 /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/Support/fs</div><div class="line">   53 ??         0:18.39 /System/Library/CoreServices/appleeventsd --server</div><div class="line">   54 ??         3:31.69 /usr/libexec/configd</div><div class="line">   56 ??         0:34.87 /System/Library/CoreServices/powerd.bundle/powerd</div><div class="line">   62 ??         3:18.67 /usr/libexec/airportd</div><div class="line">   63 ??         0:12.91 /usr/libexec/warmd</div><div class="line">   65 ??        12:08.62 /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Support/mds</div></pre></td></tr></table></figure></p>
<h2 id="用户名和用户位置"><a href="#用户名和用户位置" class="headerlink" title="用户名和用户位置"></a>用户名和用户位置</h2><p><code>whoami</code>返回当前用户名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[shihchosen@Shihs-MacBook-Air  ~/Documents   master ●✚  whoami       </div><div class="line">shihchosen</div></pre></td></tr></table></figure>
<p><code>hostname</code>返回当前主机名（位置）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[shihchosen@Shihs-MacBook-Air  ~/Documents   master ●✚  hostname</div><div class="line">Shihs-MacBook-Air.local</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[使用ggthemes，让你画出杂志配图般的图]]></title>
      <url>http://changshun.github.io/2015/11/18/%E6%8A%80%E6%9C%AF/2015-11-18-ggthemes/</url>
      <content type="html"><![CDATA[<h1 id="使用ggthemes，让你画出杂志配图般的图"><a href="#使用ggthemes，让你画出杂志配图般的图" class="headerlink" title="使用ggthemes，让你画出杂志配图般的图"></a>使用ggthemes，让你画出杂志配图般的图</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><code>ggplot2</code>是<code>R</code>界大神<a href="http://had.co.nz/" target="_blank" rel="external">Hadley Wickham</a>写的众多改变<code>R</code>的package中的一个，也是使用最普遍的package之一，ggplot2通过图层的方法极大的拓展了R的绘图功能，能够自由选择描绘数据的图形，配色，坐标轴，标识等等。同时ggplot2也给除了模板的功能，本身自带几个简单的<code>theme_grey</code>(Default),<code>theme_bw</code>,<code>theme_light</code>等主题，使用者也可以自定义自己的主题，包括配色，legend位置，实用的字体等等。 </p>
<p>但是对大部分初级使用者来说自定义主题是比较困难的，并且很多人也不知道自己想要什么样的主题，<a href="http://jrnold.me" target="_blank" rel="external">Jeffrey Arnold</a>写的这个<a href="https://github.com/jrnold/ggthemes" target="_blank" rel="external">ggthemes</a>这个包或许可以帮助你。<a href="https://github.com/jrnold/ggthemes" target="_blank" rel="external">ggthemes</a>提供了很多现成的（同时也是精美的）主题，能够免了纠结配色调整等细节的担忧，下面的内容多翻译自ggthemes的README：</p>
<p>ggthemes 包括了ggplot2几个扩展的geoms, scales, and themes</p>
<h3 id="Geoms"><a href="#Geoms" class="headerlink" title="Geoms"></a>Geoms</h3><ul>
<li><code>geom_rangeframe</code> : Tufte 风格的距离框</li>
<li><code>geom_tufteboxplot</code>: Tufte风格的箱型图（）</li>
</ul>
<h3 id="Themes-（主题）"><a href="#Themes-（主题）" class="headerlink" title="Themes （主题）"></a>Themes （主题）</h3><ul>
<li><code>theme_calc</code>: 一套LibreOffice Calc（对应office Excel）风格的主题</li>
<li><code>theme_economist</code>: 《经济学人》（<a href="http://www.economist.com/" target="_blank" rel="external">The Economist</a>）杂志配图风格主题</li>
<li><code>theme_excel</code>: a theme replicating the classic ugly gray charts in Excel 复制Excel（pre-2003）灰色丑陋风格的主题🙄</li>
<li><code>theme_few</code>: Stephen Few<a href="http://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf" target="_blank" rel="external">“Practical Rules for Using Color in Charts”</a>.这本书的一个主题</li>
<li><code>theme_fivethirtyeight</code>: <a href="http://fivethirtyeight.com" target="_blank" rel="external">fivethirtyeight.com</a>网站配图风格主题</li>
<li><code>theme_gdocs</code>: Google Docs风格主题.</li>
<li><code>theme_hc</code>:<a href="http://www.highcharts.com" target="_blank" rel="external">Highcharts JS</a>风格主题.</li>
<li><code>theme_pander</code>: <a href="http://rapporter.github.io/pander/" target="_blank" rel="external">pander</a>包风格主题</li>
<li><code>theme_solarized</code>: 使用 <a href="http://ethanschoonover.com/solarized" target="_blank" rel="external">solarized</a> 调色板的主题</li>
<li><code>theme_stata</code>: <a href="http://stata.com/" target="_blank" rel="external">Stata</a>绘图主题</li>
<li><code>theme_tufte</code>: Tufte’s <em>The Visual Display of Quantitative Information</em>.这本书的最简洁的主题</li>
<li><ul>
<li><code>theme_wsj</code>: 《华尔街日报》（<a href="http://www.wsj.com/" target="_blank" rel="external">The Wall Street Journal</a>）的配图风格主题</li>
</ul>
</li>
</ul>
<h3 id="Scales"><a href="#Scales" class="headerlink" title="Scales"></a>Scales</h3><ul>
<li><code>scale_colour_calc</code>, <code>scale_shape_calc</code>: LibreOffice Calc的颜色和形状的调色板.</li>
<li><code>scale_colour_colorblind</code>: 色盲无障碍的调色板（from <a href="http://jfly.iam.u-tokyo.ac.jp/color/" target="_blank" rel="external">http://jfly.iam.u-tokyo.ac.jp/color/</a>）.</li>
<li><code>scale_colour_economist</code>:  <em>The Economist</em> 配图颜色调色板.</li>
<li><code>scale_colour_excel</code>: 新旧Office Excel调色板</li>
<li><code>scale_colour_few</code>: Stephen Few<a href="http://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf" target="_blank" rel="external">“Practical Rules for Using Color in Charts”</a>这本书绘图配色调色板。</li>
<li><code>scale_colour_gdocs</code>: Google Docs调色板.</li>
<li><code>scale_colour_hc</code>: <a href="http://www.highcharts.com" target="_blank" rel="external">Highcharts JS</a>主题调色板.</li>
<li><code>scale_colour_solarized</code>: <a href="http://ethanschoonover.com/solarized" target="_blank" rel="external">Solarized</a> 颜色</li>
<li><code>scale_colour_stata</code>, <code>scale_shapes_stata</code>, <code>scale_linetype_stata</code>: Stata绘图的颜色形状和线条类型的调色板。</li>
<li><code>scale_colour_tableau</code>, <code>scale_shape_tableau</code>: <a href="http://www.tableausoftware.com/" target="_blank" rel="external">Tableau</a>软件的形状颜色.</li>
<li><code>scale_colour_pander</code>, <code>scale_fill_pander</code>: <a href="http://rapporter.github.io/pander/" target="_blank" rel="external">pander</a>包的颜色和填充调色板.</li>
<li><code>scale_shape_cleveland</code>, <code>scale_shape_tremmel</code>, <code>scale_shape_circlefill</code>:  Cleveland, Tremmel (1995), and Lewandowsky and Spence (1989)三篇文章可视化展现的经典形状.</li>
<li><code>scale_x_tufte</code>, <code>scale_y_tufte</code>: 带包含最小值和最大值漂亮标签的x和y的scale.</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><code>bank_slopes</code>: Find the optimal aspect ratio to bank slopes to 45 degrees</li>
</ul>
<!--  LocalWords:  geoms ggplot rangeframe Tufte's tufteboxplot calc
 -->
<!--  LocalWords:  LibreOffice Calc Few's fivethirtyeight gdocs hc JS
 -->
<!--  LocalWords:  Highcharts solarized stata Stata tufte wsj colour
 -->
<!--  LocalWords:  linetype cleveland tremmel circlefill Lewandowsky
 -->
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>CRAN安装,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">install.packages(&apos;ggthemes&apos;)</div></pre></td></tr></table></figure>
<p>通过<strong>devtools</strong> 从<code>github</code>安装最新的包,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">library(&quot;devtools&quot;)</div><div class="line">install_github(c(&quot;hadley/ggplot2&quot;, &quot;jrnold/ggthemes&quot;))</div></pre></td></tr></table></figure>
<p>注意: 目前开发版（从github上安装的） <strong>ggthemes</strong> 只能和开发版的<strong>ggplot2</strong>一起工作, 和CRAN上的 <strong>ggplot2</strong> 不兼容</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">library(&quot;ggplot2&quot;)</div><div class="line">library(&quot;ggthemes&quot;)</div><div class="line">dsamp &lt;- diamonds[sample(nrow(diamonds), 1000), ]</div></pre></td></tr></table></figure>
<h3 id="Tufte-theme-和-geoms"><a href="#Tufte-theme-和-geoms" class="headerlink" title="Tufte theme 和 geoms"></a>Tufte theme 和 geoms</h3><p>根据<em>The Visual Display of<br>Quantitative Information</em>这本书最简绘图原则绘制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(ggplot(mtcars, aes(wt, mpg))</div><div class="line">  + geom_point()</div><div class="line">  + geom_rangeframe()</div><div class="line">  + theme_tufte())</div></pre></td></tr></table></figure>
<p><img src="/img/ggtheme/tufte1.png" alt="tufte1">)</p>
<p>The Tufte minimal boxplot</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(ggplot(mtcars, aes(factor(cyl), mpg)) </div><div class="line"> + theme_tufte(ticks=FALSE)</div><div class="line"> + geom_tufteboxplot())</div></pre></td></tr></table></figure>
<p><img src="/img/ggtheme/tufte2.png" alt=""></p>
<h3 id="Economist-主题"><a href="#Economist-主题" class="headerlink" title="Economist 主题"></a>Economist 主题</h3><p>近似《经济学人》的主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_economist()</div><div class="line"> + scale_colour_economist()</div><div class="line"> + ggtitle(&quot;Diamonds Are Forever&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/zEDXHQN.png" alt="plot of chunk economist"> </p>
<h3 id="Solarized-主题"><a href="#Solarized-主题" class="headerlink" title="Solarized 主题"></a>Solarized 主题</h3><p>A theme and color and fill scales based on the Solarized palette.</p>
<p>浅色主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line">                             + theme_solarized()</div><div class="line">                             + scale_colour_solarized(&quot;blue&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/fckD4gK.png" alt="plot of chunk solarized-light"> </p>
<p>深色主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line">                             + theme_solarized(light=FALSE)</div><div class="line">                             + scale_colour_solarized(&quot;red&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/C1JZwRB.png" alt="plot of chunk solarized-dark"> </p>
<p>备选主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line">                             + theme_solarized_2()</div><div class="line">                             + scale_colour_solarized(&quot;blue&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/bY1dJPA.png" alt="plot of chunk solarized-alt"> </p>
<h3 id="Stata主题"><a href="#Stata主题" class="headerlink" title="Stata主题"></a>Stata主题</h3><p>stata绘图的(color, fill, linetype, shapes) </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line">                             + theme_stata() </div><div class="line">                             + scale_colour_stata()</div><div class="line">                             + ggtitle(&quot;Plot Title&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/65WUWQF.png" alt="plot of chunk stata"> </p>
<h3 id="Excel-2003-主题"><a href="#Excel-2003-主题" class="headerlink" title="Excel 2003 主题"></a>Excel 2003 主题</h3><p>对于这个经典的丑陋的主题，仅仅用于讽刺就好了，千万不要使用它，另外不包括3-D柱形图和饼状图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_excel() </div><div class="line"> + scale_colour_excel())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/taTqVNk.png" alt="plot of chunk excel1"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(ggplot(diamonds, aes(clarity, fill=cut)) </div><div class="line"> + geom_bar()</div><div class="line"> + scale_fill_excel()</div><div class="line"> + theme_excel())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/7rIrPj5.png" alt="plot of chunk excel2"> </p>
<h3 id="Inverse-Gray-Theme"><a href="#Inverse-Gray-Theme" class="headerlink" title="Inverse Gray Theme"></a>Inverse Gray Theme</h3><p>和<code>ggplot2</code>默认主题<code>theme_gray</code>相反的主题，即背景是灰色的，画图区域是白色的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_igray())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/bYcicXF.png" alt="plot of chunk igray"> </p>
<h3 id="Fivethirtyeight-主题"><a href="#Fivethirtyeight-主题" class="headerlink" title="Fivethirtyeight 主题"></a>Fivethirtyeight 主题</h3><p>基于<a href="http://fivethirtyeight.com" target="_blank" rel="external">fivethirtyeight.com</a>.<br>的主题和调色板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(hp, mpg, data= subset(mtcars, cyl != 5), geom=&quot;point&quot;, color = factor(cyl))</div><div class="line"> + geom_smooth(method = &quot;lm&quot;, se = FALSE)</div><div class="line"> + scale_color_fivethirtyeight()</div><div class="line"> + theme_fivethirtyeight())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/0N2NI9G.png" alt="plot of chunk fivethirtyeight"> </p>
<h3 id="Tableau-Scales"><a href="#Tableau-Scales" class="headerlink" title="Tableau Scales"></a>Tableau Scales</h3><p>Color, fill, and shape scales based on those used in the Tableau software.<br>Tableau软件使用的的颜色（Tableau是一款快速可视化分析工具）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_igray()</div><div class="line"> + scale_colour_tableau())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/5BpqUzC.png" alt="plot of chunk tableau"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_igray()</div><div class="line"> + scale_colour_tableau(&quot;colorblind10&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/s09WxBg.png" alt="plot of chunk tableau-colorbind10"> </p>
<h3 id="Stephen-Few’s-用色规则"><a href="#Stephen-Few’s-用色规则" class="headerlink" title="Stephen Few’s 用色规则"></a>Stephen Few’s 用色规则</h3><p>、Stephen Few’s <a href="http://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf" target="_blank" rel="external">“Practical Rules for Using Color in Charts”</a>这部作品主张的用色规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_few()</div><div class="line"> + scale_colour_few())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/opdUgfB.png" alt="plot of chunk few"> </p>
<h3 id="Wall-Street-Journal"><a href="#Wall-Street-Journal" class="headerlink" title="Wall Street Journal"></a>Wall Street Journal</h3><p><em>The Wall Street Journal</em>配图的颜色和主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=cut)</div><div class="line"> + theme_wsj()</div><div class="line"> + scale_colour_wsj(&quot;colors6&quot;, &quot;&quot;)</div><div class="line"> + ggtitle(&quot;Diamond Prices&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/qBdZlYD.png" alt="plot of chunk wsj"> </p>
<h3 id="GDocs-Theme"><a href="#GDocs-Theme" class="headerlink" title="GDocs Theme"></a>GDocs Theme</h3><p>Google Docs 图表的颜色和主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=clarity)</div><div class="line"> + theme_gdocs()</div><div class="line"> + ggtitle(&quot;Diamonds&quot;)</div><div class="line"> + scale_color_gdocs())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/Y6YbP4A.png" alt="plot of chunk gdocs"> </p>
<h3 id="Calc-Theme"><a href="#Calc-Theme" class="headerlink" title="Calc Theme"></a>Calc Theme</h3><p> LibreOffice（一款开源的办公套件） Calc（参照Excel）的主题形状和颜色.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data=dsamp, colour=clarity)</div><div class="line"> + theme_calc()</div><div class="line"> + ggtitle(&quot;Diamonds&quot;)</div><div class="line"> + scale_color_calc())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/BXhBSnS.png" alt="plot of chunk calc"> </p>
<h3 id="Pander-Theme"><a href="#Pander-Theme" class="headerlink" title="Pander Theme"></a>Pander Theme</h3><p><a href="http://rapporter.github.io/pander/" target="_blank" rel="external">pander 包</a>的主题和颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data = dsamp, colour = clarity)</div><div class="line"> + theme_pander()</div><div class="line"> + scale_colour_pander())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/nyLa60g.png" alt="plot of chunk pander-scatterplot"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(ggplot(dsamp, aes(clarity, fill = cut)) + geom_bar()</div><div class="line">  + theme_pander()</div><div class="line">  + scale_fill_pander())</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/tSNM5LD.png" alt="plot of chunk pander-barplot"> </p>
<h3 id="Highcharts-theme"><a href="#Highcharts-theme" class="headerlink" title="Highcharts  theme"></a>Highcharts  theme</h3><p><a href="http://www.highcharts.com/demo" target="_blank" rel="external">Highcharts JS</a>（一套javascript图形实现）的颜色和主题.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data = dsamp, colour = cut)</div><div class="line"> + theme_hc()</div><div class="line"> + scale_colour_hc()</div><div class="line"> + ggtitle(&quot;Diamonds Are Forever&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/kkQGNws.png" alt="plot of chunk hc-default"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(qplot(carat, price, data = dsamp, colour = cut)</div><div class="line"> + theme_hc(bgcolor = &quot;darkunica&quot;)</div><div class="line"> + scale_colour_hc(&quot;darkunica&quot;)</div><div class="line"> + ggtitle(&quot;Diamonds Are Forever&quot;))</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/QCQmQ0R.png" alt="plot of chunk hc-darkunica"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dtemp &lt;- data.frame(months = factor(rep(substr(month.name,1,3), 4), levels = substr(month.name,1,3)),</div><div class="line">                    city = rep(c(&quot;Tokyo&quot;, &quot;New York&quot;, &quot;Berlin&quot;, &quot;London&quot;), each = 12),</div><div class="line">                    temp = c(7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6,</div><div class="line">                             -0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5,</div><div class="line">                             -0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0,</div><div class="line">                             3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">qplot(months, temp, data=dtemp, group=city, color=city, geom=&quot;line&quot;) +</div><div class="line">  geom_point(size=1.1) + </div><div class="line">  ggtitle(&quot;Monthly Average Temperature&quot;) +</div><div class="line">  theme_hc() +</div><div class="line">  scale_colour_hc()</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/Coi6jzS.png" alt="plot of chunk hc-default-line"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">qplot(months, temp, data=dtemp, group=city, color=city, geom=&quot;line&quot;) +</div><div class="line">  geom_point(size=1.1) + </div><div class="line">  ggtitle(&quot;Monthly Average Temperature&quot;) +</div><div class="line">  theme_hc(bgcolor = &quot;darkunica&quot;) +</div><div class="line">  scale_fill_hc(&quot;darkunica&quot;)</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/RG4y3tb.png" alt="plot of chunk hc-darkunica-line"> </p>
<h2 id="Maps-主题"><a href="#Maps-主题" class="headerlink" title="Maps 主题"></a>Maps 主题</h2><p>展示地图的一个主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">library(&quot;maps&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">## </div><div class="line">##  # ATTENTION: maps v3.0 has an updated &apos;world&apos; map.        #</div><div class="line">##  # Many country borders and names have changed since 1990. #</div><div class="line">##  # Type &apos;?world&apos; or &apos;news(package=&quot;maps&quot;)&apos;. See README_v3. #</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">us &lt;- fortify(map_data(&quot;state&quot;), region = &quot;region&quot;)</div><div class="line">(ggplot()</div><div class="line">  + geom_map(data  =  us, map = us,</div><div class="line">             aes(x = long, y = lat, map_id = region, group = group),</div><div class="line">             fill = &quot;white&quot;, color = &quot;black&quot;, size = 0.25)</div><div class="line">  + coord_map(&quot;albers&quot;, lat0 = 39, lat1 = 45)</div><div class="line">  + theme_map()</div><div class="line">  )</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/EKpKjPF.png" alt="plot of chunk map"> </p>
<h2 id="参考和推荐"><a href="#参考和推荐" class="headerlink" title="参考和推荐"></a>参考和推荐</h2><ol>
<li><a href="http://site.douban.com/182577/widget/notes/10568279/note/257294505/" target="_blank" rel="external">ggthemes包：丰富ggplot2的表现力</a></li>
<li><p><a href="https://github.com/jrnold/ggthemes" target="_blank" rel="external">ggthemes repo</a></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by/4.0/" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>本作品采用<a rel="external" href="http://creativecommons.org/licenses/by/4.0/" target="_blank">知识共享署名 4.0 国际许可协议</a>进行许可。</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mactex下使用xeCJK输入中文]]></title>
      <url>http://changshun.github.io/2015/11/18/%E6%8A%80%E6%9C%AF/2015-11-18-using-xeCJK/</url>
      <content type="html"><![CDATA[<h1 id="Mactex下使用xeCJK输入中文"><a href="#Mactex下使用xeCJK输入中文" class="headerlink" title="Mactex下使用xeCJK输入中文"></a>Mactex下使用xeCJK输入中文</h1><p>以前用<code>latex</code>输入中文的时候都是使用<code>\documents{ctexart}</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">\documentclass&#123;ctexart&#125;</div><div class="line">\begin&#123;document&#125;</div><div class="line"></div><div class="line">你好世界！ 我是\textbf&#123;石长顺&#125;，</div><div class="line">我喜欢\LaTeX, \textsf&#123;哈哈&#125;</div><div class="line"></div><div class="line">\end&#123;document&#125;</div></pre></td></tr></table></figure>
<p><img src="/img/xecjk/ctex.png" alt="1"></p>
<h2 id="使用xeCJK"><a href="#使用xeCJK" class="headerlink" title="使用xeCJK"></a>使用<code>xeCJK</code></h2><p>最近看到关于<code>xeCJK</code>的介绍，修改字体很方便，分享一下.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">\documentclass&#123;article&#125;</div><div class="line"> </div><div class="line">\usepackage&#123;xeCJK&#125;</div><div class="line"> </div><div class="line">\setCJKmainfont&#123;STSong&#125; % 设置你的主字体</div><div class="line">\setCJKsansfont&#123;STZhongsong&#125; % 设置衬线字体</div><div class="line">\setCJKmonofont&#123;MicrosoftYaHei&#125; % 设置等宽字体</div><div class="line"> </div><div class="line">\begin&#123;document&#125;</div><div class="line"> </div><div class="line">你好世界！ 我是\textbf&#123;石长顺&#125;</div><div class="line"></div><div class="line">我喜欢\LaTeX, \textsf&#123;哈哈&#125;</div><div class="line"></div><div class="line">\end&#123;document&#125;</div></pre></td></tr></table></figure>
<p>然后使用XELaTeX编译中文就可以可以完美显现了。<br><img src="/img/xecjk/example1.png" alt="1"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">\documentclass&#123;article&#125;</div><div class="line"> </div><div class="line">\usepackage&#123;xeCJK&#125;</div><div class="line"> </div><div class="line">\setCJKmainfont&#123;FZSXSLKJW--GB1-0&#125; % 设置你的主字体：方正苏新诗柳楷简体</div><div class="line">\setCJKsansfont&#123;DFWaWaSC-W5&#125; % 设置衬线字体:娃娃体-简</div><div class="line">\setCJKmonofont&#123;DFWaWaSC-W5&#125; % 设置等宽字体:娃娃体-简</div><div class="line"> </div><div class="line">\begin&#123;document&#125;</div><div class="line"> </div><div class="line">你好世界！ 我是\textbf&#123;石长顺&#125;</div><div class="line"></div><div class="line">我喜欢\LaTeX, \textsf&#123;哈哈&#125;</div><div class="line"></div><div class="line">\end&#123;document&#125;</div></pre></td></tr></table></figure>
<p><img src="/img/xecjk/example2.png" alt="1"></p>
<p>##　在mac下如何寻找<code>fontname</code><br>进入OS X的字体册， 选择想要的字体，进入字体详情，postscript名称就是字体名称。<br><img src="/img/xecjk/findfont.png" alt="1"></p>
<h2 id="参考与扩展阅读"><a href="#参考与扩展阅读" class="headerlink" title="参考与扩展阅读"></a>参考与扩展阅读</h2><ol>
<li><a href="https://www.sharelatex.com/learn/Chinese" target="_blank" rel="external">ShareLaTeX guides: Chinese</a></li>
<li><a href="http://liam0205.me/2014/11/02/latex-mactex-chinese-support" target="_blank" rel="external">为 MacTeX 配置中文支持</a></li>
</ol>
<p> <a rel="external" href="http://creativecommons.org/licenses/by/4.0/" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>本作品采用<a rel="external" href="http://creativecommons.org/licenses/by/4.0/" target="_blank">知识共享署名 4.0 国际许可协议</a>进行许可。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[读取大型数据文件的指定行和指定列]]></title>
      <url>http://changshun.github.io/2015/11/09/%E6%8A%80%E6%9C%AF/2015-11-09-Read-rows-col/</url>
      <content type="html"><![CDATA[<h1 id="读取大型数据文件的指定行和指定列"><a href="#读取大型数据文件的指定行和指定列" class="headerlink" title="读取大型数据文件的指定行和指定列"></a>读取大型数据文件的指定行和指定列</h1><blockquote>
<p>在实际数据分析过程中，我们经常会遇到体积比较大的数据文件，有些甚至大至几个G，每次读取大型数据文件的时候都需要耗费大量时间。另外因为R是使用内存进行计算的，所以有些大型数据文件，个人电脑是无法读取的。如果我们只是想熟悉数据的结构，并不需要将数据的完全读取，这时候读取部分行列就会很有用。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">if(!file.exists(&quot;read&quot;))&#123;</div><div class="line">  dir.create(&quot;read&quot;)</div><div class="line">&#125;# 创建工作路径文件夹</div><div class="line"></div><div class="line"></div><div class="line">setwd(&quot;./read&quot;) # 设置工作路径</div><div class="line"></div><div class="line">if(!file.exists(&quot;data&quot;))&#123;</div><div class="line">  dir.create(&quot;data&quot;)</div><div class="line">&#125; # 新建data文件夹</div></pre></td></tr></table></figure>
<h2 id="1-读取大型-txt文件的指定行和指定列"><a href="#1-读取大型-txt文件的指定行和指定列" class="headerlink" title="1. 读取大型*.txt文件的指定行和指定列"></a>1. 读取大型<code>*.txt</code>文件的指定行和指定列</h2><p>首先我们创建一个包含12个变量(列)，和100,000行的数据集，并保存成<code>df1.txt</code>,作为我们后面的示例数据</p>
<h3 id="1-1-数据"><a href="#1-1-数据" class="headerlink" title="1.1 数据"></a>1.1 数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">set.seed(1024)</div><div class="line"># 随机产生10^5个服从Uniform的随机数，重复12次</div><div class="line">df1 &lt;- data.frame(replicate(12, sample(runif(1e5), 1e5, replace = FALSE)))</div><div class="line">names(df1)&lt;-LETTERS[1:12] # 变量名</div><div class="line">print(object.size(df1), units=&quot;Mb&quot;) # Data Size</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## 9.2 Mb   # Data Size</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">write.table(df1, &quot;./data/df1.txt&quot;, sep = &quot;\t&quot;, row.names = FALSE) #保存成`.txt`文件</div></pre></td></tr></table></figure>
<p><img src="/img/df1.png" alt="DF1"> </p>
<h3 id="1-2-读取指定行"><a href="#1-2-读取指定行" class="headerlink" title="1.2 读取指定行"></a>1.2 读取指定行</h3><h4 id="1-2-1-方法1：-read-table-quot-file-txt-quot-skip-nrows"><a href="#1-2-1-方法1：-read-table-quot-file-txt-quot-skip-nrows" class="headerlink" title="1.2.1 方法1： read.table(&quot;file.txt&quot;,skip= ,nrows= )"></a>1.2.1 方法1： <code>read.table(&quot;file.txt&quot;,skip= ,nrows= )</code></h4><p>第一种方法使用read.table的函数,参见<a href="https://stat.ethz.ch/pipermail/r-help/2005-April/070203.html" target="_blank" rel="external">https://stat.ethz.ch/pipermail/r-help/2005-April/070203.html</a></p>
<ul>
<li><p><code>skip = m</code>是从第几行开始</p>
</li>
<li><p><code>nrows = n</code>是需要提取的数据的行数</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">read.table(&quot;./data/df1.txt&quot;, skip = 5, nrow = 10)# 从第五行读取10行</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">##           V1         V2        V3         V4         V5         V6</div><div class="line">## 1  0.7055347 0.12920632 0.4295947 0.00357990 0.49670788 0.01362666</div><div class="line">## 2  0.6613471 0.95351707 0.8739549 0.10166125 0.30094111 0.22257004</div><div class="line">## 3  0.5567262 0.89433791 0.2537335 0.17371310 0.20480512 0.43330278</div><div class="line">## 4  0.4425508 0.46954000 0.2236883 0.50466840 0.05181082 0.20466480</div><div class="line">## 5  0.5981411 0.83194728 0.3669091 0.79297566 0.27411663 0.02809154</div><div class="line">## 6  0.9747350 0.77751011 0.8816688 0.75316621 0.70018055 0.23151788</div><div class="line">## 7  0.6845900 0.03759691 0.8489364 0.74017064 0.78245960 0.49188055</div><div class="line">## 8  0.2858485 0.61155436 0.5811817 0.49490496 0.89603403 0.25230591</div><div class="line">## 9  0.1705107 0.75533076 0.6896211 0.04542131 0.20055274 0.07782909</div><div class="line">## 10 0.6238470 0.77953256 0.5553935 0.68813005 0.09442922 0.94930740</div><div class="line">##            V7        V8         V9        V10        V11       V12</div><div class="line">## 1  0.08933755 0.4630112 0.56212971 0.79979308 0.83367055 0.7287266</div><div class="line">## 2  0.02664011 0.5798631 0.05194099 0.81347679 0.64757159 0.4758128</div><div class="line">## 3  0.32301409 0.3054171 0.58960042 0.59590144 0.91273150 0.9210145</div><div class="line">## 4  0.01953665 0.1504671 0.30098137 0.62692098 0.59301203 0.6033279</div><div class="line">## 5  0.80829949 0.5033749 0.85286500 0.46670481 0.34482590 0.4594105</div><div class="line">## 6  0.26011167 0.7453824 0.34376219 0.33137941 0.03101849 0.3981119</div><div class="line">## 7  0.76514235 0.4330745 0.13669238 0.08658989 0.92115323 0.9402725</div><div class="line">## 8  0.75182503 0.7115402 0.04356411 0.20478518 0.13023461 0.6082353</div><div class="line">## 9  0.55976961 0.6797878 0.76038988 0.19407901 0.67365844 0.5217162</div><div class="line">## 10 0.46805855 0.5972887 0.22406577 0.85538688 0.06790307 0.4130284</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">read.table(&quot;./data/df1.txt&quot;, skip = 5, nrow = 10,</div><div class="line">           col.names = colnames(read.table(&quot;./data/df1.txt&quot;, nrow = 1,</div><div class="line">                                           header = TRUE))) #保留原列名</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">##            A          B         C          D          E          F</div><div class="line">## 1  0.7055347 0.12920632 0.4295947 0.00357990 0.49670788 0.01362666</div><div class="line">## 2  0.6613471 0.95351707 0.8739549 0.10166125 0.30094111 0.22257004</div><div class="line">## 3  0.5567262 0.89433791 0.2537335 0.17371310 0.20480512 0.43330278</div><div class="line">## 4  0.4425508 0.46954000 0.2236883 0.50466840 0.05181082 0.20466480</div><div class="line">## 5  0.5981411 0.83194728 0.3669091 0.79297566 0.27411663 0.02809154</div><div class="line">## 6  0.9747350 0.77751011 0.8816688 0.75316621 0.70018055 0.23151788</div><div class="line">## 7  0.6845900 0.03759691 0.8489364 0.74017064 0.78245960 0.49188055</div><div class="line">## 8  0.2858485 0.61155436 0.5811817 0.49490496 0.89603403 0.25230591</div><div class="line">## 9  0.1705107 0.75533076 0.6896211 0.04542131 0.20055274 0.07782909</div><div class="line">## 10 0.6238470 0.77953256 0.5553935 0.68813005 0.09442922 0.94930740</div><div class="line">##             G         H          I          J          K         L</div><div class="line">## 1  0.08933755 0.4630112 0.56212971 0.79979308 0.83367055 0.7287266</div><div class="line">## 2  0.02664011 0.5798631 0.05194099 0.81347679 0.64757159 0.4758128</div><div class="line">## 3  0.32301409 0.3054171 0.58960042 0.59590144 0.91273150 0.9210145</div><div class="line">## 4  0.01953665 0.1504671 0.30098137 0.62692098 0.59301203 0.6033279</div><div class="line">## 5  0.80829949 0.5033749 0.85286500 0.46670481 0.34482590 0.4594105</div><div class="line">## 6  0.26011167 0.7453824 0.34376219 0.33137941 0.03101849 0.3981119</div><div class="line">## 7  0.76514235 0.4330745 0.13669238 0.08658989 0.92115323 0.9402725</div><div class="line">## 8  0.75182503 0.7115402 0.04356411 0.20478518 0.13023461 0.6082353</div><div class="line">## 9  0.55976961 0.6797878 0.76038988 0.19407901 0.67365844 0.5217162</div><div class="line">## 10 0.46805855 0.5972887 0.22406577 0.85538688 0.06790307 0.4130284</div></pre></td></tr></table></figure>
<h4 id="1-2-2-方法2-：data-table-fread"><a href="#1-2-2-方法2-：data-table-fread" class="headerlink" title="1.2.2 方法2 ：data.table::fread"></a>1.2.2 方法2 ：<code>data.table::fread</code></h4><p>我们也可以使用<code>data.table</code>的<code>fread</code> 函数读取特定行,方法和<code>read.table</code>类似, 读取的数据默认是<code>data.table</code>的格式的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if (!require(&quot;data.table&quot;)) install.packages(&quot;data.table&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">library(data.table)</div><div class="line">fread(&quot;./data/df1.txt&quot;,  nrow = 10, col.names = LETTERS[1:12])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">##              A         B          C           D          E          F</div><div class="line">##  1: 0.67670367 0.3026637 0.08774587 0.003039472 0.24752087 0.98302481</div><div class="line">##  2: 0.03264569 0.5847326 0.42416403 0.847138941 0.24562266 0.04392178</div><div class="line">##  3: 0.09310092 0.9051813 0.81617685 0.866701763 0.39628155 0.59205108</div><div class="line">##  4: 0.95241243 0.6262199 0.49515652 0.600203589 0.82854606 0.20061278</div><div class="line">##  5: 0.70553467 0.1292063 0.42959473 0.003579900 0.49670788 0.01362666</div><div class="line">##  6: 0.66134711 0.9535171 0.87395493 0.101661252 0.30094111 0.22257004</div><div class="line">##  7: 0.55672622 0.8943379 0.25373346 0.173713098 0.20480512 0.43330278</div><div class="line">##  8: 0.44255077 0.4695400 0.22368835 0.504668399 0.05181082 0.20466480</div><div class="line">##  9: 0.59814106 0.8319473 0.36690913 0.792975662 0.27411663 0.02809154</div><div class="line">## 10: 0.97473503 0.7775101 0.88166877 0.753166205 0.70018055 0.23151788</div><div class="line">##              G          H          I         J          K          L</div><div class="line">##  1: 0.42874957 0.79947582 0.78018846 0.4417669 0.57603008 0.58735506</div><div class="line">##  2: 0.50474417 0.41183691 0.83649693 0.4562639 0.42943533 0.04432009</div><div class="line">##  3: 0.72369268 0.95217577 0.63295196 0.5959357 0.35415262 0.24978755</div><div class="line">##  4: 0.33481795 0.07543831 0.45455761 0.6379352 0.91188111 0.83265795</div><div class="line">##  5: 0.08933755 0.46301119 0.56212971 0.7997931 0.83367055 0.72872657</div><div class="line">##  6: 0.02664011 0.57986306 0.05194099 0.8134768 0.64757159 0.47581280</div><div class="line">##  7: 0.32301409 0.30541714 0.58960042 0.5959014 0.91273150 0.92101453</div><div class="line">##  8: 0.01953665 0.15046710 0.30098137 0.6269210 0.59301203 0.60332790</div><div class="line">##  9: 0.80829949 0.50337487 0.85286500 0.4667048 0.34482590 0.45941051</div><div class="line">## 10: 0.26011167 0.74538236 0.34376219 0.3313794 0.03101849 0.39811192</div></pre></td></tr></table></figure>
<h3 id="1-3-读取指定列"><a href="#1-3-读取指定列" class="headerlink" title="1.3 读取指定列"></a>1.3 读取指定列</h3><h4 id="1-3-1-方法1-read-table-file-txt-colClasses"><a href="#1-3-1-方法1-read-table-file-txt-colClasses" class="headerlink" title="1.3.1 方法1 read.table(file.txt, colClasses=)"></a>1.3.1 方法1 <code>read.table(file.txt, colClasses=)</code></h4><p>使用<code>read.table</code>的<code>colClasses</code>参数可以将不想读取的列的类型设成<code>NULL</code>同样可以达到效果，但是要知道每个变量的类型。<br>参见<a href="http://stackoverflow.com/questions/5788117/only-read-limited-number-of-columns-in-r" target="_blank" rel="external">http://stackoverflow.com/questions/5788117/only-read-limited-number-of-columns-in-r</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp&lt;-read.table(&quot;./data/df1.txt&quot;, </div><div class="line">                 colClasses = c(rep(&quot;numeric&quot;, 6), rep(&quot;NULL&quot;, 6)), </div><div class="line">                 header = TRUE)</div></pre></td></tr></table></figure>
<h4 id="1-3-2-方法2-data-table-fread"><a href="#1-3-2-方法2-data-table-fread" class="headerlink" title="1.3.2 方法2 data.table::fread"></a>1.3.2 方法2 <code>data.table::fread</code></h4><p>使用 <code>data.table::fread</code>的<code>select</code>参数和<code>drop</code>参数可以选择或丢弃你想要的列，这种方法相对前者更快更方便，因此我们推荐这一个。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">library(data.table)</div><div class="line">tmp1 &lt;- fread(&quot;./data/df1.txt&quot;, select = 1:6)</div><div class="line">head(tmp1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##             A         B          C           D         E          F</div><div class="line">## 1: 0.67670367 0.3026637 0.08774587 0.003039472 0.2475209 0.98302481</div><div class="line">## 2: 0.03264569 0.5847326 0.42416403 0.847138941 0.2456227 0.04392178</div><div class="line">## 3: 0.09310092 0.9051813 0.81617685 0.866701763 0.3962816 0.59205108</div><div class="line">## 4: 0.95241243 0.6262199 0.49515652 0.600203589 0.8285461 0.20061278</div><div class="line">## 5: 0.70553467 0.1292063 0.42959473 0.003579900 0.4967079 0.01362666</div><div class="line">## 6: 0.66134711 0.9535171 0.87395493 0.101661252 0.3009411 0.22257004</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tmp2 &lt;- fread(&quot;./data/df1.txt&quot;, drop  = 7:12)</div><div class="line">head(tmp2)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##             A         B          C           D         E          F</div><div class="line">## 1: 0.67670367 0.3026637 0.08774587 0.003039472 0.2475209 0.98302481</div><div class="line">## 2: 0.03264569 0.5847326 0.42416403 0.847138941 0.2456227 0.04392178</div><div class="line">## 3: 0.09310092 0.9051813 0.81617685 0.866701763 0.3962816 0.59205108</div><div class="line">## 4: 0.95241243 0.6262199 0.49515652 0.600203589 0.8285461 0.20061278</div><div class="line">## 5: 0.70553467 0.1292063 0.42959473 0.003579900 0.4967079 0.01362666</div><div class="line">## 6: 0.66134711 0.9535171 0.87395493 0.101661252 0.3009411 0.22257004</div></pre></td></tr></table></figure>
<h2 id="2-读取EXCEL的指定行和列"><a href="#2-读取EXCEL的指定行和列" class="headerlink" title="2 读取EXCEL的指定行和列"></a>2 读取EXCEL的指定行和列</h2><h3 id="2-1-数据"><a href="#2-1-数据" class="headerlink" title="2.1 数据"></a>2.1 数据</h3><p>我们选取的数据是美国1954年以来的有效联邦基金利率(Effective Federal Funds Rate (DFF))的日度时间序列数据,下载地址：<a href="https://research.stlouisfed.org/fred2/series/DFF/downloaddata" target="_blank" rel="external">https://research.stlouisfed.org/fred2/series/DFF/downloaddata</a></p>
<h3 id="2-2-导入想要的日度数据"><a href="#2-2-导入想要的日度数据" class="headerlink" title="2.2 导入想要的日度数据"></a>2.2 导入想要的日度数据</h3><p>源文件包含一些数据描述信息，这些不是我们关心，我们关心的只有日期和利率。我们使用<code>XLConnect</code>读取想要的<code>xls</code>区域。</p>
<ul>
<li>startRow = ,starCol =,起始行列 </li>
<li>endCol =, endCol = . 末行列</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if (!require(&quot;XLConnect&quot;)) install.packages(&quot;XLConnect&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">library(XLConnect) </div><div class="line">library(ggplot2)</div><div class="line">library(ggthemes)</div><div class="line"></div><div class="line">filePath &lt;- &quot;./data/DFF.xls&quot;</div><div class="line"># 载入文件</div><div class="line">wb &lt;- loadWorkbook(filePath, create = TRUE)</div><div class="line"># 读取工作簿(sheet)</div><div class="line">DFF &lt;- readWorksheet(wb, sheet = &quot;DFF&quot;, header = TRUE,startRow = 59,</div><div class="line">                             endCol =2)</div><div class="line">head(DFF)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##         DATE VALUE</div><div class="line">## 1 1954-07-01  1.13</div><div class="line">## 2 1954-07-02  1.25</div><div class="line">## 3 1954-07-03  1.25</div><div class="line">## 4 1954-07-04  1.25</div><div class="line">## 5 1954-07-05  0.88</div><div class="line">## 6 1954-07-06  0.25</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 使用数据</div><div class="line">ggplot(DFF, aes(x=DATE, y=VALUE))+geom_line()+</div><div class="line">  theme_wsj()+</div><div class="line">  labs(list(title = &quot;Effective Federal Funds Rate&quot;))</div></pre></td></tr></table></figure>
<p><img src="/img/DFF.png" alt="DFF"> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">## R version 3.2.2 (2015-08-14)</div><div class="line">## Platform: x86_64-apple-darwin13.4.0 (64-bit)</div><div class="line">## Running under: OS X 10.11.1 (El Capitan)</div><div class="line">## </div><div class="line">## locale:</div><div class="line">## [1] zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/zh_CN.UTF-8/zh_CN.UTF-8</div><div class="line">## </div><div class="line">## attached base packages:</div><div class="line">## [1] stats     graphics  grDevices utils     datasets  methods   base     </div><div class="line">## </div><div class="line">## other attached packages:</div><div class="line">## [1] ggthemes_2.2.1      ggplot2_1.0.1       XLConnect_0.2-11   </div><div class="line">## [4] XLConnectJars_0.2-9 data.table_1.9.6   </div><div class="line">## </div><div class="line">## loaded via a namespace (and not attached):</div><div class="line">##  [1] Rcpp_0.12.1      knitr_1.11       magrittr_1.5     MASS_7.3-43     </div><div class="line">##  [5] munsell_0.4.2    colorspace_1.2-6 stringr_1.0.0    plyr_1.8.3      </div><div class="line">##  [9] tools_3.2.2      grid_3.2.2       gtable_0.1.2     htmltools_0.2.6 </div><div class="line">## [13] yaml_2.1.13      digest_0.6.8     rJava_0.9-7      reshape2_1.4.1  </div><div class="line">## [17] evaluate_0.8     rmarkdown_0.8    labeling_0.3     stringi_1.0-1   </div><div class="line">## [21] scales_0.3.0     chron_2.3-47     proto_0.3-10</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[data.table Way2]]></title>
      <url>http://changshun.github.io/2015/11/02/%E6%8A%80%E6%9C%AF/2015-11-02-data-table2/</url>
      <content type="html"><![CDATA[<h1 id="data-table-Way-2"><a href="#data-table-Way-2" class="headerlink" title="data.table Way 2"></a>data.table Way 2</h1><p>继续<a href="http://changshun.github.io/2015/11/02/data-table.html">data.table1</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">library(data.table)</div><div class="line">library(ggplot2)</div><div class="line">library(plyr)</div></pre></td></tr></table></figure>
<p>我们继续使用Basketball Reference: boxscore数据和<code>mtcars</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">boxscore &lt;- fread(&quot;/Users/shihchosen/Desktop/boxscore.csv&quot;)</div><div class="line">dtb &lt;- copy(boxscore)</div><div class="line">dtb[,1:2:=NULL]</div><div class="line">dtb[,year:=year(date)]</div><div class="line">head(dtb)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team          player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS      A.J. Price priceaj01</div><div class="line">## 2: 2012-10-30 201210300CLE            CLE  WAS    Emeka Okafor okafoem01</div><div class="line">## 3: 2012-10-30 201210300CLE            CLE  WAS    Trevor Ariza arizatr01</div><div class="line">## 4: 2012-10-30 201210300CLE            CLE  WAS    Bradley Beal  bealbr01</div><div class="line">## 5: 2012-10-30 201210300CLE            CLE  WAS   Trevor Booker booketr01</div><div class="line">## 6: 2012-10-30 201210300CLE            CLE  WAS Jordan Crawford crawfjo02</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   29.40   2  13   2   9   1   1      1      1      2       6      0</div><div class="line">## 2:   24.58   4  10   0   0   2   4      5      2      7       0      0</div><div class="line">## 3:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">## 4:   21.55   2   8   2   4   2   2      0      3      3       3      1</div><div class="line">## 5:   16.75   2   9   0   1   0   0      1      0      1       1      1</div><div class="line">## 6:   28.70   4  13   0   6   3   4      1      2      3       5      1</div><div class="line">##    blocks turnovers fouls points plusminus year</div><div class="line">## 1:      0         1     1      7       -11 2012</div><div class="line">## 2:      4         1     1     10        -5 2012</div><div class="line">## 3:      2         0     0      9        -9 2012</div><div class="line">## 4:      0         2     1      8       -16 2012</div><div class="line">## 5:      1         4     4      4       -15 2012</div><div class="line">## 6:      1         1     1     11         0 2012</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dtm &lt;- data.table(mtcars)</div><div class="line">head(dtm)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##     mpg cyl disp  hp drat    wt  qsec vs am gear carb</div><div class="line">## 1: 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</div><div class="line">## 2: 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</div><div class="line">## 3: 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</div><div class="line">## 4: 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</div><div class="line">## 5: 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</div><div class="line">## 6: 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div></pre></td></tr></table></figure>
<h2 id="set-族"><a href="#set-族" class="headerlink" title="set() 族"></a><code>set()</code> 族</h2><table>
<thead>
<tr>
<th>set family</th>
<th>usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set()</code></td>
<td><code>:=</code>的循环版本</td>
</tr>
<tr>
<td><code>setnames()</code></td>
<td>设置或更改列名</td>
</tr>
<tr>
<td><code>setorder()</code></td>
<td>更改行的顺序</td>
</tr>
<tr>
<td><code>setcolorder()</code></td>
<td>更改行的顺序</td>
</tr>
<tr>
<td><code>setkey()</code></td>
<td>设置<code>data.table</code>中的key</td>
</tr>
</tbody>
</table>
<h3 id="set"><a href="#set" class="headerlink" title="set()"></a>set()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dtb1 &lt;- copy(dtb)</div><div class="line">set(dtb1, j = which(colnames(dtb)==&apos;plusminus&apos;), value = 1)</div><div class="line">head(dtb1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team          player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS      A.J. Price priceaj01</div><div class="line">## 2: 2012-10-30 201210300CLE            CLE  WAS    Emeka Okafor okafoem01</div><div class="line">## 3: 2012-10-30 201210300CLE            CLE  WAS    Trevor Ariza arizatr01</div><div class="line">## 4: 2012-10-30 201210300CLE            CLE  WAS    Bradley Beal  bealbr01</div><div class="line">## 5: 2012-10-30 201210300CLE            CLE  WAS   Trevor Booker booketr01</div><div class="line">## 6: 2012-10-30 201210300CLE            CLE  WAS Jordan Crawford crawfjo02</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   29.40   2  13   2   9   1   1      1      1      2       6      0</div><div class="line">## 2:   24.58   4  10   0   0   2   4      5      2      7       0      0</div><div class="line">## 3:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">## 4:   21.55   2   8   2   4   2   2      0      3      3       3      1</div><div class="line">## 5:   16.75   2   9   0   1   0   0      1      0      1       1      1</div><div class="line">## 6:   28.70   4  13   0   6   3   4      1      2      3       5      1</div><div class="line">##    blocks turnovers fouls points plusminus year</div><div class="line">## 1:      0         1     1      7         1 2012</div><div class="line">## 2:      4         1     1     10         1 2012</div><div class="line">## 3:      2         0     0      9         1 2012</div><div class="line">## 4:      0         2     1      8         1 2012</div><div class="line">## 5:      1         4     4      4         1 2012</div><div class="line">## 6:      1         1     1     11         1 2012</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set(dtb1, j = which(colnames(dtb)==&apos;plusminus&apos;), value = dtb$plusminus)</div></pre></td></tr></table></figure>
<p>创建一个<code>data.table</code>, 随机将每行的5个数字变成10</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">temp &lt;- data.table(A = sample(1:9),</div><div class="line">                   B = sample(1:9),</div><div class="line">                   C = sample(1:9),</div><div class="line">                   D = sample(1:9),</div><div class="line">                   E = sample(1:9))</div><div class="line"></div><div class="line"># for each row, randomly change 3 values to 10 </div><div class="line">for (i in 1:9) set(temp, i, sample(5, 3), 10)</div><div class="line">temp</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">##     A  B  C  D  E</div><div class="line">## 1: 10  7 10 10  3</div><div class="line">## 2: 10 10 10  9  9</div><div class="line">## 3: 10  9  2 10 10</div><div class="line">## 4:  4  2 10 10 10</div><div class="line">## 5:  6 10 10  8 10</div><div class="line">## 6:  7 10 10 10  8</div><div class="line">## 7: 10  6 10 10  1</div><div class="line">## 8:  9  1 10 10 10</div><div class="line">## 9:  3  5 10 10 10</div></pre></td></tr></table></figure>
<h3 id="setnames"><a href="#setnames" class="headerlink" title="setnames()"></a><code>setnames()</code></h3><p>把<code>temp</code>的列名更改为<code>列_*</code>的格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># setnames(x, old, new)</div><div class="line">setnames(temp, names(temp), paste0(&apos;列_&apos;, names(temp)))</div><div class="line">head(temp, 3)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">##    列_A 列_B 列_C 列_D 列_E</div><div class="line">## 1:   10    7   10   10    3</div><div class="line">## 2:   10   10   10    9    9</div><div class="line">## 3:   10    9    2   10   10</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#把`temp`的列名更改为`Col_*`的格式：</div><div class="line">setnames(temp, gsub(&apos;^列_&apos;, &apos;Col_&apos;, names(temp)))</div><div class="line">head(temp, 3)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">##    Col_A Col_B Col_C Col_D Col_E</div><div class="line">## 1:    10     7    10    10     3</div><div class="line">## 2:    10    10    10     9     9</div><div class="line">## 3:    10     9     2    10    10</div></pre></td></tr></table></figure>
<h3 id="setorder-and-setcolorder"><a href="#setorder-and-setcolorder" class="headerlink" title="setorder() and setcolorder()"></a><code>setorder()</code> and <code>setcolorder()</code></h3><p>按照年份和得分排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setorder(dtb1, year, -points)</div><div class="line">dtb1[, head(.SD), by=year]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div></pre></td><td class="code"><pre><div class="line">##     year       date      game_id team_home_abbr team           player</div><div class="line">##  1: 2004 2004-12-18 200412180MIL            MIL  PHI    Allen Iverson</div><div class="line">##  2: 2004 2004-12-02 200412020DAL            DAL  DAL    Dirk Nowitzki</div><div class="line">##  3: 2004 2004-12-20 200412200PHI            PHI  PHI    Allen Iverson</div><div class="line">##  4: 2004 2004-12-02 200412020DAL            DAL  HOU    Tracy McGrady</div><div class="line">##  5: 2004 2004-12-28 200412280LAL            LAL  LAL      Kobe Bryant</div><div class="line">##  6: 2004 2004-11-24 200411240CLE            CLE  CLE     LeBron James</div><div class="line">##  7: 2005 2005-12-20 200512200LAL            LAL  LAL      Kobe Bryant</div><div class="line">##  8: 2005 2005-02-12 200502120PHI            PHI  PHI    Allen Iverson</div><div class="line">##  9: 2005 2005-03-20 200503200TOR            TOR  CLE     LeBron James</div><div class="line">## 10: 2005 2005-01-04 200501040IND            IND  IND  Jermaine O&apos;Neal</div><div class="line">## 11: 2005 2005-01-14 200501140NOH            NOH  POR Damon Stoudamire</div><div class="line">## 12: 2005 2005-12-23 200512230ATL            ATL  PHI    Allen Iverson</div><div class="line">## 13: 2006 2006-01-22 200601220LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 14: 2006 2006-12-17 200612170LAL            LAL  WAS   Gilbert Arenas</div><div class="line">## 15: 2006 2006-12-29 200612290CHA            CHA  LAL      Kobe Bryant</div><div class="line">## 16: 2006 2006-11-11 200611110MIL            MIL  MIL     Michael Redd</div><div class="line">## 17: 2006 2006-12-22 200612220PHO            PHO  WAS   Gilbert Arenas</div><div class="line">## 18: 2006 2006-12-15 200612150LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 19: 2007 2007-03-16 200703160LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 20: 2007 2007-03-22 200703220MEM            MEM  LAL      Kobe Bryant</div><div class="line">## 21: 2007 2007-01-12 200701120OKC            OKC  OKC        Ray Allen</div><div class="line">## 22: 2007 2007-03-30 200703300LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 23: 2007 2007-01-26 200701260NYK            NYK  NYK   Jamal Crawford</div><div class="line">## 24: 2007 2007-03-04 200703040MIL            MIL  MIL     Michael Redd</div><div class="line">## 25: 2008 2008-11-05 200811050MIN            MIN  SAS      Tony Parker</div><div class="line">## 26: 2008 2008-03-28 200803280LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 27: 2008 2008-12-18 200812180POR            POR  POR      Brandon Roy</div><div class="line">## 28: 2008 2008-03-02 200803020LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 29: 2008 2008-01-15 200801150MEM            MEM  CLE     LeBron James</div><div class="line">## 30: 2008 2008-12-20 200812200CHA            CHA  GSW   Jamal Crawford</div><div class="line">## 31: 2009 2009-02-02 200902020NYK            NYK  LAL      Kobe Bryant</div><div class="line">## 32: 2009 2009-11-14 200911140MIL            MIL  MIL Brandon Jennings</div><div class="line">## 33: 2009 2009-02-20 200902200MIL            MIL  CLE     LeBron James</div><div class="line">## 34: 2009 2009-04-12 200904120MIA            MIA  MIA      Dwyane Wade</div><div class="line">## 35: 2009 2009-02-04 200902040NYK            NYK  CLE     LeBron James</div><div class="line">## 36: 2009 2009-03-13 200903130SAC            SAC  CLE     LeBron James</div><div class="line">## 37: 2010 2010-01-30 201001300DAL            DAL  POR     Andre Miller</div><div class="line">## 38: 2010 2010-02-08 201002080ORL            ORL  ORL     Vince Carter</div><div class="line">## 39: 2010 2010-02-06 201002060CLE            CLE  CLE     LeBron James</div><div class="line">## 40: 2010 2010-10-27 201010270GSW            GSW  GSW      Monta Ellis</div><div class="line">## 41: 2010 2010-11-09 201011090MIA            MIA  UTA     Paul Millsap</div><div class="line">## 42: 2010 2010-02-03 201002030DAL            DAL  GSW      Monta Ellis</div><div class="line">## 43: 2011 2011-02-03 201102030ORL            ORL  MIA     LeBron James</div><div class="line">## 44: 2011 2011-02-07 201102070DEN            DEN  DEN  Carmelo Anthony</div><div class="line">## 45: 2011 2011-05-17 201105170DAL            DAL  DAL    Dirk Nowitzki</div><div class="line">## 46: 2011 2011-01-17 201101170LAC            LAC  LAC    Blake Griffin</div><div class="line">## 47: 2011 2011-01-26 201101260MIN            MIN  OKC     Kevin Durant</div><div class="line">## 48: 2011 2011-04-16 201104160ORL            ORL  ORL    Dwight Howard</div><div class="line">## 49: 2012 2012-03-04 201203040CHA            CHA  BRK   Deron Williams</div><div class="line">## 50: 2012 2012-02-19 201202190OKC            OKC  OKC     Kevin Durant</div><div class="line">## 51: 2012 2012-03-23 201203230OKC            OKC  MIN       Kevin Love</div><div class="line">## 52: 2012 2012-01-10 201201100LAL            LAL  LAL      Kobe Bryant</div><div class="line">## 53: 2012 2012-02-07 201202070GSW            GSW  GSW      Monta Ellis</div><div class="line">## 54: 2012 2012-11-02 201211020ATL            ATL  HOU     James Harden</div><div class="line">## 55: 2013 2013-02-27 201302270NYK            NYK  GSW    Stephen Curry</div><div class="line">## 56: 2013 2013-01-18 201301180DAL            DAL  OKC     Kevin Durant</div><div class="line">## 57: 2013 2013-04-02 201304020MIA            MIA  NYK  Carmelo Anthony</div><div class="line">## 58: 2013 2013-03-25 201303250WAS            WAS  WAS        John Wall</div><div class="line">## 59: 2013 2013-04-10 201304100POR            POR  LAL      Kobe Bryant</div><div class="line">## 60: 2013 2013-04-12 201304120LAL            LAL  GSW    Stephen Curry</div><div class="line">##     year       date      game_id team_home_abbr team           player</div><div class="line">##     player_id minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists</div><div class="line">##  1: iversal01   40.00  17  29   4   7  16  21      2      6      8       5</div><div class="line">##  2: nowitdi01   49.00  15  32   2   5  21  22      4     12     16       2</div><div class="line">##  3: iversal01   46.00  18  31   4   6  11  17      0      1      1       6</div><div class="line">##  4: mcgratr01   49.00  19  36   6  13   4   7      5      4      9       9</div><div class="line">##  5: bryanko01   46.00  14  26   4   7  16  18      0      2      2       4</div><div class="line">##  6: jamesle01   38.00  15  22   2   3  11  12      3      3      6       5</div><div class="line">##  7: bryanko01   32.88  18  31   4  10  22  25      3      5      8       0</div><div class="line">##  8: iversal01   42.00  17  36   2   5  24  27      1      3      4       6</div><div class="line">##  9: jamesle01   48.00  18  36   6  12  14  15      2      8     10       5</div><div class="line">## 10: onealje01   36.00  18  28   0   0  19  25      3      8     11       3</div><div class="line">## 11: stoudda01   43.00  20  32   8  16   6   6      0      0      0       1</div><div class="line">## 12: iversal01   44.50  17  31   0   1  19  21      0      6      6       5</div><div class="line">## 13: bryanko01   41.93  28  46   7  13  18  20      2      4      6       2</div><div class="line">## 14: arenagi01   49.00  17  32   5  12  21  27      0      8      8       8</div><div class="line">## 15: bryanko01   54.47  22  45   4  11  10  12      0      5      5       4</div><div class="line">## 16:  reddmi01   45.73  18  32   6  12  15  17      0      2      2       0</div><div class="line">## 17: arenagi01   47.57  21  37   6  12   6   6      0      3      3       4</div><div class="line">## 18: bryanko01   54.02  17  38   5   8  14  16      0     10     10       8</div><div class="line">## 19: bryanko01   49.97  23  39   8  12  11  12      1      6      7       3</div><div class="line">## 20: bryanko01   45.18  20  37   3   7  17  18      2      3      5       4</div><div class="line">## 21: allenra02   43.12  17  32   8  12  12  12      3      7     10       5</div><div class="line">## 22: bryanko01   47.57  19  44   3   9  12  14      1      1      2       2</div><div class="line">## 23: crawfja01   39.48  20  30   8  10   4   4      2      1      3       1</div><div class="line">## 24:  reddmi01   43.63  18  32   8  13   8   9      1      2      3       2</div><div class="line">## 25: parketo01   50.53  22  36   2   3   9  10      0      7      7      10</div><div class="line">## 26: bryanko01   41.87  19  37   9  17   6   7      2      8     10       1</div><div class="line">## 27:   roybr01   43.82  14  27   5   7  19  21      1      4      5       6</div><div class="line">## 28: bryanko01   51.40  15  27   2   3  20  27      1     10     11       4</div><div class="line">## 29: jamesle01   47.17  18  28   6  12   9  16      3      5      8       9</div><div class="line">## 30: crawfja01   45.85  14  26   5   8  17  18      0      2      2       5</div><div class="line">## 31: bryanko01   36.80  19  31   3   6  20  20      0      0      0       3</div><div class="line">## 32: jennibr01   40.72  21  34   7   8   6   8      1      4      5       5</div><div class="line">## 33: jamesle01   40.07  16  29   8  11  15  22      1      4      5       9</div><div class="line">## 34:  wadedw01   39.28  19  30   6  12  11  13      2      7      9       4</div><div class="line">## 35: jamesle01   44.05  17  33   2   7  16  19      0      9      9      11</div><div class="line">## 36: jamesle01   46.98  16  30   4  11  15  17      0      4      4       9</div><div class="line">## 37: millean02   42.23  22  31   1   1   7   8      1      4      5       2</div><div class="line">## 38: cartevi01   38.05  19  27   6  10   4   4      0      7      7       2</div><div class="line">## 39: jamesle01   43.85  17  31   6  12   7   7      1      7      8       8</div><div class="line">## 40: ellismo01   39.75  18  24   1   2   9  12      0      3      3       2</div><div class="line">## 41: millspa01   43.45  19  28   3   3   5   7      4      5      9       1</div><div class="line">## 42: ellismo01   40.85  17  23   4   6   8  13      3      1      4       2</div><div class="line">## 43: jamesle01   42.65  17  25   3   5  14  17      2      9     11       8</div><div class="line">## 44: anthoca01   39.47  16  24   2   3  16  18      1     10     11       0</div><div class="line">## 45: nowitdi01   40.90  12  15   0   0  24  24      0      6      6       4</div><div class="line">## 46: griffbl01   36.93  19  24   0   0   9  11      3     11     14       3</div><div class="line">## 47: duranke01   49.83  15  28   4   8  13  14      2     16     18       2</div><div class="line">## 48: howardw01   45.80  16  23   0   1  14  22      6     13     19       1</div><div class="line">## 49: willide01   37.75  16  29   4  11  21  21      1      5      6       7</div><div class="line">## 50: duranke01   45.45  19  28   5   6   8  10      2      6      8       3</div><div class="line">## 51:  loveke01   49.32  16  27   7  11  12  16      6      8     14       0</div><div class="line">## 52: bryanko01   39.12  18  31   0   3  12  13      0      5      5       3</div><div class="line">## 53: ellismo01   41.75  18  29   3   6   9  10      1      6      7       2</div><div class="line">## 54: hardeja01   39.82  14  19   2   4  15  17      1      6      7       2</div><div class="line">## 55: curryst01   48.00  18  28  11  13   7   7      0      6      6       7</div><div class="line">## 56: duranke01   49.67  13  31   5   9  21  21      0      9      9       1</div><div class="line">## 57: anthoca01   40.33  18  26   7  10   7   8      0      2      2       2</div><div class="line">## 58:  walljo01   44.55  13  22   2   4  19  24      0      7      7       8</div><div class="line">## 59: bryanko01   48.00  14  27   1   5  18  18      0      8      8       5</div><div class="line">## 60: curryst01   44.28  17  31   9  15   4   4      3      3      6       9</div><div class="line">##     player_id minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists</div><div class="line">##     steals blocks turnovers fouls points plusminus</div><div class="line">##  1:      2      0         3     0     54        25</div><div class="line">##  2:      3      4         1     2     53        12</div><div class="line">##  3:      7      0         7     6     51         0</div><div class="line">##  4:      2      3         2     3     48         0</div><div class="line">##  5:      2      0         5     2     48        21</div><div class="line">##  6:      3      1         3     3     43        12</div><div class="line">##  7:      3      0         2     3     62        35</div><div class="line">##  8:      5      1         3     1     60        27</div><div class="line">##  9:      2      0         4     0     56        -7</div><div class="line">## 10:      0      2         3     3     55        22</div><div class="line">## 11:      1      0         0     3     54        -7</div><div class="line">## 12:      2      0         0     0     53        -5</div><div class="line">## 13:      3      1         3     1     81        25</div><div class="line">## 14:      2      0         3     3     60        10</div><div class="line">## 15:      0      0         4     6     58         5</div><div class="line">## 16:      3      1         3     2     57         2</div><div class="line">## 17:      1      0         4     5     54        12</div><div class="line">## 18:      2      1         5     1     53        20</div><div class="line">## 19:      3      0         2     3     65         4</div><div class="line">## 20:      0      0         2     4     60         2</div><div class="line">## 21:      1      0         2     2     54        10</div><div class="line">## 22:      0      0         3     2     53         1</div><div class="line">## 23:      2      0         3     2     52        27</div><div class="line">## 24:      3      0         4     2     52       -12</div><div class="line">## 25:      0      0         4     0     55         7</div><div class="line">## 26:      3      0         1     4     53         1</div><div class="line">## 27:      0      1         0     1     52        12</div><div class="line">## 28:      1      2         5     2     52         4</div><div class="line">## 29:      3      1         4     1     51        10</div><div class="line">## 30:      0      1         1     2     50        15</div><div class="line">## 31:      0      1         2     1     61        19</div><div class="line">## 32:      0      0         4     1     55        11</div><div class="line">## 33:      0      0         6     3     55        13</div><div class="line">## 34:      0      1         3     3     55        24</div><div class="line">## 35:      0      2         3     1     52         7</div><div class="line">## 36:      2      3         3     2     51         6</div><div class="line">## 37:      2      0         2     2     52         4</div><div class="line">## 38:      0      0         2     5     48        19</div><div class="line">## 39:      5      0         5     2     47         4</div><div class="line">## 40:      2      0         1     4     46         9</div><div class="line">## 41:      1      1         1     4     46         2</div><div class="line">## 42:      1      1         7     5     46        -9</div><div class="line">## 43:      1      1         3     2     51         2</div><div class="line">## 44:      1      3         4     2     50        -3</div><div class="line">## 45:      0      4         2     3     48        12</div><div class="line">## 46:      0      1         4     3     47        17</div><div class="line">## 47:      2      2         2     2     47        -3</div><div class="line">## 48:      0      1         8     5     46       -10</div><div class="line">## 49:      1      1         5     2     57        11</div><div class="line">## 50:      4      0         5     1     51        19</div><div class="line">## 51:      1      1         4     3     51         4</div><div class="line">## 52:      3      0         2     2     48        16</div><div class="line">## 53:      2      1         3     2     48         5</div><div class="line">## 54:      0      0         5     3     45        17</div><div class="line">## 55:      3      0         4     3     54        -4</div><div class="line">## 56:      2      0         4     2     52        -1</div><div class="line">## 57:      1      1         0     3     50        15</div><div class="line">## 58:      1      1         2     2     47        26</div><div class="line">## 59:      3      4         1     4     47         7</div><div class="line">## 60:      3      0         1     3     47         3</div><div class="line">##     steals blocks turnovers fouls points plusminus</div></pre></td></tr></table></figure>
<p>按照字母表为列名排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setcolorder(dtb1, sort(names(dtb)))</div><div class="line">head(dtb1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##    3pa 3pm assists blocks       date defreb fga fgm fouls fta ftm</div><div class="line">## 1:   7   4       5      0 2004-12-18      6  29  17     0  21  16</div><div class="line">## 2:   5   2       2      4 2004-12-02     12  32  15     2  22  21</div><div class="line">## 3:   6   4       6      0 2004-12-20      1  31  18     6  17  11</div><div class="line">## 4:  13   6       9      3 2004-12-02      4  36  19     3   7   4</div><div class="line">## 5:   7   4       4      0 2004-12-28      2  26  14     2  18  16</div><div class="line">## 6:   3   2       5      1 2004-11-24      3  22  15     3  12  11</div><div class="line">##         game_id minutes offreb        player player_id plusminus points</div><div class="line">## 1: 200412180MIL      40      2 Allen Iverson iversal01        25     54</div><div class="line">## 2: 200412020DAL      49      4 Dirk Nowitzki nowitdi01        12     53</div><div class="line">## 3: 200412200PHI      46      0 Allen Iverson iversal01         0     51</div><div class="line">## 4: 200412020DAL      49      5 Tracy McGrady mcgratr01         0     48</div><div class="line">## 5: 200412280LAL      46      0   Kobe Bryant bryanko01        21     48</div><div class="line">## 6: 200411240CLE      38      3  LeBron James jamesle01        12     43</div><div class="line">##    steals team team_home_abbr totreb turnovers year</div><div class="line">## 1:      2  PHI            MIL      8         3 2004</div><div class="line">## 2:      3  DAL            DAL     16         1 2004</div><div class="line">## 3:      7  PHI            PHI      1         7 2004</div><div class="line">## 4:      2  HOU            DAL      9         2 2004</div><div class="line">## 5:      2  LAL            LAL      2         5 2004</div><div class="line">## 6:      3  CLE            CLE      6         3 2004</div></pre></td></tr></table></figure>
<h3 id="setkey"><a href="#setkey" class="headerlink" title="setkey()"></a><code>setkey()</code></h3><p>把<code>character</code>类型的column设为<code>key</code></p>
<blockquote>
<p>setkey() sorts a data.table and marks it as sorted (with an attribute sorted). The sorted columns are the key. The key can be any columns in any order. The columns are sorted in ascending order always.</p>
<p>setkey reorders (or sorts) the rows of a data.table by the columns provided. In versions 1.9+, for integer columns… It is extremely fast, but is limited by the range of integer values being \&lt;= 1e5</p>
</blockquote>
<p>查询球员各年平均数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">player.query &lt;- function(name,...)&#123;</div><div class="line">dtb.key &lt;- copy(dtb)</div><div class="line">setkey(dtb.key, player)</div><div class="line">data&lt;-dtb.key[name][, lapply(.SD, function(x)round(mean(x),2)), .SDcols=7:23, by=.(year, player)][order(player, year)]</div><div class="line">return(data)&#125;</div><div class="line"># 查询 Kobe Bryant</div><div class="line">player.query(&quot;Kobe Bryant&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">##     year      player minutes   fgm   fga  3pm  3pa  ftm   fta offreb</div><div class="line">##  1: 2004 Kobe Bryant   43.70  8.48 21.22 1.89 5.74 9.56 11.85   1.41</div><div class="line">##  2: 2005 Kobe Bryant   39.33  9.97 22.28 1.69 5.15 7.76  9.49   1.43</div><div class="line">##  3: 2006 Kobe Bryant   41.05 11.47 24.67 2.42 6.66 8.17  9.51   0.63</div><div class="line">##  4: 2007 Kobe Bryant   39.92 10.43 23.05 1.80 5.31 8.36  9.58   1.04</div><div class="line">##  5: 2008 Kobe Bryant   38.96  9.81 20.79 1.57 4.50 7.28  8.71   1.15</div><div class="line">##  6: 2009 Kobe Bryant   38.03 10.42 22.24 1.46 4.28 6.43  7.49   1.08</div><div class="line">##  7: 2010 Kobe Bryant   37.30  9.09 20.50 1.64 4.71 6.05  7.45   0.98</div><div class="line">##  8: 2011 Kobe Bryant   34.62  9.03 19.92 1.33 4.27 5.58  6.77   0.97</div><div class="line">##  9: 2012 Kobe Bryant   38.91 10.21 22.99 1.74 5.31 6.80  8.04   1.09</div><div class="line">## 10: 2013 Kobe Bryant   38.60  8.94 19.77 1.40 4.83 6.35  7.65   0.83</div><div class="line">##     defreb totreb assists steals blocks turnovers fouls points plusminus</div><div class="line">##  1:   5.67   7.07    7.07   1.37   1.15      4.67  2.78  28.41      3.11</div><div class="line">##  2:   3.85   5.28    4.93   1.22   0.57      3.34  2.68  29.40     -1.50</div><div class="line">##  3:   4.64   5.27    4.81   1.84   0.30      3.43  3.08  33.52      3.13</div><div class="line">##  4:   5.02   6.06    5.20   1.65   0.54      3.35  2.36  31.01      1.42</div><div class="line">##  5:   4.80   5.94    5.20   1.65   0.41      2.97  2.75  28.47      7.36</div><div class="line">##  6:   4.29   5.37    5.08   1.69   0.52      2.70  2.46  28.75      8.10</div><div class="line">##  7:   4.27   5.24    5.08   1.24   0.33      3.26  2.57  25.88      4.26</div><div class="line">##  8:   4.08   5.05    4.80   1.23   0.20      3.03  2.14  24.97      5.28</div><div class="line">##  9:   4.14   5.23    4.54   1.28   0.28      3.39  2.15  28.96      2.37</div><div class="line">## 10:   4.85   5.69    6.71   1.29   0.33      3.77  1.92  25.62     -0.58</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">player.query(&quot;Jeremy Lin&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">##    year     player minutes  fgm   fga  3pm  3pa  ftm  fta offreb defreb</div><div class="line">## 1: 2010 Jeremy Lin    8.55 0.71  2.24 0.00 0.12 0.53 0.76   0.29   0.47</div><div class="line">## 2: 2011 Jeremy Lin    9.74 1.07  2.47 0.07 0.20 0.80 0.93   0.53   0.93</div><div class="line">## 3: 2012 Jeremy Lin   30.91 4.98 11.24 0.76 2.59 3.33 4.14   0.52   3.03</div><div class="line">## 4: 2013 Jeremy Lin   31.09 4.71 10.78 1.18 3.29 2.76 3.58   0.29   2.20</div><div class="line">##    totreb assists steals blocks turnovers fouls points plusminus</div><div class="line">## 1:   0.76    0.94   1.12   0.41      0.65  0.88   1.94     -0.53</div><div class="line">## 2:   1.47    1.80   1.00   0.13      0.60  1.33   3.00      1.00</div><div class="line">## 3:   3.56    6.56   1.78   0.38      3.41  2.38  14.06      3.14</div><div class="line">## 4:   2.49    5.58   1.42   0.27      2.78  2.51  13.36      0.24</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">player.query(c(&quot;Kobe Bryant&quot;, &quot;LeBron James&quot;))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">##     year       player minutes   fgm   fga  3pm  3pa  ftm   fta offreb</div><div class="line">##  1: 2004  Kobe Bryant   43.70  8.48 21.22 1.89 5.74 9.56 11.85   1.41</div><div class="line">##  2: 2005  Kobe Bryant   39.33  9.97 22.28 1.69 5.15 7.76  9.49   1.43</div><div class="line">##  3: 2006  Kobe Bryant   41.05 11.47 24.67 2.42 6.66 8.17  9.51   0.63</div><div class="line">##  4: 2007  Kobe Bryant   39.92 10.43 23.05 1.80 5.31 8.36  9.58   1.04</div><div class="line">##  5: 2008  Kobe Bryant   38.96  9.81 20.79 1.57 4.50 7.28  8.71   1.15</div><div class="line">##  6: 2009  Kobe Bryant   38.03 10.42 22.24 1.46 4.28 6.43  7.49   1.08</div><div class="line">##  7: 2010  Kobe Bryant   37.30  9.09 20.50 1.64 4.71 6.05  7.45   0.98</div><div class="line">##  8: 2011  Kobe Bryant   34.62  9.03 19.92 1.33 4.27 5.58  6.77   0.97</div><div class="line">##  9: 2012  Kobe Bryant   38.91 10.21 22.99 1.74 5.31 6.80  8.04   1.09</div><div class="line">## 10: 2013  Kobe Bryant   38.60  8.94 19.77 1.40 4.83 6.35  7.65   0.83</div><div class="line">## 11: 2004 LeBron James   40.86  9.07 18.66 0.93 2.59 5.34  7.03   1.31</div><div class="line">## 12: 2005 LeBron James   42.61 10.46 21.95 1.57 4.49 6.85  9.06   1.18</div><div class="line">## 13: 2006 LeBron James   42.69 10.84 22.78 1.56 4.59 7.10  9.88   1.15</div><div class="line">## 14: 2007 LeBron James   41.48  9.72 21.05 1.18 4.09 6.64  9.34   1.23</div><div class="line">## 15: 2008 LeBron James   39.67 10.17 21.04 1.46 4.81 7.55 10.27   1.62</div><div class="line">## 16: 2009 LeBron James   38.79 10.06 20.50 1.83 5.03 7.82 10.09   1.23</div><div class="line">## 17: 2010 LeBron James   39.00  9.33 18.92 1.59 4.68 7.63 10.05   0.86</div><div class="line">## 18: 2011 LeBron James   40.90 10.00 19.27 1.09 3.40 6.20  8.19   1.34</div><div class="line">## 19: 2012 LeBron James   38.82 10.16 19.37 1.05 2.99 5.98  7.98   1.65</div><div class="line">## 20: 2013 LeBron James   38.98  9.74 17.77 1.41 3.63 5.81  7.53   1.36</div><div class="line">##     defreb totreb assists steals blocks turnovers fouls points plusminus</div><div class="line">##  1:   5.67   7.07    7.07   1.37   1.15      4.67  2.78  28.41      3.11</div><div class="line">##  2:   3.85   5.28    4.93   1.22   0.57      3.34  2.68  29.40     -1.50</div><div class="line">##  3:   4.64   5.27    4.81   1.84   0.30      3.43  3.08  33.52      3.13</div><div class="line">##  4:   5.02   6.06    5.20   1.65   0.54      3.35  2.36  31.01      1.42</div><div class="line">##  5:   4.80   5.94    5.20   1.65   0.41      2.97  2.75  28.47      7.36</div><div class="line">##  6:   4.29   5.37    5.08   1.69   0.52      2.70  2.46  28.75      8.10</div><div class="line">##  7:   4.27   5.24    5.08   1.24   0.33      3.26  2.57  25.88      4.26</div><div class="line">##  8:   4.08   5.05    4.80   1.23   0.20      3.03  2.14  24.97      5.28</div><div class="line">##  9:   4.14   5.23    4.54   1.28   0.28      3.39  2.15  28.96      2.37</div><div class="line">## 10:   4.85   5.69    6.71   1.29   0.33      3.77  1.92  25.62     -0.58</div><div class="line">## 11:   5.66   6.97    7.17   2.48   0.86      3.24  1.83  24.41      4.59</div><div class="line">## 12:   5.91   7.09    6.67   1.95   0.67      3.34  2.04  29.33      2.29</div><div class="line">## 13:   6.19   7.34    6.65   1.44   0.77      3.55  2.35  30.33      1.95</div><div class="line">## 14:   5.89   7.13    6.82   1.74   0.75      3.16  2.18  27.25      4.08</div><div class="line">## 15:   6.03   7.66    6.87   1.86   1.13      3.30  2.15  29.35      5.74</div><div class="line">## 16:   6.69   7.93    7.71   1.54   1.00      3.28  1.76  29.77      8.92</div><div class="line">## 17:   6.54   7.40    8.23   1.62   0.94      3.51  1.76  27.89      8.18</div><div class="line">## 18:   6.77   8.11    6.54   1.74   0.96      3.36  2.19  27.29      5.77</div><div class="line">## 19:   6.81   8.46    6.28   1.75   0.77      3.31  1.60  27.36      7.35</div><div class="line">## 20:   6.61   7.97    7.14   1.79   0.86      3.06  1.60  26.71      9.69</div></pre></td></tr></table></figure>
<p>查询每天所有球员的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">date.query &lt;- function(date,...)&#123;</div><div class="line">dtb.key &lt;- copy(dtb)</div><div class="line">setkey(dtb.key, date)</div><div class="line">data&lt;-dtb.key[date][, lapply(.SD, function(x)round(mean(x),2)), .SDcols=7:23, by=.(date, player)]</div><div class="line">return(data)&#125;</div></pre></td></tr></table></figure>
<p>也可以把<code>numeric</code>类型的column设为<code>key</code><br>查询盖帽数为<code>10</code>的球员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dtb.key &lt;- copy(dtb)</div><div class="line">setkey(dtb.key,blocks)</div><div class="line">dtb.key[J(10)][,.(date, player, blocks)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">##          date           player blocks</div><div class="line">## 1: 2012-11-30    Larry Sanders     10</div><div class="line">## 2: 2012-02-01      Serge Ibaka     10</div><div class="line">## 3: 2012-02-09      Serge Ibaka     10</div><div class="line">## 4: 2012-04-29     Andrew Bynum     10</div><div class="line">## 5: 2008-11-12    Dwight Howard     10</div><div class="line">## 6: 2007-12-26     Marcus Camby     10</div><div class="line">## 7: 2007-01-12     Emeka Okafor     10</div><div class="line">## 8: 2006-03-25 Andrei Kirilenko     10</div><div class="line">## 9: 2004-12-18       Josh Smith     10</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># OR</div><div class="line">dtb.key[.(12)][,.(date, player, blocks)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">##          date       player blocks</div><div class="line">## 1: 2011-03-15 JaVale McGee     12</div></pre></td></tr></table></figure>
<p>也可以设置多个<code>key</code><br>调出LeBron James在骑士的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setkey(dtb.key, player, team)</div><div class="line">dtb.key[.(&apos;LeBron James&apos;, &quot;CLE&quot;)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">##            date      game_id team_home_abbr team       player player_id</div><div class="line">##   1: 2009-10-28 200910280TOR            TOR  CLE LeBron James jamesle01</div><div class="line">##   2: 2009-10-31 200910310CLE            CLE  CLE LeBron James jamesle01</div><div class="line">##   3: 2009-11-03 200911030CLE            CLE  CLE LeBron James jamesle01</div><div class="line">##   4: 2009-11-06 200911060NYK            NYK  CLE LeBron James jamesle01</div><div class="line">##   5: 2009-11-11 200911110ORL            ORL  CLE LeBron James jamesle01</div><div class="line">##  ---                                                                   </div><div class="line">## 536: 2010-02-18 201002180CLE            CLE  CLE LeBron James jamesle01</div><div class="line">## 537: 2010-04-17 201004170CLE            CLE  CLE LeBron James jamesle01</div><div class="line">## 538: 2008-11-07 200811070CLE            CLE  CLE LeBron James jamesle01</div><div class="line">## 539: 2007-11-04 200711040PHO            PHO  CLE LeBron James jamesle01</div><div class="line">## 540: 2006-02-15 200602150BOS            BOS  CLE LeBron James jamesle01</div><div class="line">##      minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">##   1:   39.78   7  19   1   5   8  14      2      9     11      12      2</div><div class="line">##   2:   37.23   5  11   0   1   4   6      1      6      7       9      0</div><div class="line">##   3:   35.98   7  16   2   7  11  13      3      5      8       6      3</div><div class="line">##   4:   35.62  12  17   2   4   7   9      0      8      8       9      3</div><div class="line">##   5:   39.12  13  23   2   3   8   9      2      6      8       4      1</div><div class="line">##  ---                                                                    </div><div class="line">## 536:   47.00  15  33   1   9  12  17      1     12     13      15      2</div><div class="line">## 537:   40.23   9  19   0   1   6   7      0      6      6       5      1</div><div class="line">## 538:   39.33  11  24   1   6   4   7      2      7      9       8      1</div><div class="line">## 539:   43.22  11  26   3   5   2   2      1      4      5       8      2</div><div class="line">## 540:   53.92  16  32   0   5  11  15      1     11     12      11      2</div><div class="line">##      blocks turnovers fouls points plusminus year</div><div class="line">##   1:      0         4     1     23         2 2009</div><div class="line">##   2:      0         4     1     14        19 2009</div><div class="line">##   3:      0         4     0     27         5 2009</div><div class="line">##   4:      0         7     3     33         8 2009</div><div class="line">##   5:      0         4     2     36         7 2009</div><div class="line">##  ---                                             </div><div class="line">## 536:      4         3     1     43        -5 2010</div><div class="line">## 537:      4         3     2     24        19 2010</div><div class="line">## 538:      4         4     2     27        -3 2008</div><div class="line">## 539:      4         3     0     27       -18 2007</div><div class="line">## 540:      4         2     5     43         5 2006</div></pre></td></tr></table></figure>
<h3 id="选择分组"><a href="#选择分组" class="headerlink" title="选择分组"></a>选择分组</h3><h3 id="Rolling-joins"><a href="#Rolling-joins" class="headerlink" title="Rolling joins"></a>Rolling joins</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setkey(dtb.key, blocks)</div><div class="line">dtb.key[.(15), roll=TRUE]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team       player player_id</div><div class="line">## 1: 2011-03-15 201103150CHI            CHI  WAS JaVale McGee mcgeeja01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   39.37   5  14   0   0   1   3      3      9     12       1      0</div><div class="line">##    blocks turnovers fouls points plusminus year</div><div class="line">## 1:     15         2     4     11       -15 2011</div></pre></td></tr></table></figure>
<h2 id="其他data-table函数"><a href="#其他data-table函数" class="headerlink" title="其他data.table函数"></a>其他<code>data.table</code>函数</h2><h3 id="fread-快速读取"><a href="#fread-快速读取" class="headerlink" title="fread()快速读取"></a><code>fread()</code>快速读取</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># Borrowed from data.table document:</div><div class="line">n=1e6</div><div class="line">DT = data.table( a=sample(1:1000,n,replace=TRUE),</div><div class="line">                 b=sample(1:1000,n,replace=TRUE),</div><div class="line">                 c=rnorm(n),</div><div class="line">                 d=sample(c(&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;,&quot;qux&quot;,&quot;quux&quot;),n,replace=TRUE),</div><div class="line">                 e=rnorm(n),</div><div class="line">                 f=sample(1:1000,n,replace=TRUE) )</div><div class="line">DT[2,b:=NA_integer_]</div><div class="line">DT[4,c:=NA_real_]</div><div class="line">DT[3,d:=NA_character_]</div><div class="line">DT[5,d:=&quot;&quot;]</div><div class="line">DT[2,e:=+Inf]</div><div class="line">DT[3,e:=-Inf]</div><div class="line">write.table(DT,&quot;test.csv&quot;,sep=&quot;,&quot;,row.names=FALSE,quote=FALSE)</div><div class="line">cat(&quot;File size (MB):&quot;, round(file.info(&quot;test.csv&quot;)$size/1024^2),&quot;\n&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## File size (MB): 50</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">system.time(DF1 &lt;-read.csv(&quot;test.csv&quot;,stringsAsFactors=FALSE))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">##    user  system elapsed </div><div class="line">##  13.518   0.290  14.087</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">system.time(DF2 &lt;- read.table(&quot;test.csv&quot;,header=TRUE,sep=&quot;,&quot;,quote=&quot;&quot;,</div><div class="line">                              stringsAsFactors=FALSE,comment.char=&quot;&quot;,nrows=n,</div><div class="line">                              colClasses=c(&quot;integer&quot;,&quot;integer&quot;,&quot;numeric&quot;,</div><div class="line">                                           &quot;character&quot;,&quot;numeric&quot;,&quot;integer&quot;)))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">##    user  system elapsed </div><div class="line">##   7.553   0.107   7.908</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">system.time(DT &lt;- fread(&quot;test.csv&quot;))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">##    user  system elapsed </div><div class="line">##   0.627   0.026   0.657</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[data.table Way1]]></title>
      <url>http://changshun.github.io/2015/11/02/%E6%8A%80%E6%9C%AF/2015-11-02-data-table/</url>
      <content type="html"><![CDATA[<h1 id="data-table-Way"><a href="#data-table-Way" class="headerlink" title="data.table Way"></a>data.table Way</h1><blockquote>
<p>This is a learning note for the course Data Analysis in R, the data.table Way.<br>This course introduces the package ‘data.table’ which is a very powerful tool for data manipulation. I borrow two built-in data frames: mtcars and iris throughout the entire article. </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">library(data.table)</div><div class="line">library(ggplot2)</div><div class="line">library(plyr)</div></pre></td></tr></table></figure>
<h2 id="第一个-data-table"><a href="#第一个-data-table" class="headerlink" title="第一个 data.table"></a>第一个 <code>data.table</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">df1 &lt;- data.frame(A = letters[1:6], B = 1:2, C = TRUE)</div><div class="line">dt1 &lt;- data.table(A = letters[1:6], B = 1:2, C = TRUE)</div><div class="line">dt1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##    A B    C</div><div class="line">## 1: a 1 TRUE</div><div class="line">## 2: b 2 TRUE</div><div class="line">## 3: c 1 TRUE</div><div class="line">## 4: d 2 TRUE</div><div class="line">## 5: e 1 TRUE</div><div class="line">## 6: f 2 TRUE</div></pre></td></tr></table></figure>
<p>创建的<code>data.table</code>的类型有两个：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class(dt1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## [1] &quot;data.table&quot; &quot;data.frame&quot;</div></pre></td></tr></table></figure>
<p><code>data.frame</code>继承了<code>base</code>包里<code>data.frame</code>类，可以看作是一个次级类<br>在其他不能识别<code>data.table</code>的package里，它被当作<code>data.frame</code>使用，适用于<code>data.frame</code>的功能也适用于它。</p>
<h3 id="把data-frame或者matrix转化成data-fame"><a href="#把data-frame或者matrix转化成data-fame" class="headerlink" title="把data.frame或者matrix转化成data.fame"></a>把<code>data.frame</code>或者<code>matrix</code>转化成<code>data.fame</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dt2 &lt;-  as.data.table(df1) # 也可以使用`data.table()`</div><div class="line">dt3 &lt;- as.data.table(matrix(letters[-26], ncol = 5))</div></pre></td></tr></table></figure>
<h2 id="Basketball-Reference-boxscore"><a href="#Basketball-Reference-boxscore" class="headerlink" title="Basketball Reference: boxscore"></a>Basketball Reference: boxscore</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">boxscore&lt;-fread(&quot;https://s3.amazonaws.com/demo-datasets/basketball/boxscore.csv&quot;)# 读取的慢的话可以这个数据集下载下来</div><div class="line">boxscore[, (&quot;V1&quot;) := NULL] # 删除重复变量 </div><div class="line">head(boxscore)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##    id       date      game_id team_home_abbr team          player</div><div class="line">## 1:  1 2012-10-30 201210300CLE            CLE  WAS      A.J. Price</div><div class="line">## 2:  2 2012-10-30 201210300CLE            CLE  WAS    Emeka Okafor</div><div class="line">## 3:  3 2012-10-30 201210300CLE            CLE  WAS    Trevor Ariza</div><div class="line">## 4:  4 2012-10-30 201210300CLE            CLE  WAS    Bradley Beal</div><div class="line">## 5:  5 2012-10-30 201210300CLE            CLE  WAS   Trevor Booker</div><div class="line">## 6:  6 2012-10-30 201210300CLE            CLE  WAS Jordan Crawford</div><div class="line">##    player_id minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists</div><div class="line">## 1: priceaj01   29.40   2  13   2   9   1   1      1      1      2       6</div><div class="line">## 2: okafoem01   24.58   4  10   0   0   2   4      5      2      7       0</div><div class="line">## 3: arizatr01   24.58   3   8   2   4   1   2      1      2      3       4</div><div class="line">## 4:  bealbr01   21.55   2   8   2   4   2   2      0      3      3       3</div><div class="line">## 5: booketr01   16.75   2   9   0   1   0   0      1      0      1       1</div><div class="line">## 6: crawfjo02   28.70   4  13   0   6   3   4      1      2      3       5</div><div class="line">##    steals blocks turnovers fouls points plusminus</div><div class="line">## 1:      0      0         1     1      7       -11</div><div class="line">## 2:      0      4         1     1     10        -5</div><div class="line">## 3:      3      2         0     0      9        -9</div><div class="line">## 4:      1      0         2     1      8       -16</div><div class="line">## 5:      1      1         4     4      4       -15</div><div class="line">## 6:      1      1         1     1     11         0</div></pre></td></tr></table></figure>
<h2 id="iris"><a href="#iris" class="headerlink" title="iris"></a><code>iris</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DT_iris &lt;- as.data.table(iris)</div><div class="line">tail(DT_iris)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</div><div class="line">## 1:          6.7         3.3          5.7         2.5 virginica</div><div class="line">## 2:          6.7         3.0          5.2         2.3 virginica</div><div class="line">## 3:          6.3         2.5          5.0         1.9 virginica</div><div class="line">## 4:          6.5         3.0          5.2         2.0 virginica</div><div class="line">## 5:          6.2         3.4          5.4         2.3 virginica</div><div class="line">## 6:          5.9         3.0          5.1         1.8 virginica</div></pre></td></tr></table></figure>
<h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><ol>
<li><code>DT[i, i, by]</code> 标准<code>subsetting</code>语句</li>
<li><code>.()</code> ：<code>list()</code>的缩写</li>
<li><code>()</code> : <code>vector</code>的缩写</li>
<li><code>:=</code> 赋值函数</li>
<li><code>data.table</code> 内置变量<ul>
<li><code>.N</code> 行数</li>
<li><code>.SD</code> <strong>s</strong>ubset <strong>d</strong>ata.table</li>
<li><code>.SDcols</code> 列index</li>
</ul>
</li>
</ol>
<h2 id="取子集-subsetting"><a href="#取子集-subsetting" class="headerlink" title="取子集(subsetting)"></a>取子集(subsetting)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dtb &lt;- copy(boxscore)</div><div class="line">dtb[, id:=NULL]</div><div class="line">dti &lt;- copy(DT_iris)</div></pre></td></tr></table></figure>
<h3 id="取row"><a href="#取row" class="headerlink" title="取row"></a>取row</h3><h4 id="一般方法"><a href="#一般方法" class="headerlink" title="一般方法"></a>一般方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[3] # return 3rd row</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team       player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS Trevor Ariza arizatr01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      2         0     0      9        -9</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[2:3] # return 2-3 rows</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team       player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS Emeka Okafor okafoem01</div><div class="line">## 2: 2012-10-30 201210300CLE            CLE  WAS Trevor Ariza arizatr01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   24.58   4  10   0   0   2   4      5      2      7       0      0</div><div class="line">## 2:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      4         1     1     10        -5</div><div class="line">## 2:      2         0     0      9        -9</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[c(1,4,5)] # return  1,4,5 rows</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team        player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS    A.J. Price priceaj01</div><div class="line">## 2: 2012-10-30 201210300CLE            CLE  WAS  Bradley Beal  bealbr01</div><div class="line">## 3: 2012-10-30 201210300CLE            CLE  WAS Trevor Booker booketr01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   29.40   2  13   2   9   1   1      1      1      2       6      0</div><div class="line">## 2:   21.55   2   8   2   4   2   2      0      3      3       3      1</div><div class="line">## 3:   16.75   2   9   0   1   0   0      1      0      1       1      1</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      0         1     1      7       -11</div><div class="line">## 2:      0         2     1      8       -16</div><div class="line">## 3:      1         4     4      4       -15</div></pre></td></tr></table></figure>
<p><strong>注意</strong>：和<code>data.frame</code>取row不同是， 只要给出<code>i</code>(row)就可以了，不需要写<code>,</code></p>
<h4 id="内部变量-N"><a href="#内部变量-N" class="headerlink" title="内部变量.N"></a>内部变量<code>.N</code></h4><p><code>.N</code>返回row数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[.N-1] #return penultimate(倒数第二) row</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team      player player_id</div><div class="line">## 1: 2005-06-23 200506230SAS            SAS  SAS Brent Barry barrybr01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:      29   2   3   1   1   0   0      0      4      4       2      2</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      1         2     2      5        14</div></pre></td></tr></table></figure>
<h3 id="取column-j"><a href="#取column-j" class="headerlink" title="取column(j)"></a>取column(<code>j</code>)</h3><p>取column时，行可以用一个<code>,</code>跳过，但是<code>，</code>不能省区，取多个column时使用<code>list(var1name, var2name)</code>,往往简写成<code>.(var1name, var2name)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[, .(date,player, points)] #return points data each player every day</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">##               date        player points</div><div class="line">##      1: 2012-10-30    A.J. Price      7</div><div class="line">##      2: 2012-10-30  Emeka Okafor     10</div><div class="line">##      3: 2012-10-30  Trevor Ariza      9</div><div class="line">##      4: 2012-10-30  Bradley Beal      8</div><div class="line">##      5: 2012-10-30 Trevor Booker      4</div><div class="line">##     ---                                </div><div class="line">## 236199: 2005-06-23 Manu Ginobili     23</div><div class="line">## 236200: 2005-06-23 Nazr Mohammed      0</div><div class="line">## 236201: 2005-06-23  Robert Horry     15</div><div class="line">## 236202: 2005-06-23   Brent Barry      5</div><div class="line">## 236203: 2005-06-23   Devin Brown      0</div></pre></td></tr></table></figure>
<h4 id="比较-var1-，和var1"><a href="#比较-var1-，和var1" class="headerlink" title="比较 .(var1)，和var1"></a>比较 <code>.(var1)</code>，和<code>var1</code></h4><p>前者保留<code>data.table</code>结构, 后者丢弃结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class(dtb[1:10, .(points)])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## [1] &quot;data.table&quot; &quot;data.frame&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class(dtb[1:10, points])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## [1] &quot;integer&quot;</div></pre></td></tr></table></figure>
<h3 id="条件取值"><a href="#条件取值" class="headerlink" title="条件取值"></a>条件取值</h3><p>回忆下<code>data.frame</code>条件取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">head(as.data.frame(boxscore)[boxscore$player==&quot;LeBron James&quot;,])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##        id       date      game_id team_home_abbr team       player</div><div class="line">## 54     54 2012-10-30 201210300MIA            MIA  MIA LeBron James</div><div class="line">## 440   440 2012-11-02 201211020NYK            NYK  MIA LeBron James</div><div class="line">## 671   671 2012-11-03 201211030MIA            MIA  MIA LeBron James</div><div class="line">## 958   958 2012-11-05 201211050MIA            MIA  MIA LeBron James</div><div class="line">## 1266 1266 2012-11-07 201211070MIA            MIA  MIA LeBron James</div><div class="line">## 1431 1431 2012-11-09 201211090ATL            ATL  MIA LeBron James</div><div class="line">##      player_id minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb</div><div class="line">## 54   jamesle01   28.87  10  16   2   4   4   5      1      9     10</div><div class="line">## 440  jamesle01   36.68   8  16   2   3   5   6      0      7      7</div><div class="line">## 671  jamesle01   39.20   8  17   0   1   4   4      1      8      9</div><div class="line">## 958  jamesle01   30.18  10  17   2   3   1   3      3      8     11</div><div class="line">## 1266 jamesle01   29.98   7  12   2   3   4   4      4      8     12</div><div class="line">## 1431 jamesle01   35.67  10  17   0   2   1   3      2      9     11</div><div class="line">##      assists steals blocks turnovers fouls points plusminus</div><div class="line">## 54         3      2      0         0     2     26        12</div><div class="line">## 440        5      0      3         5     2     23       -21</div><div class="line">## 671       11      0      2         0     2     20         7</div><div class="line">## 958        1      0      0         3     2     23        25</div><div class="line">## 1266       8      1      0         2     1     20        18</div><div class="line">## 1431       9      1      0         2     2     21         0</div></pre></td></tr></table></figure>
<p>使用<code>data.table</code>这就会很简单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">head(dtb[player==&apos;LeBron James&apos;])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team       player player_id</div><div class="line">## 1: 2012-10-30 201210300MIA            MIA  MIA LeBron James jamesle01</div><div class="line">## 2: 2012-11-02 201211020NYK            NYK  MIA LeBron James jamesle01</div><div class="line">## 3: 2012-11-03 201211030MIA            MIA  MIA LeBron James jamesle01</div><div class="line">## 4: 2012-11-05 201211050MIA            MIA  MIA LeBron James jamesle01</div><div class="line">## 5: 2012-11-07 201211070MIA            MIA  MIA LeBron James jamesle01</div><div class="line">## 6: 2012-11-09 201211090ATL            ATL  MIA LeBron James jamesle01</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   28.87  10  16   2   4   4   5      1      9     10       3      2</div><div class="line">## 2:   36.68   8  16   2   3   5   6      0      7      7       5      0</div><div class="line">## 3:   39.20   8  17   0   1   4   4      1      8      9      11      0</div><div class="line">## 4:   30.18  10  17   2   3   1   3      3      8     11       1      0</div><div class="line">## 5:   29.98   7  12   2   3   4   4      4      8     12       8      1</div><div class="line">## 6:   35.67  10  17   0   2   1   3      2      9     11       9      1</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      0         0     2     26        12</div><div class="line">## 2:      3         5     2     23       -21</div><div class="line">## 3:      2         0     2     20         7</div><div class="line">## 4:      0         3     2     23        25</div><div class="line">## 5:      0         2     1     20        18</div><div class="line">## 6:      0         2     2     21         0</div></pre></td></tr></table></figure>
<p>选择所有<code>LAL</code>和<code>BOS</code>的行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp &lt;- dtb[team %in% c(&quot;LAL&quot;,&quot;BOS&quot;)] #调出湖人和凯尔特人的数据</div><div class="line">count&lt;-temp[, .(`出场次数`=.N), by=player] # 为每名球员计数</div><div class="line">head(count[order(-`出场次数`)],10) #排序</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">##               player 出场次数</div><div class="line">##  1:      Kobe Bryant      779</div><div class="line">##  2:      Paul Pierce      764</div><div class="line">##  3:       Lamar Odom      608</div><div class="line">##  4:      Rajon Rondo      567</div><div class="line">##  5: Kendrick Perkins      512</div><div class="line">##  6:      Luke Walton      492</div><div class="line">##  7:    Sasha Vujacic      485</div><div class="line">##  8:    Kevin Garnett      480</div><div class="line">##  9:     Andrew Bynum      466</div><div class="line">## 10:        Pau Gasol      462</div></pre></td></tr></table></figure>
<p>选择所有得分(<code>points</code>)大于50的数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp&lt;-dtb[points&gt;=50]</div><div class="line">count &lt;- temp[, .(`50+次数`=.N),by=player]</div><div class="line">count[order(-`50+次数`)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">##                player 50+次数</div><div class="line">##  1:       Kobe Bryant      20</div><div class="line">##  2:      LeBron James       9</div><div class="line">##  3:     Allen Iverson       5</div><div class="line">##  4:   Carmelo Anthony       3</div><div class="line">##  5:       Dwyane Wade       3</div><div class="line">##  6:    Gilbert Arenas       3</div><div class="line">##  7:     Dirk Nowitzki       3</div><div class="line">##  8:      Kevin Durant       2</div><div class="line">##  9:    Jamal Crawford       2</div><div class="line">## 10:         Ray Allen       2</div><div class="line">## 11:      Michael Redd       2</div><div class="line">## 12:     Stephen Curry       1</div><div class="line">## 13:    Deron Williams       1</div><div class="line">## 14:        Kevin Love       1</div><div class="line">## 15:  Brandon Jennings       1</div><div class="line">## 16:      Andre Miller       1</div><div class="line">## 17:       Tony Parker       1</div><div class="line">## 18:       Brandon Roy       1</div><div class="line">## 19:      Kevin Martin       1</div><div class="line">## 20:  Richard Hamilton       1</div><div class="line">## 21:      Vince Carter       1</div><div class="line">## 22:       Paul Pierce       1</div><div class="line">## 23: Amar&apos;e Stoudemire       1</div><div class="line">## 24:   Jermaine O&apos;Neal       1</div><div class="line">## 25:  Damon Stoudamire       1</div><div class="line">##                player 50+次数</div></pre></td></tr></table></figure>
<h2 id="操作data-table"><a href="#操作data-table" class="headerlink" title="操作data.table"></a>操作data.table</h2><h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><h4 id="data-frame-way"><a href="#data-frame-way" class="headerlink" title="data.frame way"></a>data.frame way</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb1 &lt;- data.table(letter=LETTERS, dtb)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">## Warning in data.table(letter = LETTERS, dtb): Item 1 is of size 26 but</div><div class="line">## maximum size is 236203 (recycled leaving remainder of 19 items)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb1$num &lt;- 1:dim(dtb1)[1]</div></pre></td></tr></table></figure>
<h4 id=""><a href="#" class="headerlink" title=":="></a><code>:=</code></h4><p><code>:=</code>可以为<code>data.table</code>添加项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dtb2 &lt;-copy(dtb)</div><div class="line">dtb2[, c(&quot;letter&quot;, &quot;num&quot;):=.(LETTERS, 1:.N)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">## Warning in `[.data.table`(dtb2, , `:=`(c(&quot;letter&quot;, &quot;num&quot;), .(LETTERS,</div><div class="line">## 1:.N))): Supplied 26 items to be assigned to 236203 items of column</div><div class="line">## &apos;letter&apos; (recycled leaving remainder of 19 items).</div></pre></td></tr></table></figure>
<h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[1:10, .(player, assists)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">##              player assists</div><div class="line">##  1:      A.J. Price       6</div><div class="line">##  2:    Emeka Okafor       0</div><div class="line">##  3:    Trevor Ariza       4</div><div class="line">##  4:    Bradley Beal       3</div><div class="line">##  5:   Trevor Booker       1</div><div class="line">##  6: Jordan Crawford       5</div><div class="line">##  7: Martell Webster       1</div><div class="line">##  8:      Jan Vesely       1</div><div class="line">##  9: Chris Singleton       2</div><div class="line">## 10:   Jannero Pargo       3</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[1:10]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">##           date      game_id team_home_abbr team          player player_id</div><div class="line">##  1: 2012-10-30 201210300CLE            CLE  WAS      A.J. Price priceaj01</div><div class="line">##  2: 2012-10-30 201210300CLE            CLE  WAS    Emeka Okafor okafoem01</div><div class="line">##  3: 2012-10-30 201210300CLE            CLE  WAS    Trevor Ariza arizatr01</div><div class="line">##  4: 2012-10-30 201210300CLE            CLE  WAS    Bradley Beal  bealbr01</div><div class="line">##  5: 2012-10-30 201210300CLE            CLE  WAS   Trevor Booker booketr01</div><div class="line">##  6: 2012-10-30 201210300CLE            CLE  WAS Jordan Crawford crawfjo02</div><div class="line">##  7: 2012-10-30 201210300CLE            CLE  WAS Martell Webster webstma02</div><div class="line">##  8: 2012-10-30 201210300CLE            CLE  WAS      Jan Vesely veselja01</div><div class="line">##  9: 2012-10-30 201210300CLE            CLE  WAS Chris Singleton singlch01</div><div class="line">## 10: 2012-10-30 201210300CLE            CLE  WAS   Jannero Pargo pargoja01</div><div class="line">##     minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">##  1:   29.40   2  13   2   9   1   1      1      1      2       6      0</div><div class="line">##  2:   24.58   4  10   0   0   2   4      5      2      7       0      0</div><div class="line">##  3:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">##  4:   21.55   2   8   2   4   2   2      0      3      3       3      1</div><div class="line">##  5:   16.75   2   9   0   1   0   0      1      0      1       1      1</div><div class="line">##  6:   28.70   4  13   0   6   3   4      1      2      3       5      1</div><div class="line">##  7:   23.42   4   6   1   3   0   0      0      3      3       1      2</div><div class="line">##  8:   21.23   3   4   0   0   1   4      3      1      4       1      0</div><div class="line">##  9:   17.18   2   7   0   1   0   0      2      2      4       2      2</div><div class="line">## 10:   16.35   2   6   1   4   2   2      0      1      1       3      0</div><div class="line">##     blocks turnovers fouls points plusminus</div><div class="line">##  1:      0         1     1      7       -11</div><div class="line">##  2:      4         1     1     10        -5</div><div class="line">##  3:      2         0     0      9        -9</div><div class="line">##  4:      0         2     1      8       -16</div><div class="line">##  5:      1         4     4      4       -15</div><div class="line">##  6:      1         1     1     11         0</div><div class="line">##  7:      0         0     1      9        -1</div><div class="line">##  8:      1         1     3      7        -2</div><div class="line">##  9:      0         1     2      4         1</div><div class="line">## 10:      0         1     3      7         7</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[1:10, .(player, asspts =c(points, assists))]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##              player asspts</div><div class="line">##  1:      A.J. Price      7</div><div class="line">##  2:    Emeka Okafor     10</div><div class="line">##  3:    Trevor Ariza      9</div><div class="line">##  4:    Bradley Beal      8</div><div class="line">##  5:   Trevor Booker      4</div><div class="line">##  6: Jordan Crawford     11</div><div class="line">##  7: Martell Webster      9</div><div class="line">##  8:      Jan Vesely      7</div><div class="line">##  9: Chris Singleton      4</div><div class="line">## 10:   Jannero Pargo      7</div><div class="line">## 11:      A.J. Price      6</div><div class="line">## 12:    Emeka Okafor      0</div><div class="line">## 13:    Trevor Ariza      4</div><div class="line">## 14:    Bradley Beal      3</div><div class="line">## 15:   Trevor Booker      1</div><div class="line">## 16: Jordan Crawford      5</div><div class="line">## 17: Martell Webster      1</div><div class="line">## 18:      Jan Vesely      1</div><div class="line">## 19: Chris Singleton      2</div><div class="line">## 20:   Jannero Pargo      3</div></pre></td></tr></table></figure>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p><code>DT[, c(&#39;var1name&#39;,&#39;var2name&#39;,...)]:=NULL</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dtb2[, c(&apos;letter&apos;, &apos;num&apos;):=NULL]</div><div class="line"># OR</div><div class="line">temp &lt;- copy(dtb)</div><div class="line">temp[, (1:2):=NULL]</div><div class="line">varnames &lt;- c(&apos;player&apos;,&apos;points&apos;)</div><div class="line">temp[, (varnames) :=NULL]</div><div class="line">names(temp)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">##  [1] &quot;team_home_abbr&quot; &quot;team&quot;           &quot;player_id&quot;      &quot;minutes&quot;       </div><div class="line">##  [5] &quot;fgm&quot;            &quot;fga&quot;            &quot;3pm&quot;            &quot;3pa&quot;           </div><div class="line">##  [9] &quot;ftm&quot;            &quot;fta&quot;            &quot;offreb&quot;         &quot;defreb&quot;        </div><div class="line">## [13] &quot;totreb&quot;         &quot;assists&quot;        &quot;steals&quot;         &quot;blocks&quot;        </div><div class="line">## [17] &quot;turnovers&quot;      &quot;fouls&quot;          &quot;plusminus&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">temp[,grep(&apos;^team&apos;, names(temp)):=NULL]</div><div class="line">names(temp)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">##  [1] &quot;player_id&quot; &quot;minutes&quot;   &quot;fgm&quot;       &quot;fga&quot;       &quot;3pm&quot;      </div><div class="line">##  [6] &quot;3pa&quot;       &quot;ftm&quot;       &quot;fta&quot;       &quot;offreb&quot;    &quot;defreb&quot;   </div><div class="line">## [11] &quot;totreb&quot;    &quot;assists&quot;   &quot;steals&quot;    &quot;blocks&quot;    &quot;turnovers&quot;</div><div class="line">## [16] &quot;fouls&quot;     &quot;plusminus&quot;</div></pre></td></tr></table></figure>
<h3 id="更改"><a href="#更改" class="headerlink" title="更改"></a>更改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">temp &lt;- copy(dtb)</div><div class="line">temp[, c(&quot;firstName&quot;, &quot;givenName&quot;):=tstrsplit(player, &quot; &quot;)] #tstrsplit将player分成名和姓氏</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">## Warning in `[.data.table`(temp, , `:=`(c(&quot;firstName&quot;, &quot;givenName&quot;),</div><div class="line">## tstrsplit(player, : Supplied 2 columns to be assigned a list (length 4) of</div><div class="line">## values (2 unused)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail(temp)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team        player player_id</div><div class="line">## 1: 2005-06-23 200506230SAS            SAS  SAS   Tony Parker parketo01</div><div class="line">## 2: 2005-06-23 200506230SAS            SAS  SAS Manu Ginobili ginobma01</div><div class="line">## 3: 2005-06-23 200506230SAS            SAS  SAS Nazr Mohammed mohamna01</div><div class="line">## 4: 2005-06-23 200506230SAS            SAS  SAS  Robert Horry horryro01</div><div class="line">## 5: 2005-06-23 200506230SAS            SAS  SAS   Brent Barry barrybr01</div><div class="line">## 6: 2005-06-23 200506230SAS            SAS  SAS   Devin Brown brownde02</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:      38   3  11   1   3   1   2      0      2      2       3      0</div><div class="line">## 2:      35   8  13   2   2   5   5      0      5      5       4      1</div><div class="line">## 3:      22   0   3   0   0   0   0      1      6      7       0      0</div><div class="line">## 4:      32   4   7   2   4   5   6      2      3      5       1      1</div><div class="line">## 5:      29   2   3   1   1   0   0      0      4      4       2      2</div><div class="line">## 6:       1   0   0   0   0   0   0      0      0      0       0      0</div><div class="line">##    blocks turnovers fouls points plusminus firstName givenName</div><div class="line">## 1:      0         1     4      8        -1      Tony    Parker</div><div class="line">## 2:      0         3     3     23         5      Manu  Ginobili</div><div class="line">## 3:      2         0     3      0        -4      Nazr  Mohammed</div><div class="line">## 4:      1         1     1     15        17    Robert     Horry</div><div class="line">## 5:      1         2     2      5        14     Brent     Barry</div><div class="line">## 6:      0         0     0      0         0     Devin     Brown</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp &lt;- copy(dtb)</div><div class="line">temp[, `:=`(points=points+1, turnovers=turnovers-1)]</div><div class="line">head(temp)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">##          date      game_id team_home_abbr team          player player_id</div><div class="line">## 1: 2012-10-30 201210300CLE            CLE  WAS      A.J. Price priceaj01</div><div class="line">## 2: 2012-10-30 201210300CLE            CLE  WAS    Emeka Okafor okafoem01</div><div class="line">## 3: 2012-10-30 201210300CLE            CLE  WAS    Trevor Ariza arizatr01</div><div class="line">## 4: 2012-10-30 201210300CLE            CLE  WAS    Bradley Beal  bealbr01</div><div class="line">## 5: 2012-10-30 201210300CLE            CLE  WAS   Trevor Booker booketr01</div><div class="line">## 6: 2012-10-30 201210300CLE            CLE  WAS Jordan Crawford crawfjo02</div><div class="line">##    minutes fgm fga 3pm 3pa ftm fta offreb defreb totreb assists steals</div><div class="line">## 1:   29.40   2  13   2   9   1   1      1      1      2       6      0</div><div class="line">## 2:   24.58   4  10   0   0   2   4      5      2      7       0      0</div><div class="line">## 3:   24.58   3   8   2   4   1   2      1      2      3       4      3</div><div class="line">## 4:   21.55   2   8   2   4   2   2      0      3      3       3      1</div><div class="line">## 5:   16.75   2   9   0   1   0   0      1      0      1       1      1</div><div class="line">## 6:   28.70   4  13   0   6   3   4      1      2      3       5      1</div><div class="line">##    blocks turnovers fouls points plusminus</div><div class="line">## 1:      0         0     1      8       -11</div><div class="line">## 2:      4         0     1     11        -5</div><div class="line">## 3:      2        -1     0     10        -9</div><div class="line">## 4:      0         1     1      9       -16</div><div class="line">## 5:      1         3     4      5       -15</div><div class="line">## 6:      1         0     1     12         0</div></pre></td></tr></table></figure>
<h3 id="Summarize"><a href="#Summarize" class="headerlink" title="Summarize"></a>Summarize</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">library(lubridate)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">## </div><div class="line">## Attaching package: &apos;lubridate&apos;</div><div class="line">## </div><div class="line">## The following object is masked from &apos;package:plyr&apos;:</div><div class="line">## </div><div class="line">##     here</div><div class="line">## </div><div class="line">## The following objects are masked from &apos;package:data.table&apos;:</div><div class="line">## </div><div class="line">##     hour, mday, month, quarter, wday, week, yday, year</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp&lt;- copy(dtb)</div><div class="line">temp[, year:=year(date)] # 选取2012的数据</div><div class="line">temp2012 &lt;- temp[year==2012]</div></pre></td></tr></table></figure>
<p>####计算助攻失误比这个数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ass2turn&lt;- temp2012[, .(ass.sum=sum(assists),turn.sum=sum(turnovers), ass2turn=sum(assists)/sum(turnovers)), by=player]</div><div class="line">ass2turn &lt;- ass2turn[!grep(&quot;Inf&quot;, ass2turn)]# 除去失误为0的数据</div><div class="line">head(ass2turn[order(-ass2turn)],10) # 助攻/失误比前10名</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">##             player ass.sum turn.sum ass2turn</div><div class="line">##  1: Josh Childress      37        8 4.625000</div><div class="line">##  2:  Jose Calderon     680      157 4.331210</div><div class="line">##  3:  Kent Bazemore       4        1 4.000000</div><div class="line">##  4:    Tony Battie      16        4 4.000000</div><div class="line">##  5:     Mike Bibby      87       22 3.954545</div><div class="line">##  6:     Chris Paul     890      226 3.938053</div><div class="line">##  7:    Matt Bonner      78       22 3.545455</div><div class="line">##  8:   Julyan Stone      39       11 3.545455</div><div class="line">##  9:    Brandon Roy      23        7 3.285714</div><div class="line">## 10:    Rajon Rondo    1113      342 3.254386</div></pre></td></tr></table></figure>
<h2 id="by-函数"><a href="#by-函数" class="headerlink" title="by 函数"></a><code>by</code> 函数</h2><p>我们想获得所有的球员的年均数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#dtb_3 &lt;- dtb[, c(24, 5, 7:23), with = FALSE]</div><div class="line">#stat.boxscore &lt;- ddply(dtb_3, .variables = c(&quot;year&quot;, &quot;player&quot;), .fun = function(dtb_sub) &#123; round(colMeans(dtb_sub[, -c(1, 2)]), 2)&#125;)</div><div class="line">#head(stat.boxscore)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dtb[, year:=year(date)]</div><div class="line">head(dtb[,.(Avg_pts=mean(points)),by=.(player,year)])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##             player year   Avg_pts</div><div class="line">## 1:      A.J. Price 2012  4.907692</div><div class="line">## 2:    Emeka Okafor 2012  8.711538</div><div class="line">## 3:    Trevor Ariza 2012 10.132075</div><div class="line">## 4:    Bradley Beal 2012 12.115385</div><div class="line">## 5:   Trevor Booker 2012  8.482143</div><div class="line">## 6: Jordan Crawford 2012 15.102273</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ass2turn.summary&lt;-ass2turn[, .(count=.N), by=.(ass.turn=round(ass2turn,1))]</div><div class="line">ass.order&lt;- ass2turn.summary[order(-ass.turn)]</div><div class="line">head(ass.order,10)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">##     ass.turn count</div><div class="line">##  1:      4.6     1</div><div class="line">##  2:      4.3     1</div><div class="line">##  3:      4.0     3</div><div class="line">##  4:      3.9     1</div><div class="line">##  5:      3.5     2</div><div class="line">##  6:      3.3     2</div><div class="line">##  7:      3.2     1</div><div class="line">##  8:      3.1     1</div><div class="line">##  9:      3.0     5</div><div class="line">## 10:      2.9     2</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(ass.order, aes(x=ass.turn,y=count))+geom_histogram(stat=&quot;identity&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## Warning: Removed 1 rows containing missing values (position_stack).</div></pre></td></tr></table></figure>
<p><img src="/public/img/data.table.png" alt=""> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#stat.boxscore &lt;- data.table(stat.boxscore)</div><div class="line">#stat.boxscore[order(-points)][, .(player=head(player,10), pts=head(points,10)), by = .(year)][order(year)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dtm &lt;- data.table(mtcars)</div><div class="line">dtm[, .(cumulative_su = cumsum(wt)), by = .(cyl, gear)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">##     cyl gear cumulative_su</div><div class="line">##  1:   6    4         2.620</div><div class="line">##  2:   6    4         5.495</div><div class="line">##  3:   6    4         8.935</div><div class="line">##  4:   6    4        12.375</div><div class="line">##  5:   4    4         2.320</div><div class="line">##  6:   4    4         5.510</div><div class="line">##  7:   4    4         8.660</div><div class="line">##  8:   4    4        10.860</div><div class="line">##  9:   4    4        12.475</div><div class="line">## 10:   4    4        14.310</div><div class="line">## 11:   4    4        16.245</div><div class="line">## 12:   4    4        19.025</div><div class="line">## 13:   6    3         3.215</div><div class="line">## 14:   6    3         6.675</div><div class="line">## 15:   8    3         3.440</div><div class="line">## 16:   8    3         7.010</div><div class="line">## 17:   8    3        11.080</div><div class="line">## 18:   8    3        14.810</div><div class="line">## 19:   8    3        18.590</div><div class="line">## 20:   8    3        23.840</div><div class="line">## 21:   8    3        29.264</div><div class="line">## 22:   8    3        34.609</div><div class="line">## 23:   8    3        38.129</div><div class="line">## 24:   8    3        41.564</div><div class="line">## 25:   8    3        45.404</div><div class="line">## 26:   8    3        49.249</div><div class="line">## 27:   4    3         2.465</div><div class="line">## 28:   4    5         2.140</div><div class="line">## 29:   4    5         3.653</div><div class="line">## 30:   8    5         3.170</div><div class="line">## 31:   8    5         6.740</div><div class="line">## 32:   6    5         2.770</div><div class="line">##     cyl gear cumulative_su</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dtm[,model:=row.names(mtcars)]</div><div class="line">dtm[, .(model, mpg), by = .(cyl, am)][order(-mpg)][, .(model = head(model, 2), mpg = head(mpg, 2)), by = .(cyl, am)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">##     cyl am             model  mpg</div><div class="line">##  1:   4  1    Toyota Corolla 33.9</div><div class="line">##  2:   4  1          Fiat 128 32.4</div><div class="line">##  3:   4  0         Merc 240D 24.4</div><div class="line">##  4:   4  0          Merc 230 22.8</div><div class="line">##  5:   6  0    Hornet 4 Drive 21.4</div><div class="line">##  6:   6  0          Merc 280 19.2</div><div class="line">##  7:   6  1         Mazda RX4 21.0</div><div class="line">##  8:   6  1     Mazda RX4 Wag 21.0</div><div class="line">##  9:   8  0  Pontiac Firebird 19.2</div><div class="line">## 10:   8  0 Hornet Sportabout 18.7</div><div class="line">## 11:   8  1    Ford Pantera L 15.8</div><div class="line">## 12:   8  1     Maserati Bora 15.0</div></pre></td></tr></table></figure>
<p><code>by</code>可以链式(chaining)使用<br><strong>2004-2013年每队赛季得分榜前两名</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">teamleader&lt;- dtb[, .(player, points), by=.(year,team)][order(-points)][, .(player=head(player,2), points=head(points,2)), by =.(year, team)][order(year,team)]</div><div class="line">head(teamleader)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##    year team            player points</div><div class="line">## 1: 2004  ATL    Antoine Walker     36</div><div class="line">## 2: 2004  ATL    Antoine Walker     31</div><div class="line">## 3: 2004  BOS       Paul Pierce     37</div><div class="line">## 4: 2004  BOS       Paul Pierce     35</div><div class="line">## 5: 2004  BRK Richard Jefferson     42</div><div class="line">## 6: 2004  BRK Richard Jefferson     38</div></pre></td></tr></table></figure>
<h4 id="SD和-SDcols"><a href="#SD和-SDcols" class="headerlink" title=".SD和.SDcols"></a><code>.SD</code>和<code>.SDcols</code></h4><p>回忆前面求所有球员的年均数据，我们可以使用下面的方法实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#data.table(dtb_3)[, lapply(.SD, function(x)round(mean(x),2)), by = .(year,player)][order(year)]</div><div class="line">#OR</div><div class="line">dtb[, lapply(.SD, function(x)round(mean(x),2)),.SDcols=7:23, by=.(year,player)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">##       year               player minutes  fgm   fga  3pm  3pa  ftm  fta</div><div class="line">##    1: 2012           A.J. Price   16.10 1.74  4.94 0.80 2.52 0.63 0.77</div><div class="line">##    2: 2012         Emeka Okafor   26.02 3.79  7.65 0.00 0.00 1.13 2.04</div><div class="line">##    3: 2012         Trevor Ariza   30.63 3.83  9.47 0.68 2.23 1.79 2.25</div><div class="line">##    4: 2012         Bradley Beal   29.97 4.19 11.88 1.12 4.15 2.62 3.04</div><div class="line">##    5: 2012        Trevor Booker   25.87 3.73  7.16 0.02 0.07 1.00 1.68</div><div class="line">##   ---                                                                 </div><div class="line">## 4985: 2005          Vlade Divac   13.29 1.43  3.00 0.00 0.00 1.14 1.71</div><div class="line">## 4986: 2005       Glenn Robinson   12.27 2.27  5.55 0.23 0.73 1.59 1.82</div><div class="line">## 4987: 2005            Omar Cook   14.80 2.00  4.80 0.00 0.80 0.60 1.20</div><div class="line">## 4988: 2005            Ndudi Ebi   27.00 5.50 10.50 0.00 0.50 2.50 4.50</div><div class="line">## 4989: 2005 Lawrence Funderburke    7.00 0.57  1.14 0.00 0.00 0.57 1.00</div><div class="line">##       offreb defreb totreb assists steals blocks turnovers fouls points</div><div class="line">##    1:   0.35   1.35   1.71    2.63   0.46   0.05      0.88  0.83   4.91</div><div class="line">##    2:   2.37   4.85   7.21    0.94   0.60   1.12      1.23  2.13   8.71</div><div class="line">##    3:   1.02   4.06   5.08    3.02   1.75   0.57      1.77  1.60  10.13</div><div class="line">##    4:   0.65   2.92   3.58    2.50   0.92   0.42      1.62  1.92  12.12</div><div class="line">##    5:   2.41   4.18   6.59    0.93   1.04   0.86      1.25  2.77   8.48</div><div class="line">##   ---                                                                  </div><div class="line">## 4985:   1.71   1.57   3.29    2.14   0.29   0.00      1.43  2.71   4.00</div><div class="line">## 4986:   0.27   1.77   2.05    0.41   0.32   0.45      0.59  1.77   6.36</div><div class="line">## 4987:   0.40   1.00   1.40    4.40   1.20   0.20      1.20  1.20   4.60</div><div class="line">## 4988:   3.00   5.00   8.00    0.50   0.50   0.50      1.50  3.50  13.50</div><div class="line">## 4989:   0.14   0.71   0.86    0.14   0.00   0.00      0.00  1.43   1.71</div><div class="line">##       plusminus</div><div class="line">##    1:     -0.60</div><div class="line">##    2:     -4.71</div><div class="line">##    3:     -4.68</div><div class="line">##    4:     -7.04</div><div class="line">##    5:     -4.14</div><div class="line">##   ---          </div><div class="line">## 4985:     -4.71</div><div class="line">## 4986:      0.59</div><div class="line">## 4987:      4.20</div><div class="line">## 4988:      7.00</div><div class="line">## 4989:      1.71</div></pre></td></tr></table></figure>
<p><strong>2004-2013年NBA得分榜</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtb[, lapply(.SD, function(x) round(mean(x),2)),.SDcols=22, by=.(year,player)][order(year, -points)][, .(rank =1:10, player=head(player,10),pts=head(points,10)), by=year]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line">##      year rank            player   pts</div><div class="line">##   1: 2004    1     Allen Iverson 28.89</div><div class="line">##   2: 2004    2       Kobe Bryant 28.41</div><div class="line">##   3: 2004    3     Dirk Nowitzki 26.29</div><div class="line">##   4: 2004    4 Amar&apos;e Stoudemire 25.59</div><div class="line">##   5: 2004    5 Metta World Peace 24.57</div><div class="line">##   6: 2004    6      LeBron James 24.41</div><div class="line">##   7: 2004    7     Tracy McGrady 23.96</div><div class="line">##   8: 2004    8       Dwyane Wade 23.93</div><div class="line">##   9: 2004    9         Ray Allen 23.82</div><div class="line">##  10: 2004   10 Richard Jefferson 23.21</div><div class="line">##  11: 2005    1     Allen Iverson 32.58</div><div class="line">##  12: 2005    2       Kobe Bryant 29.40</div><div class="line">##  13: 2005    3      LeBron James 29.33</div><div class="line">##  14: 2005    4    Gilbert Arenas 27.18</div><div class="line">##  15: 2005    5 Amar&apos;e Stoudemire 27.08</div><div class="line">##  16: 2005    6      Vince Carter 26.69</div><div class="line">##  17: 2005    7     Tracy McGrady 26.40</div><div class="line">##  18: 2005    8     Dirk Nowitzki 25.70</div><div class="line">##  19: 2005    9       Dwyane Wade 25.54</div><div class="line">##  20: 2005   10         Ray Allen 24.54</div><div class="line">##  21: 2006    1       Kobe Bryant 33.52</div><div class="line">##  22: 2006    2     Allen Iverson 31.65</div><div class="line">##  23: 2006    3      LeBron James 30.33</div><div class="line">##  24: 2006    4    Gilbert Arenas 30.00</div><div class="line">##  25: 2006    5   Carmelo Anthony 28.30</div><div class="line">##  26: 2006    6       Dwyane Wade 27.72</div><div class="line">##  27: 2006    7       Paul Pierce 26.93</div><div class="line">##  28: 2006    8      Michael Redd 26.51</div><div class="line">##  29: 2006    9     Dirk Nowitzki 25.77</div><div class="line">##  30: 2006   10      Vince Carter 25.08</div><div class="line">##  31: 2007    1       Kobe Bryant 31.01</div><div class="line">##  32: 2007    2      LeBron James 27.25</div><div class="line">##  33: 2007    3   Carmelo Anthony 26.78</div><div class="line">##  34: 2007    4    Gilbert Arenas 26.46</div><div class="line">##  35: 2007    5       Dwyane Wade 25.87</div><div class="line">##  36: 2007    6     Tracy McGrady 25.37</div><div class="line">##  37: 2007    7     Allen Iverson 25.01</div><div class="line">##  38: 2007    8      Michael Redd 24.48</div><div class="line">##  39: 2007    9         Ray Allen 23.95</div><div class="line">##  40: 2007   10      Vince Carter 23.72</div><div class="line">##  41: 2008    1      LeBron James 29.35</div><div class="line">##  42: 2008    2       Kobe Bryant 28.47</div><div class="line">##  43: 2008    3       Dwyane Wade 26.65</div><div class="line">##  44: 2008    4     Dirk Nowitzki 25.31</div><div class="line">##  45: 2008    5 Amar&apos;e Stoudemire 24.95</div><div class="line">##  46: 2008    6   Carmelo Anthony 23.78</div><div class="line">##  47: 2008    7        Chris Bosh 23.71</div><div class="line">##  48: 2008    8     Allen Iverson 23.51</div><div class="line">##  49: 2008    9     Danny Granger 22.87</div><div class="line">##  50: 2008   10      Kevin Martin 22.83</div><div class="line">##  51: 2009    1      LeBron James 29.77</div><div class="line">##  52: 2009    2       Dwyane Wade 29.28</div><div class="line">##  53: 2009    3       Kobe Bryant 28.75</div><div class="line">##  54: 2009    4      Kevin Durant 27.41</div><div class="line">##  55: 2009    5   Carmelo Anthony 26.97</div><div class="line">##  56: 2009    6      Kevin Martin 26.09</div><div class="line">##  57: 2009    7     Danny Granger 25.82</div><div class="line">##  58: 2009    8     Dirk Nowitzki 25.72</div><div class="line">##  59: 2009    9       Brandon Roy 22.90</div><div class="line">##  60: 2009   10        Chris Bosh 22.73</div><div class="line">##  61: 2010    1      Kevin Durant 29.76</div><div class="line">##  62: 2010    2      LeBron James 27.89</div><div class="line">##  63: 2010    3       Dwyane Wade 26.29</div><div class="line">##  64: 2010    4   Carmelo Anthony 26.00</div><div class="line">##  65: 2010    5       Kobe Bryant 25.88</div><div class="line">##  66: 2010    6       Monta Ellis 25.45</div><div class="line">##  67: 2010    7 Amar&apos;e Stoudemire 24.96</div><div class="line">##  68: 2010    8     Dirk Nowitzki 24.84</div><div class="line">##  69: 2010    9      Derrick Rose 23.24</div><div class="line">##  70: 2010   10     Danny Granger 22.84</div><div class="line">##  71: 2011    1      Kevin Durant 27.67</div><div class="line">##  72: 2011    2      LeBron James 27.29</div><div class="line">##  73: 2011    3   Carmelo Anthony 26.20</div><div class="line">##  74: 2011    4      Derrick Rose 25.73</div><div class="line">##  75: 2011    5       Dwyane Wade 25.36</div><div class="line">##  76: 2011    6       Kobe Bryant 24.97</div><div class="line">##  77: 2011    7     Dirk Nowitzki 23.93</div><div class="line">##  78: 2011    8     Dwight Howard 23.84</div><div class="line">##  79: 2011    9     Blake Griffin 23.48</div><div class="line">##  80: 2011   10 Amar&apos;e Stoudemire 23.32</div><div class="line">##  81: 2012    1       Kobe Bryant 28.96</div><div class="line">##  82: 2012    2      Kevin Durant 28.26</div><div class="line">##  83: 2012    3      LeBron James 27.36</div><div class="line">##  84: 2012    4   Carmelo Anthony 24.60</div><div class="line">##  85: 2012    5        Kevin Love 24.40</div><div class="line">##  86: 2012    6 Russell Westbrook 23.29</div><div class="line">##  87: 2012    7      Derrick Rose 22.00</div><div class="line">##  88: 2012    8       Dwyane Wade 21.90</div><div class="line">##  89: 2012    9 LaMarcus Aldridge 21.51</div><div class="line">##  90: 2012   10     Dirk Nowitzki 21.08</div><div class="line">##  91: 2013    1   Carmelo Anthony 28.76</div><div class="line">##  92: 2013    2      Kevin Durant 28.47</div><div class="line">##  93: 2013    3      LeBron James 26.71</div><div class="line">##  94: 2013    4      James Harden 25.89</div><div class="line">##  95: 2013    5       Kobe Bryant 25.62</div><div class="line">##  96: 2013    6     Stephen Curry 24.51</div><div class="line">##  97: 2013    7 Russell Westbrook 24.17</div><div class="line">##  98: 2013    8      Kyrie Irving 22.32</div><div class="line">##  99: 2013    9 LaMarcus Aldridge 21.06</div><div class="line">## 100: 2013   10       Tony Parker 21.00</div><div class="line">##      year rank            player   pts</div></pre></td></tr></table></figure>
<h2 id="需要注意的事情"><a href="#需要注意的事情" class="headerlink" title="需要注意的事情"></a>需要注意的事情</h2><h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><p>如果我们要新建某个<code>data.table</code>的备份，我们使用<code>copy()</code>,而不能简单的使用<code>&lt;-</code>，因为后者可能会造成联动,你改变新的变量的时候，前者也会发生变化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">DT &lt;- as.data.table(mtcars[1:5, 1:5])</div><div class="line">DT1 &lt;- DT</div><div class="line"></div><div class="line"># Check DT1</div><div class="line">DT1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">##     mpg cyl disp  hp drat</div><div class="line">## 1: 21.0   6  160 110 3.90</div><div class="line">## 2: 21.0   6  160 110 3.90</div><div class="line">## 3: 22.8   4  108  93 3.85</div><div class="line">## 4: 21.4   6  258 110 3.08</div><div class="line">## 5: 18.7   8  360 175 3.15</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">DT1 &lt;- DT[, model:=rownames(mtcars)[1:5]]</div><div class="line"># Check DT</div><div class="line">DT</div></pre></td></tr></table></figure>
<h2 id="和-的区别"><a href="#和-的区别" class="headerlink" title="=和:=的区别"></a><code>=</code>和<code>:=</code>的区别</h2><p>两者都会创建新的列，前者新建这个列，不改变原来的<code>data.table</code>,后者会在原来的<code>data.table</code>添加列。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[测试:使用MathJax输入LaTeX公式]]></title>
      <url>http://changshun.github.io/2015/10/06/%E6%8A%80%E6%9C%AF/2015-10-06-Mathjax/</url>
      <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>



<figure class="highlight plain"><figcaption><span>type="text/javascript"</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>在 <code>_config.yml</code> 配置添加如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">auto_ids: true</div><div class="line">  footnote_nr: 1</div><div class="line">  entity_output: as_char</div><div class="line">  toc_levels: 1..6</div><div class="line">  use_coderay: false</div><div class="line">  mathjax: true</div></pre></td></tr></table></figure>
<p>$$\bar{Y} = AK^{\alpha}L^{1-\alpha}$$</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[在Rmarkdown使用中文的几种方法]]></title>
      <url>http://changshun.github.io/2015/10/06/%E6%8A%80%E6%9C%AF/rmarkdown/</url>
      <content type="html"><![CDATA[<h1 id="在Rmarkdown使用中文的几种方法"><a href="#在Rmarkdown使用中文的几种方法" class="headerlink" title="在Rmarkdown使用中文的几种方法"></a>在<code>Rmarkdown</code>使用中文的几种方法</h1><h2 id="方法-一：加载包"><a href="#方法-一：加载包" class="headerlink" title="方法 一：加载包"></a>方法 一：加载包</h2><p>在<code>Rmd</code>文档头加载<code>xeCJK</code>包, 如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">header-includes:</div><div class="line">- \usepackage&#123;xeCJK&#125;</div></pre></td></tr></table></figure>
<p><img src="/img/rmarkdown/xecjk.png" alt="xecjk"></p>
<p><code>Knit PDF</code>前点击旁边的设置, 在<code>高级设置</code>的选项里设置<code>LaTeX Engine</code>为<code>xelatex</code></p>
<h2 id="方法-二：-修改default-tex文件"><a href="#方法-二：-修改default-tex文件" class="headerlink" title="方法 二： 修改default.tex文件"></a>方法 二： 修改<code>default.tex</code>文件</h2><p>进入<code>R</code>的安装路径下<code>library</code>的<code>rmarkdown</code>的路径，（<code>/library/rmarkdown/rmd/latex</code>） 进入在<code>default.tex</code>文件内添加一行<code>\usepackage{xeCJK}</code><br>然后再运行含有中文汉字的<code>Rmd</code>文件。</p>
<blockquote>
<p>问：如何知道<code>library</code>的路径？</p>
<p>答： <code>.libPaths()</code></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac下安装R和Rstudio]]></title>
      <url>http://changshun.github.io/2015/10/06/%E6%8A%80%E6%9C%AF/2015-10-06-install-R-Mac/</url>
      <content type="html"><![CDATA[<p><section id="table-of-contents" class="toc"><br>  <header><br>    <h3>Overview</h3><br>  </header></section></p>
<p><div id="drawer" markdown="1"></div></p>
<ul>
<li>Auto generated table of contents<br>{:toc}<br><br><!-- /#table-of-contents --></li>
</ul>
<blockquote>
<p>本教程参考：<a href="http://changshun.github.io/tutorial/2015/10/06/Window%E4%B8%8B%E5%AE%89%E8%A3%85R%E5%92%8CRstudio.html">Window下安装R和Rstudio</a></p>
</blockquote>
<h2 id="1-安装R"><a href="#1-安装R" class="headerlink" title="1.安装R"></a>1.安装R</h2><h3 id="1-1-下载R"><a href="#1-1-下载R" class="headerlink" title="1.1 下载R"></a>1.1 下载R</h3><hr>
<p>你能够从<a href="http://mirrors.xmu.edu.cn/CRAN/" target="_blank" rel="external">http://mirrors.xmu.edu.cn/CRAN/</a>上下载最新的<code>R</code>.<br><img src="http://i.imgbox.com/CG0TTtSs.png" alt="Path"></p>
<h3 id="1-2-安装R"><a href="#1-2-安装R" class="headerlink" title="1.2 安装R"></a>1.2 安装R</h3><hr>
<p><img src="http://i.imgbox.com/Z7H0za0A.png" alt=""></p>
<p><strong>注意</strong>: 尽量不要安装到中文路径下， 以后使用时可能会有麻烦</p>
<p><img src="http://i.imgbox.com/xS53DAon.png" alt="bit"></p>
<p><img src="http://i.imgbox.com/Z7H0za0A.png" alt="成功"></p>
<h2 id="2-安装RStudio"><a href="#2-安装RStudio" class="headerlink" title="2. 安装RStudio"></a>2. 安装RStudio</h2><hr>
<h3 id="2-1-下载RStudio"><a href="#2-1-下载RStudio" class="headerlink" title="2.1 下载RStudio"></a>2.1 下载RStudio</h3><hr>
<p>你能够从<a href="https://www.rstudio.com/" target="_blank" rel="external">RStudio官网</a>上下载最新的<code>RStudio</code>.<br><img src="http://i.imgbox.com/tK6TOXLp.png" alt="Path"></p>
<h3 id="2-2-安装RStudio"><a href="#2-2-安装RStudio" class="headerlink" title="2.2 安装RStudio"></a>2.2 安装RStudio</h3><hr>
<p><img src="http://i.imgbox.com/CrbrYKfx.jpg" alt=""></p>
<p><img src="http://i.imgbox.com/2yJKBFtP.png" alt=""></p>
<h2 id="3-更新R"><a href="#3-更新R" class="headerlink" title="3. 更新R"></a>3. 更新R</h2><hr>
<h3 id="3-1-Fool-Way"><a href="#3-1-Fool-Way" class="headerlink" title="3.1 Fool Way"></a>3.1 Fool Way</h3><ol>
<li>备份你的程序包<br>重新安装R软件时可能会把你已经安装的<code>package</code>覆盖， 为了避免，我们需要先进行备份(将<code>library</code>文件夹复制到他处)。</li>
</ol>
<p>程序包位置：<code>/Library/Frameworks/R.framework/Versions/3.2/Resources/library</code></p>
<p><strong>如何进入路径</strong></p>
<blockquote>
<p>打开<code>finder</code>, 使用<code>⌘(command)+⇧（shift）+G</code>, 输入上面路径就可以进入路径<br><img src="http://i.imgbox.com/K68vFhUO.png" alt="path2"></p>
</blockquote>
<ol>
<li>重复<code>1.1</code>和<code>1.2</code></li>
</ol>
<h3 id="3-2-The-Harder-Way"><a href="#3-2-The-Harder-Way" class="headerlink" title="3.2 The Harder Way"></a>3.2 The Harder Way</h3><hr>
<p>Now we set up the global library for R. More details about this is described in [Tal Galili’s blog post][1]. Although you are using the latest version of R, you can still follow my steps. It will help you set a global library for R. This will prevent some troubles in the future.</p>
<p>Open your R. Run <code>chooseCRANmirror()</code> command line(Type it and hit <code>ENTER</code>) .Choose <code>China(Xiamen)</code>.</p>
<p><img src="http://i.imgbox.com/nMC12nzx.jpg" alt="mirror" title="Choose Mirror"></p>
<p>Run the following codes line by line.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source(&quot;http://www.r-statistics.com/wp-content/uploads/2010/04/upgrading-R-on-windows.r.txt&quot;)</div><div class="line">Old.R.RunMe()</div></pre></td></tr></table></figure></p>
<p><img src="http://i.imgbox.com/yn5SmnIH.jpg" alt="oldr" title="Set global lib"></p>
<p>It will ask you whether or not to quit R. Just type <code>n</code> and hit <code>ENTER</code>. Then run <code>New.R.RunMe()</code> just the same way.</p>
<p>Once you have done these, from now on, whenever you want to update to a new version of R in the future, all you will need to do are the following <strong>TWO</strong> steps:</p>
<ol>
<li>Download and install the new version of R</li>
<li>Open your new R and run the following codes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source(&quot;http://www.r-statistics.com/wp-content/uploads/2010/04/upgrading-R-on-windows.r.txt&quot;)</div><div class="line">New.R.RunMe()</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Window下安装R和Rstudio]]></title>
      <url>http://changshun.github.io/2015/10/06/%E6%8A%80%E6%9C%AF/2015-10-06-install-R-Windows/</url>
      <content type="html"><![CDATA[<p><section id="table-of-contents" class="toc"><br>  <header><br>    <h3>Overview</h3><br>  </header></section></p>
<p><div id="drawer" markdown="1"></div></p>
<ul>
<li>Auto generated table of contents<br>{:toc}<br><br><!-- /#table-of-contents --></li>
</ul>
<h2 id="1-安装R"><a href="#1-安装R" class="headerlink" title="1.安装R"></a>1.安装R</h2><h3 id="1-1-下载R"><a href="#1-1-下载R" class="headerlink" title="1.1 下载R"></a>1.1 下载R</h3><hr>
<p>你能够从<a href="http://mirrors.xmu.edu.cn/CRAN/" target="_blank" rel="external">http://mirrors.xmu.edu.cn/CRAN/</a>上下载最新的<code>R</code>.<br><img src="http://i.imgbox.com/VGVYmBnr.png" alt="Path"></p>
<h3 id="1-2-安装R"><a href="#1-2-安装R" class="headerlink" title="1.2 安装R"></a>1.2 安装R</h3><hr>
<p><img src="http://i.imgbox.com/8GDBWR9w.png" alt="CRAN"></p>
<p><strong>注意</strong>: 尽量不要安装到中文路径下， 以后使用时可能会有麻烦</p>
<p><img src="http://i.imgbox.com/sHKrGASq.png" alt="bit"></p>
<p><img src="http://i.imgbox.com/nQ7cCpWC.png" alt="成功"></p>
<h2 id="2-安装RStudio"><a href="#2-安装RStudio" class="headerlink" title="2. 安装RStudio"></a>2. 安装RStudio</h2><hr>
<h3 id="2-1-下载RStudio"><a href="#2-1-下载RStudio" class="headerlink" title="2.1 下载RStudio"></a>2.1 下载RStudio</h3><hr>
<p>你能够从<a href="https://www.rstudio.com/" target="_blank" rel="external">RStudio官网</a>上下载最新的<code>RStudio</code>.<br><img src="http://i.imgbox.com/tK6TOXLp.png" alt="Path"></p>
<h3 id="2-2-安装RStudio"><a href="#2-2-安装RStudio" class="headerlink" title="2.2 安装RStudio"></a>2.2 安装RStudio</h3><hr>
<p><img src="http://i.imgbox.com/fzKEm7t5.png" alt=""></p>
<p><img src="http://i.imgbox.com/iCe2KoYK.png" alt=""></p>
<h2 id="3-更新R"><a href="#3-更新R" class="headerlink" title="3. 更新R"></a>3. 更新R</h2><hr>
<h3 id="3-1-Fool-Way"><a href="#3-1-Fool-Way" class="headerlink" title="3.1 Fool Way"></a>3.1 Fool Way</h3><ol>
<li><p>备份你的程序包<br>重新安装R软件时可能会把你已经安装的<code>package</code>覆盖， 为了避免，我们需要先进行备份(将<code>library</code>文件夹复制到他处)。<br>程序包位置：<code>C:\XXX\R\R-3.2.2\library</code><br><img src="http://i.imgbox.com/oRnNGM5x.png" alt="path2"></p>
</li>
<li><p>重复<code>1.1</code>和<code>1.2</code></p>
</li>
</ol>
<h3 id="3-2-The-Harder-Way"><a href="#3-2-The-Harder-Way" class="headerlink" title="3.2 The Harder Way"></a>3.2 The Harder Way</h3><hr>
<p>Now we set up the global library for R. More details about this is described in [Tal Galili’s blog post][1]. Although you are using the latest version of R, you can still follow my steps. It will help you set a global library for R. This will prevent some troubles in the future.</p>
<p>Open your R. Run <code>chooseCRANmirror()</code> command line(Type it and hit <code>ENTER</code>) .Choose <code>China(Xiamen)</code>.</p>
<p><img src="http://i.imgbox.com/nMC12nzx.jpg" alt="mirror" title="Choose Mirror"></p>
<p>Run the following codes line by line.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source(&quot;http://www.r-statistics.com/wp-content/uploads/2010/04/upgrading-R-on-windows.r.txt&quot;)</div><div class="line">Old.R.RunMe()</div></pre></td></tr></table></figure></p>
<p><img src="http://i.imgbox.com/yn5SmnIH.jpg" alt="oldr" title="Set global lib"></p>
<p>It will ask you whether or not to quit R. Just type <code>n</code> and hit <code>ENTER</code>. Then run <code>New.R.RunMe()</code> just the same way.</p>
<p>Once you have done these, from now on, whenever you want to update to a new version of R in the future, all you will need to do are the following <strong>TWO</strong> steps:</p>
<ol>
<li>Download and install the new version of R</li>
<li>Open your new R and run the following codes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source(&quot;http://www.r-statistics.com/wp-content/uploads/2010/04/upgrading-R-on-windows.r.txt&quot;)</div><div class="line">New.R.RunMe()</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
  
  
</search>
