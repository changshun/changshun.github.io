<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> æ€ä¹ˆåœ¨Pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ | Changshunçš„Blog</title><meta name="description" content="æ€ä¹ˆåœ¨Pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ - Changshun"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/casual.css"><link rel="stylesheet" href="/css/semantic.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://shichangshun.cn/atom.xml" title="Changshunçš„Blog"></head><body><div class="sidebar"><div class="ui vertical inverted menu"><div class="h100"></div><h3 class="ui inverted aligned icon header"><div class="content"><a href="/" class="title-link">CHANGSHUNçš„BLOG</a></div></h3><div class="h50"></div><div class="side-nav"><a href="/" target="_self" class="item">HOME<i class="icon home"></i></a><a href="/categories" target="_self" class="item">CATEGORIES<i class="icon categories"></i></a><a href="/about" target="_self" class="item">ABOUT<i class="icon about"></i></a><a href="/archives" target="_self" class="item">ARCHIVES<i class="icon archives"></i></a><a href="/tags" target="_self" class="item">TAGS<i class="icon tags"></i></a><a href="/atom.xml" target="_self" class="item">RSS<i class="icon rss"></i></a></div><div class="item"><div class="ui inverted transparent icon input"><input type="text" placeholder="Search..." class="st-default-search-input"><i class="search icon"></i></div></div><div class="h50"></div></div><div class="h50 mq"><a class="ui teal big label"><i class="content icon"></i></a></div><div class="author-info"><a href="/" class="img-link"><img src="http://i.imgbox.com/v0MVVgnM.jpeg" class="author-photo ui tiny circular image"></a><h4 class="ui aligned icon header"><div class="content">Changshun</div></h4><p class="author-desc">Rã€Pythonã€æ•°æ®çˆ±å¥½è€… | è¿˜æ²¡æ‰¾åˆ°å·¥ä½œï¼Œæƒ³æ‰¾ä¸ªå›ºå®šæ”¶ç›Šçš„å·®äº‹ | è©¹ğŸ¶ä¸€åª</p><div class="social-outer"><div class="social-inner"><a href="https://github.com/changshun" target="_blank" class="social-link"><i class="icon github"></i></a><a href="https://twitter.com/allenstoneshi" target="_blank" class="social-link"><i class="icon twitter"></i></a></div></div></div></div><div class="main"><div class="wrap"><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">æ€ä¹ˆåœ¨Pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h1><div class="post-info"><div class="post-date"><h6 class="ui header"><i class="calendar icon"></i><div class="content">Nov 26, 2016</div></h6></div></div><div class="post-content"><p>source:<a href="https://docs.python.org/3/howto/regex.html" target="_blank" rel="external">Regular Expression HOWTO</a></p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>(Regular expressions, REs,regexes regex patterns)åœ¨<code>python</code>ä¸­ä¸»è¦é€šè¿‡<code>re</code>åŒ…å®ç°ã€‚ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ å¯ä»¥åŒ¹é…ä»»æ„ä½ æƒ³åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œ æ¯”å¦‚email, ç”µè¯å·ç ï¼Œè‹±æ–‡å•è¯ï¼Œ$\TeX$å‘½ä»¤ç­‰ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„patternè¢«ç¼–è¯‘æˆä¸€ç³»åˆ—çš„bytecode,ç„¶åé€šè¿‡<code>C</code>è¯­è¨€å†™çš„å¼•æ“æ‰§è¡ŒåŒ¹é…ã€‚é«˜çº§çš„ä½¿ç”¨è€…åº”å½“è€ƒè™‘ä¸åŒçš„å†™æ³•çš„æ‰§è¡Œé€Ÿåº¦ã€‚</p>
<h1 id="ç®€å•çš„patterns"><a href="#ç®€å•çš„patterns" class="headerlink" title="ç®€å•çš„patterns"></a>ç®€å•çš„<code>patterns</code></h1><h2 id="åŒ¹é…å­—ç¬¦"><a href="#åŒ¹é…å­—ç¬¦" class="headerlink" title="åŒ¹é…å­—ç¬¦"></a>åŒ¹é…å­—ç¬¦</h2><h3 id="å…ƒå­—ç¬¦-metacharacters"><a href="#å…ƒå­—ç¬¦-metacharacters" class="headerlink" title="å…ƒå­—ç¬¦(metacharacters)"></a>å…ƒå­—ç¬¦(metacharacters)</h3><ul>
<li><code>.</code> åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</li>
<li><code>[]</code> ä¸­æ‹¬å·é‡Œçš„ä»»ä¸€å­—ç¬¦å‡ºç°ä¸€æ¬¡</li>
<li><code>\d</code> åŒ¹é…æ•°å­—,ç›¸å½“äº[0-9]</li>
<li><code>\D</code> åŒ¹é…éæ•°å­—</li>
<li><code>\s</code> åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦</li>
<li><code>\S</code> åŒ¹é…ä»»æ„çš„éç©ºç™½ç¬¦</li>
<li><code>\w</code> åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—</li>
<li><code>\W</code> åŒ¹é…éå­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—</li>
<li><code>^</code>  åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</li>
<li><code>$</code>  åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸu</li>
</ul>
<h3 id="é‡å¤"><a href="#é‡å¤" class="headerlink" title="é‡å¤"></a>é‡å¤</h3><ul>
<li><code>*</code> é‡å¤0æ¬¡æˆ–å¤šæ¬¡</li>
<li><code>+</code> é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡</li>
<li><code>?</code> é‡å¤0æ¬¡æˆ–1è¯</li>
<li><code>{n}</code> é‡å¤næ¬¡</li>
<li><code>{n,}</code> é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡</li>
<li><code>{n, m}</code> é‡å¤næ¬¡åˆ°mæ¬¡</li>
</ul>
<h1 id="åœ¨pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#åœ¨pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åœ¨pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>åœ¨<code>python</code>ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h1><p>åœ¨<code>python</code>ä¸­ï¼Œ<code>re</code>æ¨¡å—ä¸ºæˆ‘ä»¬æä¾›äº†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å¼•æ“ã€‚</p>
<h2 id="ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼"><a href="#ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼"></a>ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">p = re.compile(<span class="string">'ab*'</span>)</div><div class="line">p</div></pre></td></tr></table></figure>
<pre><code>re.compile(r&apos;ab*&apos;, re.UNICODE)
</code></pre><p><code>re.compile</code>å‡½æ•°èƒ½äº§ç”Ÿpatternå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨patternåŒ¹é…å­—ç¬¦å®ç°æŸ¥æ‰¾æˆ–è€…æ›¿ä»£ç­‰åŠŸèƒ½ã€‚<code>re.compile</code>è¿˜æœ‰å…¶å®ƒä¸€äº›è¯­æ³•å˜é‡ï¼Œæ¯”å¦‚å¿½ç•¥å¤§å°å†™ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'ab.*'</span>, re.IGNORECASE)</div><div class="line">p</div></pre></td></tr></table></figure>
<pre><code>re.compile(r&apos;ab.*&apos;, re.IGNORECASE|re.UNICODE)
</code></pre><h2 id="è¿›è¡ŒåŒ¹é…"><a href="#è¿›è¡ŒåŒ¹é…" class="headerlink" title="è¿›è¡ŒåŒ¹é…"></a>è¿›è¡ŒåŒ¹é…</h2><p>å¦‚æœ<code>RE</code>æ˜¯æŸä¸ª<code>pattern</code></p>
<ul>
<li><code>match()</code> æ˜¯å¦æ˜¯ä»¥<code>RE</code>å¼€å¤´çš„</li>
<li><code>search()</code> æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨<code>RE</code></li>
<li><code>findall()</code> å¯»æ‰¾æ‰€æœ‰çš„å­å­—ç¬¦ä¸²ï¼Œ è¿”å›ä¸€ä¸ªlist</li>
<li><code>finditer()</code> ç±»ä¼¼ä¸Šï¼Œ è¿”å›ä¸€ä¸ª<code>iterator</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = p.match(<span class="string">'XYZ'</span>)</div><div class="line">a <span class="comment"># è¿”å›None</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">m = p.match(<span class="string">'abcde'</span>)</div><div class="line">m</div></pre></td></tr></table></figure>
<pre><code>&lt;_sre.SRE_Match object; span=(0, 5), match=&apos;abcde&apos;&gt;
</code></pre><p>ä½¿ç”¨<code>match()</code>åŒ¹é…ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ª<code>match</code>å¯¹è±¡ï¼Œå¦‚æœæƒ³è°ƒç”¨ç»“æœçš„è¯ï¼Œå‚è€ƒä¸‹é¢çš„å‡ ç§æ–¹æ³•:</p>
<ul>
<li><code>group()</code>: è¿”å›<code>RE</code>åŒ¹é…çš„å­—ç¬¦ä¸²</li>
<li><code>start()</code>: è¿”å›åŒ¹é…ç»“æœçš„å¼€å§‹ä½ç½®</li>
<li><code>end()</code>: è¿”å›åŒ¹é…ç»“æœçš„æœ«å°¾ä½ç½®</li>
<li><code>span()</code>: è¿”å›å­—ç¬¦ä½ç½®çš„åŒºé—´</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group()</div></pre></td></tr></table></figure>
<pre><code>&apos;abcde&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.start(), m.end()</div></pre></td></tr></table></figure>
<pre><code>(0, 5)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.span()</div></pre></td></tr></table></figure>
<pre><code>(0, 5)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">m = p.match(<span class="string">'xabcde'</span>)</div><div class="line">m <span class="comment"># matchåªèƒ½åŒ¹é…ä»¥`RE`å¼€å§‹çš„å­—ç¬¦ä¸²</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">m  = p.search(<span class="string">"xabcde"</span>)</div><div class="line">m.group()</div></pre></td></tr></table></figure>
<pre><code>&apos;abcde&apos;
</code></pre><p>åœ¨å®é™…ç¼–ç¨‹æ—¶ï¼Œ å¾€å¾€æŠŠ<code>match</code>å¯¹è±¡å­˜æˆä¸€ä¸ªå˜é‡ï¼Œ ç„¶åæ£€æŸ¥æ˜¯å¦æ˜¯ç©º, å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'[a-z]+'</span>,  re.IGNORECASE)</div><div class="line">m = p.match(<span class="string">"Abdedfscf"</span>)</div><div class="line"><span class="keyword">if</span> m:</div><div class="line">    print(<span class="string">'Matched found:'</span>, m.group())</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">'Matched not found'</span>)</div></pre></td></tr></table></figure>
<pre><code>Matched found: Abdedfscf
</code></pre><p>å¦‚æœæƒ³è¦è¿”å›æ‰€æœ‰çš„åŒ¹é…å­—ç¬¦ä¸²çš„è¯ï¼Œ å¯ä»¥ä½¿ç”¨<code>findall()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'[\d.]+'</span>)</div><div class="line">p.findall(<span class="string">'1.4 billions people in 34 provinces'</span>)</div></pre></td></tr></table></figure>
<pre><code>[&apos;1.4&apos;, &apos;34&apos;]
</code></pre><p>å½“ç„¶ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å¯¹è±¡ï¼Œ ä»¥ä¾¿è¿›è¡Œè¿­ä»£æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'[\d.]+'</span>)</div><div class="line">iterator = p.finditer(<span class="string">'1.4 billions people in 34 provinces'</span>)</div><div class="line"><span class="keyword">for</span> it <span class="keyword">in</span> iterator:</div><div class="line">    print(it.span())</div></pre></td></tr></table></figure>
<pre><code>(0, 3)
(23, 25)
</code></pre><h2 id="Module-Level-Functions"><a href="#Module-Level-Functions" class="headerlink" title="Module-Level Functions"></a>Module-Level Functions</h2><p>å¦‚æœå«Œæ¯æ¬¡éƒ½ä½¿ç”¨<code>compileï¼ˆï¼‰</code>ç”Ÿæˆ<code>RE</code>å¤ªéº»çƒ¦ï¼Œ ä½ ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™ç§æ–¹å¼è¿›è¡ŒåŒ¹é…:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.findall(<span class="string">r'[\d.]+'</span>, <span class="string">'1.4 billions people in 34 provinces'</span>))</div></pre></td></tr></table></figure>
<pre><code>[&apos;1.4&apos;, &apos;34&apos;]
</code></pre><p>è¿™é‡Œçš„<code>r</code>è¡¨ç¤ºregexçš„æ„æ€</p>
<h2 id="Compilation-Flags"><a href="#Compilation-Flags" class="headerlink" title="Compilation Flags"></a>Compilation Flags</h2><p>å…è®¸ä½ ä¿®æ”¹ä¸€äº›å‚æ•°ï¼Œ å®ç°å¤§å°å†™å¿½ç•¥ï¼Œ å¤šè¡ŒåŒ¹é…ç­‰åŠŸèƒ½</p>
<h3 id="I-IGNORECASE"><a href="#I-IGNORECASE" class="headerlink" title="I  IGNORECASE"></a><code>I  IGNORECASE</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.findall(<span class="string">r'\ba[a-z]+'</span>, <span class="string">"abc, abandon, banana, Ana, AB"</span>,re.I)</div></pre></td></tr></table></figure>
<pre><code>[&apos;abc&apos;, &apos;abandon&apos;, &apos;Ana&apos;, &apos;AB&apos;]
</code></pre><p><code>A</code> <code>ASCII</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.findall(<span class="string">r'\w+'</span>, <span class="string">"hello! Hey! ä½ å¥½"</span>,re.A)</div></pre></td></tr></table></figure>
<pre><code>[&apos;hello&apos;, &apos;Hey&apos;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.findall(<span class="string">r'\w+'</span>, <span class="string">"hello! Hey! ä½ å¥½"</span>)</div></pre></td></tr></table></figure>
<pre><code>[&apos;hello&apos;, &apos;Hey&apos;, &apos;ä½ å¥½&apos;]
</code></pre><h2 id="æ›´å¤šå…ƒå­—ç¬¦"><a href="#æ›´å¤šå…ƒå­—ç¬¦" class="headerlink" title="æ›´å¤šå…ƒå­—ç¬¦"></a>æ›´å¤šå…ƒå­—ç¬¦</h2><ul>
<li><code>|</code> æˆ– æ“ä½œç¬¦ éœ€è¦æ³¨æ„çš„æ—¶<code>abc|xyz</code>åŒ¹é…çš„æ—¶<code>abc</code>æˆ–<code>xyz</code>ï¼Œ è€Œä¸æ˜¯<code>c</code>æˆ–<code>x</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.findall(<span class="string">r'Bill|Jim'</span>, <span class="string">"Tom, Jimmy, Zhang&amp;Bill"</span>)</div></pre></td></tr></table></figure>
<pre><code>[&apos;Jim&apos;, &apos;Bill&apos;]
</code></pre><h2 id="åˆ†ç»„-Grouping"><a href="#åˆ†ç»„-Grouping" class="headerlink" title="åˆ†ç»„(Grouping)"></a>åˆ†ç»„(Grouping)</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬è¿›è¡ŒåŒ¹é…çš„æ—¶å€™ä¼šéœ€è¦æŠŠåŒ¹é…çš„ç»“æœåŒºåˆ†ä¸ºä¸åŒçš„ç»„æˆéƒ¨åˆ†ï¼Œè¿™æˆ‘ä»¬å°±ç”¨å¾—åˆ°åˆ†ç»„<code>grouping</code>ï¼Œ æˆ‘ä»¬ä½¿ç”¨â€™<code>()</code>â€˜ä½œä¸ºåˆ†ç»„çš„æ ‡è®°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'(a(b)c)d'</span>)</div><div class="line">m = p.match(<span class="string">'abcd'</span>)</div><div class="line">m.group(<span class="number">0</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;abcd&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;abc&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="number">2</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;b&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mail = <span class="string">"mayun@alibaba.com.cn mail of Jack Ma"</span></div><div class="line">p = re.compile(<span class="string">"(^[a-z][a-z1-9._]+)@([a-z1-9][a-z1-9._]+)"</span>, re.I)</div><div class="line">m = p.match(mail)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="number">0</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;mayun@alibaba.com.cn&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;mayun&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="number">2</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;alibaba.com.cn&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.groups()</div></pre></td></tr></table></figure>
<pre><code>(&apos;mayun&apos;, &apos;alibaba.com.cn&apos;)
</code></pre><h2 id="åˆ†ç»„å‘½å"><a href="#åˆ†ç»„å‘½å" class="headerlink" title="åˆ†ç»„å‘½å"></a>åˆ†ç»„å‘½å</h2><p>åˆ†ç»„å‘½åæ˜¯Pythonç‹¬æœ‰çš„æ­£åˆ™çš„åŠŸèƒ½ï¼Œ é€šè¿‡<code>(?P&lt;name&gt;...)</code>å¯ä»¥ä¸ºåˆ†ç»„å‘½å</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mail = <span class="string">"mayun@alibaba.com.cn mail of Jack Ma"</span></div><div class="line">p = re.compile(<span class="string">"(?P&lt;User&gt;^[a-z][a-z1-9._]+)@(?P&lt;Company&gt;[a-z1-9][a-z1-9._]+)"</span>, re.I)</div><div class="line">m = p.match(mail)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="string">'User'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;mayun&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.group(<span class="string">'Company'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;alibaba.com.cn&apos;
</code></pre><h1 id="å­—ç¬¦ä¿®æ”¹"><a href="#å­—ç¬¦ä¿®æ”¹" class="headerlink" title="å­—ç¬¦ä¿®æ”¹"></a>å­—ç¬¦ä¿®æ”¹</h1><ul>
<li><code>split()</code> åœ¨æ­£åˆ™åŒ¹é…çš„ä½ç½®åˆ†ç¦»</li>
<li><code>sub()</code> æŸ¥æ‰¾æ›¿ä»£</li>
<li><code>subn()</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.split(<span class="string">r"\W+"</span>, <span class="string">'This is a test, short and sweet, of split().'</span>)</div></pre></td></tr></table></figure>
<pre><code>[&apos;This&apos;, &apos;is&apos;, &apos;a&apos;, &apos;test&apos;, &apos;short&apos;, &apos;and&apos;, &apos;sweet&apos;, &apos;of&apos;, &apos;split&apos;, &apos;&apos;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.split(<span class="string">r"\W+"</span>, <span class="string">'This is a test, short and sweet, of split().'</span>,<span class="number">3</span>) <span class="comment"># 3 æ˜¯åˆ†å‰²æ¬¡æ•°</span></div></pre></td></tr></table></figure>
<pre><code>[&apos;This&apos;, &apos;is&apos;, &apos;a&apos;, &apos;test, short and sweet, of split().&apos;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">re.split(<span class="string">r"(\W+)"</span>, <span class="string">'This is a test, short and sweet, of split().'</span>) <span class="comment"># ä¿ç•™ç¬¦åˆæ¡ä»¶çš„åˆ†å‰²é¡¹</span></div></pre></td></tr></table></figure>
<pre><code>[&apos;This&apos;,
 &apos; &apos;,
 &apos;is&apos;,
 &apos; &apos;,
 &apos;a&apos;,
 &apos; &apos;,
 &apos;test&apos;,
 &apos;, &apos;,
 &apos;short&apos;,
 &apos; &apos;,
 &apos;and&apos;,
 &apos; &apos;,
 &apos;sweet&apos;,
 &apos;, &apos;,
 &apos;of&apos;,
 &apos; &apos;,
 &apos;split&apos;,
 &apos;().&apos;,
 &apos;&apos;]
</code></pre><h2 id="æŸ¥æ‰¾å¹¶æ›¿ä»£"><a href="#æŸ¥æ‰¾å¹¶æ›¿ä»£" class="headerlink" title="æŸ¥æ‰¾å¹¶æ›¿ä»£"></a>æŸ¥æ‰¾å¹¶æ›¿ä»£</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'(blue|white|red)'</span>)</div><div class="line">p.sub(<span class="string">'colour'</span>, <span class="string">'blue socks and red shoes'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;colour socks and colour shoes&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p.sub(<span class="string">'colour'</span>, <span class="string">'blue socks and red shoes'</span>, count=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;colour socks and red shoes&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p.subn(<span class="string">'colour'</span>, <span class="string">'blue socks and red shoes'</span>)</div></pre></td></tr></table></figure>
<pre><code>(&apos;colour socks and colour shoes&apos;, 2)
</code></pre><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><h2 id="ä½¿ç”¨æ­£åˆ™è¿˜æ˜¯å­—ç¬¦ä¸²æ–¹æ³•"><a href="#ä½¿ç”¨æ­£åˆ™è¿˜æ˜¯å­—ç¬¦ä¸²æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ­£åˆ™è¿˜æ˜¯å­—ç¬¦ä¸²æ–¹æ³•"></a>ä½¿ç”¨æ­£åˆ™è¿˜æ˜¯å­—ç¬¦ä¸²æ–¹æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">string1 = <span class="string">"swordfish"</span></div><div class="line">string1.replace(<span class="string">"word"</span>, <span class="string">'deed'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;sdeedfish&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p = re.compile(<span class="string">'word'</span>)</div><div class="line">p.sub(string1, <span class="string">'deed'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;deed&apos;
</code></pre><h2 id="match-å’Œsearch"><a href="#match-å’Œsearch" class="headerlink" title="match()å’Œsearch"></a><code>match()</code>å’Œ<code>search</code></h2><p>å‰è€…åªåŒ¹é…ä»0ä½ç½®å¼€å§‹çš„ç»“æœï¼Œ <code>search()</code>ä¼šåŒ¹é…ä¸ä»0å¼€å§‹çš„ç»“æœ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.match(<span class="string">r'super'</span>, <span class="string">'superstition'</span>).span())</div></pre></td></tr></table></figure>
<pre><code>(0, 5)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.match(<span class="string">'super'</span>, <span class="string">'insuperable'</span>))</div></pre></td></tr></table></figure>
<pre><code>None
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.search(<span class="string">'super'</span>, <span class="string">'insuperable'</span>).span())</div></pre></td></tr></table></figure>
<pre><code>(2, 7)
</code></pre><h2 id="è´ªå©ªå’Œéè´ªå©ª"><a href="#è´ªå©ªå’Œéè´ªå©ª" class="headerlink" title="è´ªå©ªå’Œéè´ªå©ª"></a>è´ªå©ªå’Œéè´ªå©ª</h2><p>å‰è€…æ˜¯æŒ‡åŒ¹é…å°½å¯èƒ½å¤šçš„ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ï¼Œ åè€…åˆ™ä¼šåŒ¹é…å°½å¯èƒ½å°‘çš„æˆ–æŒ‡å®šçš„ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Title&lt;/title&gt;'</span></div><div class="line">len(s)</div></pre></td></tr></table></figure>
<pre><code>32
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.match(<span class="string">'&lt;.*&gt;'</span>, s).span())</div></pre></td></tr></table></figure>
<pre><code>(0, 32)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.match(<span class="string">'&lt;.*&gt;'</span>, s).group())</div></pre></td></tr></table></figure>
<pre><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;Title&lt;/title&gt;
</code></pre><p>å¦‚æœæƒ³è¦éè´ªå©ªå¯ä»¥ä½¿ç”¨<code>?</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(re.match(<span class="string">'&lt;.*?&gt;'</span>, s).group())</div></pre></td></tr></table></figure>
<pre><code>&lt;html&gt;
</code></pre><h2 id="ä½¿ç”¨re-VERBOSE"><a href="#ä½¿ç”¨re-VERBOSE" class="headerlink" title="ä½¿ç”¨re.VERBOSE"></a>ä½¿ç”¨<code>re.VERBOSE</code></h2><p>æœ‰æ—¶å€™æˆ‘ä»¬è¦åŒ¹é…æ¯”è¾ƒå¤æ‚çš„æ–‡æœ¬æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¦å†™å¾ˆé•¿ï¼Œå¦‚æœæºç¨‹ä¸€è¡Œçš„è¯ï¼Œå¯è¯»æ€§å°±æ¯”è¾ƒå·®ï¼Œå¯ä»¥ä½¿ç”¨<code>re.VERBOSE</code>å¢åŠ patternçš„æ˜“è¯»æ€§</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">pat = re.compile(<span class="string">r"""</span></div><div class="line">\s*                 # Skip leading whitespace</div><div class="line"> (?P&lt;header&gt;[^:]+)   # Header name</div><div class="line"> \s* :               # Whitespace, and a colon</div><div class="line"> (?P&lt;value&gt;.*?)      # The header's value -- *? used to</div><div class="line">                     # lose the following trailing whitespace</div><div class="line"> \s*$                # Trailing whitespace to end-of-line</div><div class="line">""")</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pat = re.compile(<span class="string">r"\s*(?P&lt;header&gt;[^:]+)\s*:(?P&lt;value&gt;.*?)\s*$"</span>)</div></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2016/11/08/å­¦ä¹ ç¬”è®°/è´§å¸æ”¿ç­–åŠè´§å¸æ”¿ç­–å·¥å…·/" class="next"><button class="ui button teal">NEXT</button></a></div><div data-thread-key="2016/11/26/re/" data-title="æ€ä¹ˆåœ¨Pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" data-url="http://shichangshun.cn/2016/11/26/re/" class="ds-share"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><span class="ds-more">åˆ†äº«åˆ°ï¼š</span></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">å¾®åš</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">è…¾è®¯å¾®åš</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">å¾®ä¿¡</a></li></ul></div></div><div data-thread-key="2016/11/26/re/" data-title="æ€ä¹ˆåœ¨Pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" data-url="http://shichangshun.cn/2016/11/26/re/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"changshun"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>Â© 2015 - 2016 <a href="http://shichangshun.cn">Changshun</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and theme by <a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">casual</a></p></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/jquery.scrollex.js"></script><script src="/js/jquery.goup.min.js"></script><script src="/js/semantic.min.js"></script><script src="/js/casual.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).ready(function(){$.goup({trigger:100,bottomOffset:100,locationOffset: 0,title:'',titleAsText:true});});</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','TvAnFS4AVxjiJUvrZJRB','2.0.0');</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></div></body></html>