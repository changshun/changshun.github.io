<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 绘制WISE老师论文关键词词云 | Changshun的Blog</title><meta name="description" content="绘制WISE老师论文关键词词云 - Changshun"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/casual.css"><link rel="stylesheet" href="/css/semantic.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://shichangshun.cn/atom.xml" title="Changshun的Blog"></head><body><div class="sidebar"><div class="ui vertical inverted menu"><div class="h100"></div><h3 class="ui inverted aligned icon header"><div class="content"><a href="/" class="title-link">CHANGSHUN的BLOG</a></div></h3><div class="h50"></div><div class="side-nav"><a href="/" target="_self" class="item">HOME<i class="icon home"></i></a><a href="/categories" target="_self" class="item">CATEGORIES<i class="icon categories"></i></a><a href="/about" target="_self" class="item">ABOUT<i class="icon about"></i></a><a href="/archives" target="_self" class="item">ARCHIVES<i class="icon archives"></i></a><a href="/tags" target="_self" class="item">TAGS<i class="icon tags"></i></a><a href="/atom.xml" target="_self" class="item">RSS<i class="icon rss"></i></a></div><div class="item"><div class="ui inverted transparent icon input"><input type="text" placeholder="Search..." class="st-default-search-input"><i class="search icon"></i></div></div><div class="h50"></div></div><div class="h50 mq"><a class="ui teal big label"><i class="content icon"></i></a></div><div class="author-info"><a href="/" class="img-link"><img src="http://i.imgbox.com/v0MVVgnM.jpeg" class="author-photo ui tiny circular image"></a><h4 class="ui aligned icon header"><div class="content">Changshun</div></h4><p class="author-desc">朝着前端打怪升级中 | 目前从事闪存产品的固件和测试工具开发工作 | 多特蒙德死忠</p><div class="social-outer"><div class="social-inner"><a href="https://github.com/changshun" target="_blank" class="social-link"><i class="icon github"></i></a><a href="https://twitter.com/allenstoneshi" target="_blank" class="social-link"><i class="icon twitter"></i></a><a href="http://weibo.com/fredinweibo" target="_blank" class="social-link"><i class="icon weibo"></i></a></div></div></div></div><div class="main"><div class="wrap"><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">绘制WISE老师论文关键词词云</h1><div class="post-info"><div class="post-date"><h6 class="ui header"><i class="calendar icon"></i><div class="content">Jul 8, 2016</div></h6></div></div><div class="post-content"><blockquote>
<p>最近看到<a href="http://lchiffon.github.io/" target="_blank" rel="external">@lchiffon</a>写的<a href="http://github.com/lchiffon/wordcloud2" target="_blank" rel="external">wordcloud2</a>，比<a href="https://cran.r-project.org/web/packages/wordcloud/" target="_blank" rel="external">wordcloud</a>使用更简单，效果也更炫酷更灵活。于是想画一个WISE老师发表英文论文的关键词的词云。本文的步骤包括数据抓取和绘制词云两个步骤。</p>
</blockquote>
<h1 id="0-准备"><a href="#0-准备" class="headerlink" title="0. 准备"></a>0. 准备</h1><h2 id="0-1-安装wordcloud2"><a href="#0-1-安装wordcloud2" class="headerlink" title="0.1 安装wordcloud2"></a>0.1 安装<code>wordcloud2</code></h2><p><code>wordcloud2</code>首次运行前需要从作者的github下载安装，运行下面的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtools::install_github(&quot;lchiffon/wordcloud2&quot;)</div></pre></td></tr></table></figure>
<h2 id="0-2-载入要用的包："><a href="#0-2-载入要用的包：" class="headerlink" title="0.2 载入要用的包："></a>0.2 载入要用的包：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">library(RCurl)</div><div class="line">library(XML)</div><div class="line">library(stringr)</div><div class="line">library(plyr)</div><div class="line">library(dplyr)</div><div class="line">library(wordcloud2)</div><div class="line">library(tm)</div></pre></td></tr></table></figure>
<ul>
<li><code>Rcurl</code>和<code>XML</code>用于网页的抓取，</li>
<li><code>stringr</code>用于抓取文本的处理和提取</li>
<li><code>plyr</code>和<code>dplyr</code>用于数据变形和处理</li>
<li><code>wordcloud2</code>则用于词云的绘制</li>
</ul>
<h1 id="1-抓取论文信息"><a href="#1-抓取论文信息" class="headerlink" title="1. 抓取论文信息"></a>1. 抓取论文信息</h1><blockquote>
<p>王亚南经济研究院(WISE)成立于2005年，是厦门大学一个实体性的经济学教育科研机构，不太长的时间内，成为亚太地区和中国一流的、与国际接轨的现代经济学教育和研究机构。</p>
</blockquote>
<p><code>WISE</code>将所有老师公开发表的论文放在 <a href="http://121.192.176.75/index.php?ser_id=2" target="_blank" rel="external">http://121.192.176.75/index.php?ser_id=2</a>这个网站上，其中英文期刊有180篇， 中文有60余篇。我们这次为了绘制词云的美观，只选去其中英文期刊的关键词信息。</p>
<p><img src="/img/wisepapers/page.png" alt=""></p>
<h2 id="1-1-获得分页网址"><a href="#1-1-获得分页网址" class="headerlink" title="1.1 获得分页网址"></a>1.1 获得分页网址</h2><p>网站将250多个论文条目每20条放置一页，每个分页通过网址体现出来，<code>http://121.192.176.75/index.php?ser_id=2&amp;search=&amp;year=&amp;os=&lt;数字&gt;</code>， <code>&lt;数字位置&gt;</code>为20的倍数， 总共有13页。下面的代码生成没个分页的网址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 获得论文的每一个分页</div><div class="line">pageLinks &lt;- str_c(&quot;http://121.192.176.75/index.php?ser_id=2&amp;search=&amp;year=&amp;os=&quot;,seq(0, 240, 20))</div></pre></td></tr></table></figure>
<h2 id="1-2-获得每篇论文的链接"><a href="#1-2-获得每篇论文的链接" class="headerlink" title="1.2 获得每篇论文的链接"></a>1.2 获得每篇论文的链接</h2><p><code>getHTMLLinks</code>是<code>Rcurl</code>内置的一个函数，这个函数可以获得某个页面上所有的链接：</p>
<ul>
<li>对上面生成的页面网址应用<code>getHTMLLinks</code>函数， 就可以获得这些分页上的所有的网址；  </li>
<li>对抓取的网址匹配<code>&quot;\\?ser_id=2&amp;p_id=\\d+&quot;</code>获得符合条件的论文的链接;   </li>
<li>补齐网址。</li>
</ul>
<p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">paperlinks &lt;- lapply(pageLinks, getHTMLLinks)%&gt;%</div><div class="line">  unlist()%&gt;%</div><div class="line">  str_extract(&quot;\\?ser_id=2&amp;p_id=\\d+&quot;)%&gt;%</div><div class="line">  na.omit()%&gt;%</div><div class="line">  str_c(&quot;http://121.192.176.75/index.php&quot;,.)</div><div class="line">head(paperlinks)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">## [1] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2329&quot;</div><div class="line">## [2] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2322&quot;</div><div class="line">## [3] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2333&quot;</div><div class="line">## [4] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2338&quot;</div><div class="line">## [5] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2332&quot;</div><div class="line">## [6] &quot;http://121.192.176.75/index.php?ser_id=2&amp;p_id=2321&quot;</div></pre></td></tr></table></figure>
<h2 id="1-3-抓取论文信息"><a href="#1-3-抓取论文信息" class="headerlink" title="1.3 抓取论文信息"></a>1.3 抓取论文信息</h2><p>我们使用<code>Rcurl</code>包内的<code>xpathSApply</code>函数， 通过匹配<code>Xpath</code>定位我们需要抓取的内容在网页的位置进行抓取（不懂<code>Xpath</code>,可以参考w3schools提供的一个系列教程<a href="http://www.w3schools.com/xsl/xpath_intro.asp" target="_blank" rel="external">http://www.w3schools.com/xsl/xpath_intro.asp</a>）。</p>
<p><code>getPaperInfo</code>是抓取单条论文信息的函数，返回包含<code>author</code>, <code>title</code>,<code>journal</code>,<code>keyWords</code>, <code>paperlink</code>,<code>fullTextLink</code>, <code>updatedDate</code>的<code>data.frame</code></p>
<p><img src="/img/wisepapers/xpath.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># Function to scrap</div><div class="line">getPaperInfo &lt;- function(paperlink)&#123;</div><div class="line">  page_parse &lt;- htmlParse(paperlink,encoding = &quot;utf-8&quot;)</div><div class="line">  # Get author name</div><div class="line">  author &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[1]/strong&apos;,xmlValue)</div><div class="line">  # insert &amp; between diff names</div><div class="line">  author &lt;- str_replace(author, &apos;,&apos;,&apos;\\&amp;&apos;)</div><div class="line">  # paper title</div><div class="line">  title &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dt&apos;, xmlValue)</div><div class="line">  # paper url</div><div class="line">  journal &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[2]/i&apos;, xmlValue)</div><div class="line">  # File name include authoe title journal</div><div class="line">  keyWords &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[6]/text()&apos;, xmlValue)</div><div class="line">  keyWords &lt;- ifelse(length(keyWords)==0, NA, keyWords)</div><div class="line">  fullTextLink &lt;- getHTMLLinks(page_parse)%&gt;%</div><div class="line">    str_extract(&quot;.+\\.pdf&quot;)%&gt;%</div><div class="line">    na.omit()</div><div class="line">  fullTextLink &lt;- ifelse(length(fullTextLink)==0,NA,                str_c(&quot;http://121.192.176.75&quot;,fullTextLink))</div><div class="line">  updatedDate &lt;- xpathSApply(page_parse,&apos;//*[@id=&quot;paged_list&quot;]/dl/dd[3]&apos;, xmlValue)%&gt;%</div><div class="line">    str_extract(&quot;20\\d&#123;6&#125;&quot;)</div><div class="line">  paperInfo &lt;- data.frame(author, title,journal,keyWords, paperlink,fullTextLink, updatedDate)</div><div class="line">  return(paperInfo)</div><div class="line">&#125;</div><div class="line">getPaperInfo(paperlinks[10])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#        author                              title  journal                     keyWords</div><div class="line">#1 韩乾&amp; 洪永淼 国家产业政策、资产价格与投资者行为 经济研究 产业政策，过时信息，过度反应</div><div class="line">#                                           paperlink                                             </div><div class="line"># http://121.192.176.75/index.php?ser_id=2&amp;p_id=2327</div><div class="line"># fullTextLink </div><div class="line">#1 http://121.192.176.75/repec/upload/201602231742217864.pdf    </div><div class="line">#updatedDate</div><div class="line"># 20160223</div></pre></td></tr></table></figure>
<p>我们对所有的<code>paperlinks</code>应用<code>getPaperInfo</code>就会获得所有的论文的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">papers.df &lt;- lapply(paperlinks, getPaperInfo)%&gt;%</div><div class="line">  do.call(&quot;rbind&quot;,.)</div></pre></td></tr></table></figure>
<h1 id="2-绘制词云"><a href="#2-绘制词云" class="headerlink" title="2. 绘制词云"></a>2. 绘制词云</h1><p>本部分我们对<code>WISE</code> 老师发表的英文期刊的关键词绘制词云。</p>
<h2 id="2-1-WISE老师喜欢发什么期刊？"><a href="#2-1-WISE老师喜欢发什么期刊？" class="headerlink" title="2.1 WISE老师喜欢发什么期刊？"></a>2.1 WISE老师喜欢发什么期刊？</h2><p>首先我们通过正则条件将英文期刊发表的论文的信息提取出来，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">papers.en &lt;- papers.df[str_detect(papers.df$journal,&quot;[A-Za-z]&quot;),]</div><div class="line">papers.en$journal &lt;- trimws(papers.en$journal)</div><div class="line">journalRank &lt;- table(papers.en$journal)%&gt;%as.data.frame()%&gt;%arrange(-Freq)</div><div class="line">names(journalRank) &lt;- c(&quot;journal&quot;,&quot;Freq&quot;)</div><div class="line">head(journalRank)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#                                           journal Freq</div><div class="line"># 1                         Journal of Econometrics   25</div><div class="line"># 2                           China Economic Review   16</div><div class="line"># 3                              Econometric Theory    8</div><div class="line"># 4 Journal of the American Statistical Association    7</div><div class="line"># 5                             Econometric Reviews    4</div><div class="line"># 6                               Economics Letters    3</div></pre></td></tr></table></figure>
<p>从上面WISE老师发表论文最多的六个期刊可以看出来，WISE老师发表的论文还是以计量统计为主， 发表论文的质量也是蛮高的， 计量经济学field第一的期刊JOE，竟然发了25篇。。。</p>
<h2 id="2-2-WISE的老师都在研究啥？"><a href="#2-2-WISE的老师都在研究啥？" class="headerlink" title="2.2 WISE的老师都在研究啥？"></a>2.2 WISE的老师都在研究啥？</h2><h3 id="2-2-1-计算词频"><a href="#2-2-1-计算词频" class="headerlink" title="2.2.1 计算词频"></a>2.2.1 计算词频</h3><p>下面我们想看看WISE老师发表的论文都在说啥吧。我们下面统计下所有的论文关键词的词频。<br>下面的代码把所有的关键词放在一起，并对英文单词的大小写， 标点，空格， 和停止词（比如and， a, um）处理，然后统计了各个单词的出现频率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">keyWords &lt;- str_c(na.omit(papers.en$keyWords), collapse = &quot; &quot;)</div><div class="line">keyWords_source &lt;- VectorSource(keyWords)</div><div class="line">wordMatrix &lt;- Corpus(keyWords_source)%&gt;%</div><div class="line">  tm_map(content_transformer(tolower))%&gt;%</div><div class="line">  tm_map(removePunctuation)%&gt;%</div><div class="line">  tm_map(stripWhitespace)%&gt;%</div><div class="line">  tm_map(removeWords, stopwords(&quot;english&quot;))%&gt;%</div><div class="line">  DocumentTermMatrix()%&gt;%as.matrix()%&gt;%t()%&gt;%</div><div class="line">  as.data.frame()</div><div class="line">wordMatrix$Term &lt;- rownames(wordMatrix)</div><div class="line">names(wordMatrix) &lt;- c(&quot;Freq&quot;,&quot;Term&quot;)</div><div class="line">termFreq &lt;- select(wordMatrix, Term, Freq)</div></pre></td></tr></table></figure>
<h2 id="2-3-绘制词云"><a href="#2-3-绘制词云" class="headerlink" title="2.3 绘制词云"></a>2.3 绘制词云</h2><p>###2.3.1 使用<code>wordcloud2</code>绘制词云</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/origin.png" alt=""></p>
<p>我们可以通过修改<code>size</code>, <code>color</code>, <code>shape</code>等参数修改字体大小， 颜色，以及词云形状。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq, size = 1,shape = &apos;star&apos;)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/star.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wordcloud2(termFreq, size = 2, minRotation = -pi/6, maxRotation = -pi/6,</div><div class="line">  rotateRatio = 1)</div></pre></td></tr></table></figure>
<p><img src="/img/wisepapers/slope.png" alt=""></p>
<p>甚至你可以自定义词云的形状：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">figPath = system.file(&quot;examples/t.png&quot;,package = &quot;wordcloud2&quot;)</div><div class="line">wordcloud2(demoFreq, figPath = figPath, size = 1.5,color = &quot;skyblue&quot;)</div></pre></td></tr></table></figure>
<p><img src="http://7xr5em.com1.z0.glb.clouddn.com/tcloud.png" alt=""></p>
<h3 id="2-3-2-使用letterCloud绘制词云"><a href="#2-3-2-使用letterCloud绘制词云" class="headerlink" title="2.3.2 使用letterCloud绘制词云"></a>2.3.2 使用<code>letterCloud</code>绘制词云</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">letterCloud(termFreq, word = &quot;WISE&quot;, size = 2)</div></pre></td></tr></table></figure>
<p><a href="http://imgbox.com/b95S01bf" target="_blank"><img src="http://i.imgbox.com/b95S01bf.png" alt="image host"></a></p>
<ol>
<li><p>Wordcloud2: <a href="http://lchiffon.github.io/2016/06/01/wordcloud2.html" target="_blank" rel="external">http://lchiffon.github.io/2016/06/01/wordcloud2.html</a></p>
</li>
<li><p>Introdcution to Wordccloud2: <a href="http://lchiffon.github.io/2016/06/10/wordcloud.html" target="_blank" rel="external">http://lchiffon.github.io/2016/06/10/wordcloud.html</a></p>
</li>
<li><p>WISE Journal: <a href="http://121.192.176.75/index.php?ser_id=2" target="_blank" rel="external">http://121.192.176.75/index.php?ser_id=2</a></p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">## R version 3.3.0 (2016-05-03)</div><div class="line">## Platform: x86_64-apple-darwin13.4.0 (64-bit)</div><div class="line">## Running under: OS X 10.11.1 (El Capitan)</div><div class="line">## </div><div class="line">## locale:</div><div class="line">## [1] zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/zh_CN.UTF-8/zh_CN.UTF-8</div><div class="line">## </div><div class="line">## attached base packages:</div><div class="line">## [1] stats     graphics  grDevices utils     datasets  methods   base     </div><div class="line">## </div><div class="line">## loaded via a namespace (and not attached):</div><div class="line">##  [1] magrittr_1.5    formatR_1.2.1   tools_3.3.0     htmltools_0.3.5</div><div class="line">##  [5] yaml_2.1.13     Rcpp_0.12.5     stringi_1.0-1   rmarkdown_0.8  </div><div class="line">##  [9] knitr_1.12.3    stringr_1.0.0   digest_0.6.9    evaluate_0.8</div></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2016/07/10/RClub/summerCamp/" class="prev"><button class="ui button teal">PREV</button></a><a href="/2016/04/19/债券发行与承销笔记/" class="next"><button class="ui button teal">NEXT</button></a></div><div data-thread-key="2016/07/08/wordcloud/" data-title="绘制WISE老师论文关键词词云" data-url="http://shichangshun.cn/2016/07/08/wordcloud/" class="ds-share"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><span class="ds-more">分享到：</span></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul></div></div><div data-thread-key="2016/07/08/wordcloud/" data-title="绘制WISE老师论文关键词词云" data-url="http://shichangshun.cn/2016/07/08/wordcloud/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"changshun"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2016 <a href="http://shichangshun.cn">Changshun</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and theme by <a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">casual</a></p></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/jquery.scrollex.js"></script><script src="/js/jquery.goup.min.js"></script><script src="/js/semantic.min.js"></script><script src="/js/casual.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).ready(function(){$.goup({trigger:100,bottomOffset:100,locationOffset: 0,title:'',titleAsText:true});});</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','TvAnFS4AVxjiJUvrZJRB','2.0.0');</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></div></body></html>